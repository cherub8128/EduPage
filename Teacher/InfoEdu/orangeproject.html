<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orange3 데이터 분석 프로젝트 보고서</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- KaTeX: LaTeX 수식 렌더링 라이브러리 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" xintegrity="sha384-n8MVd4RsNIU07vaPkpxUalGOz4A6PCgbNEOFJMYGfCKijWLLbsc1nlCATRTeDD5b" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" xintegrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmImQXLwlu" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" xintegrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
    <style>
        /* 라이트 모드 전용 색상 변수 */
        :root {
            --bg-primary: #f1f5f9;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --border-primary: #e2e8f0;
            --border-secondary: #cbd5e1;
            --accent-color: #f97316; /* Orange3 테마 색상 */
            --invalid-color: #ef4444;
            --code-bg: #1e293b;
            --code-text: #e2e8f0;
        }
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
            -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
            background-color: var(--bg-primary); color: var(--text-secondary);
        }
        .section-card { background-color: var(--bg-secondary); }
        h1, h2, h3, h4, h5, h6 { color: var(--text-primary); }
        .markdown-input, .text-input {
            width: 100%; border: 1px solid var(--border-secondary); border-radius: 0.5rem; padding: 0.75rem 1rem;
            font-family: 'Noto Sans KR', sans-serif; font-size: 1rem; line-height: 1.75;
            background-color: var(--bg-secondary); color: var(--text-primary);
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .markdown-input { min-height: 150px; resize: vertical; }
        .markdown-input:focus, .text-input:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent-color) 25%, transparent); }
        .markdown-preview { margin-top: 1rem; padding: 1rem; background-color: var(--bg-tertiary); border-radius: 0.5rem; border: 1px solid var(--border-primary); min-height: 120px; }
        .is-invalid { border-color: var(--invalid-color) !important; }
        .is-invalid:focus { box-shadow: 0 0 0 2px color-mix(in srgb, var(--invalid-color) 25%, transparent) !important; }
        .prose { --tw-prose-body: var(--text-primary); --tw-prose-headings: var(--text-primary); --tw-prose-links: var(--accent-color); --tw-prose-bold: var(--text-primary); --tw-prose-code: var(--text-primary); --tw-prose-bullets: var(--text-secondary); }
        .file-upload-label { cursor: pointer; background-color: var(--bg-tertiary); color: var(--text-secondary); padding: 0.5rem 1rem; border-radius: 0.375rem; border: 1px solid var(--border-secondary); font-size: 0.875rem; font-weight: 500; transition: background-color 0.2s, border-color 0.2s; }
        .file-upload-label:hover { background-color: #f1f5f9; border-color: var(--accent-color); }
        
        @media print {
            html, body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background-color: #ffffff !important; color: #000000 !important; }
            .section-card { box-shadow: none !important; border: 1px solid #e2e8f0; page-break-inside: avoid; background-color: #ffffff !important; }
            h1, h2, h3, h4, h5, h6 { color: #000000 !important; }
            .print-hidden { display: none !important; }
            .markdown-input, .image-upload-ui, .text-input { display: none !important; }
            .markdown-preview { margin: 0 !important; padding: 0 !important; background: transparent !important; border: none !important; color: #000000 !important; }
            .prose { --tw-prose-body: #000; --tw-prose-headings: #000; --tw-prose-links: #000; --tw-prose-bold: #000; --tw-prose-code: #000; --tw-prose-bullets: #000; }
            .screenshot-container img { max-width: 100%; display: block !important; }
            .input-as-text::before { content: attr(data-value); white-space: pre-wrap; }
        }

        
    </style>
</head>
<body class="bg-slate-100 text-slate-700">

    <main class="container mx-auto max-w-4xl p-4 sm:p-8">
        <header class="relative text-center mb-12 print-hidden">
            <h1 class="text-4xl sm:text-5xl font-bold tracking-tight">🍊 Orange3 데이터 분석 프로젝트 보고서</h1>
            <p class="mt-4 text-lg">아래의 각 항목에 내용을 직접 입력하여 보고서를 완성하세요. (안내 문구는 입력 시 사라집니다)</p>
        </header>

        <section class="bg-white p-6 sm:p-8 rounded-xl shadow-lg mb-8 section-card">
            <div class="space-y-6">
                <div><label for="project-title" class="text-xl font-semibold">🚀 프로젝트 제목</label><input type="text" id="project-title" placeholder="예: 붓꽃(Iris) 품종 분류 모델 개발" class="text-input mt-2 editable-field"></div>
                <div><label for="student-id" class="text-xl font-semibold">🔢 학번</label><input type="text" id="student-id" placeholder="예: 30101" class="text-input mt-2 editable-field"></div>
                <div><label for="student-name" class="text-xl font-semibold">🆎 이름</label><input type="text" id="student-name" placeholder="예: 홍길동" class="text-input mt-2 editable-field"></div>
            </div>
        </section>

        <section class="bg-white p-6 sm:p-8 rounded-xl shadow-lg mb-8 section-card">
            <h2 class="text-3xl font-bold border-b-2 border-orange-500 pb-3 mb-6">제작 동기</h2>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="motivation" placeholder="이 프로젝트를 만들게 된 이유를 자신의 진로나 관심사, 보강하고 싶은 교과목과 관련지어 구체적으로 작성해주세요."></textarea><div class="markdown-preview prose max-w-none"></div></div>
        </section>

        <section class="bg-white p-6 sm:p-8 rounded-xl shadow-lg mb-8 section-card">
            <h2 class="text-3xl font-bold border-b-2 border-orange-500 pb-3 mb-6">만들면서 어려웠던 점과 극복 방식</h2>
            <h3 class="text-xl font-semibold mt-4">😥 만들면서 어려웠던 점</h3>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="difficulty" placeholder="데이터 전처리 과정, 적절한 위젯 선택, 모델 성능 해석 등 프로젝트를 진행하며 겪었던 기술적, 개념적 어려움을 구체적으로 서술하세요."></textarea><div class="markdown-preview prose max-w-none"></div></div>
            <h3 class="text-xl font-semibold mt-8">💪 극복한 방법</h3>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="solution" placeholder="어려움을 해결하기 위해 참고한 자료(공식 문서, 블로그 등), 시도했던 방법, 그리고 그 과정에서 무엇을 배웠는지 상세히 작성해주세요."></textarea><div class="markdown-preview prose max-w-none"></div></div>
        </section>

        <section class="bg-white p-6 sm:p-8 rounded-xl shadow-lg mb-8 section-card">
            <h2 class="text-3xl font-bold border-b-2 border-orange-500 pb-3 mb-6">프로젝트 사용 개념</h2>
            <h3 class="text-xl font-semibold mt-4">📊 사용 데이터 설명</h3>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="data-desc" placeholder="사용한 데이터셋의 출처와 주제를 설명하고, 전체 데이터 수, 훈련/테스트 데이터 분할 비율, 사용한 데이터 훈련 방식(예: Cross Validation k=5) 등을 기입하세요."></textarea><div class="markdown-preview prose max-w-none"></div></div>
            
            <h4 class="text-lg font-semibold mt-6 mb-2">수치 데이터의 경우 (변수 설명)</h4>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="data-numeric" placeholder="Target, Feature, Meta, Skip으로 설정한 각 변수들의 이름, 종류(수치형/범주형), 그리고 데이터 내에서의 의미를 설명합니다.&#10;예:&#10;- mpg(Target): 수치형, 자동차 연비 (miles per gallon)&#10;- cylinders(Feature): 범주형, 엔진의 실린더 개수"></textarea><div class="markdown-preview prose max-w-none"></div></div>

            <h4 class="text-lg font-semibold mt-6 mb-2">사진 분류 데이터 경우 (카테고리 예시)</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                <div>
                    <input type="text" id="category1-name" class="text-input editable-field mb-2" placeholder="카테고리 1 이름 (예: 강아지)">
                    <div class="screenshot-container"><div class="bg-slate-100 border-2 border-dashed border-slate-300 aspect-video rounded-lg flex items-center justify-center font-medium"><img id="screenshot-preview-1" alt="카테고리 1 이미지" class="w-full h-full object-contain hidden rounded-lg"><span id="screenshot-placeholder-1" class="text-slate-500">이미지 첨부</span></div><div class="mt-2 image-upload-ui text-center"><input type="file" accept="image/*" onchange="previewImage(event, 1)" class="hidden" id="screenshot-input-1"><label for="screenshot-input-1" class="file-upload-label">이미지 선택</label></div></div>
                </div>
                <div>
                    <input type="text" id="category2-name" class="text-input editable-field mb-2" placeholder="카테고리 2 이름 (예: 고양이)">
                    <div class="screenshot-container"><div class="bg-slate-100 border-2 border-dashed border-slate-300 aspect-video rounded-lg flex items-center justify-center font-medium"><img id="screenshot-preview-2" alt="카테고리 2 이미지" class="w-full h-full object-contain hidden rounded-lg"><span id="screenshot-placeholder-2" class="text-slate-500">이미지 첨부</span></div><div class="mt-2 image-upload-ui text-center"><input type="file" accept="image/*" onchange="previewImage(event, 2)" class="hidden" id="screenshot-input-2"><label for="screenshot-input-2" class="file-upload-label">이미지 선택</label></div></div>
                </div>
            </div>

            <h3 class="text-xl font-semibold mt-8">⚙️ Orange3 워크플로우</h3>
            <p class="text-slate-600 mb-4">Orange3에서 구성한 전체 워크플로우 화면을 캡처하여 업로드해주세요.</p>
            <div class="screenshot-container">
                <div class="bg-slate-100 border-2 border-dashed border-slate-300 aspect-[16/9] rounded-lg flex items-center justify-center font-medium">
                    <img id="screenshot-preview-3" alt="워크플로우 이미지" class="w-full h-full object-contain hidden rounded-lg">
                    <span id="screenshot-placeholder-3" class="text-slate-500">워크플로우 스크린샷 첨부</span>
                </div>
                <div class="mt-2 image-upload-ui text-center">
                    <input type="file" accept="image/*" onchange="previewImage(event, 3)" class="hidden" id="screenshot-input-3">
                    <label for="screenshot-input-3" class="file-upload-label">이미지 선택</label>
                </div>
            </div>
            <div class="markdown-editor-container mt-4">
                <textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="workflow-desc" placeholder="업로드한 워크플로우에 대해 간단히 설명해주세요. (데이터의 흐름, 사용된 주요 위젯의 역할 등)"></textarea>
                <div class="markdown-preview prose max-w-none"></div>
            </div>
        </section>

        <section class="bg-white p-6 sm:p-8 rounded-xl shadow-lg mb-8 section-card">
            <h2 class="text-3xl font-bold border-b-2 border-orange-500 pb-3 mb-6">학습 결과 분석 (Test & Score / 혼동 행렬)</h2>
            <p class="text-slate-600 mb-4">Test & Score 또는 Confusion Matrix 위젯의 결과 화면을 캡처하여 업로드해주세요.</p>
            <div class="screenshot-container">
                <div class="bg-slate-100 border-2 border-dashed border-slate-300 aspect-[16/9] rounded-lg flex items-center justify-center font-medium">
                    <img id="screenshot-preview-4" alt="학습 결과 이미지" class="w-full h-full object-contain hidden rounded-lg">
                    <span id="screenshot-placeholder-4" class="text-slate-500">학습 결과 스크린샷 첨부</span>
                </div>
                <div class="mt-2 image-upload-ui text-center">
                    <input type="file" accept="image/*" onchange="previewImage(event, 4)" class="hidden" id="screenshot-input-4">
                    <label for="screenshot-input-4" class="file-upload-label">이미지 선택</label>
                </div>
            </div>
            <h3 class="text-xl font-semibold mt-8">결과 해석</h3>
            <div class="markdown-editor-container mt-4">
                <textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="evaluation-interpretation" placeholder="업로드한 학습 결과를 바탕으로 모델의 성능을 구체적인 수치와 함께 해석해주세요. 어떤 모델이 가장 우수한 성능을 보였으며, 그 이유는 무엇이라고 생각하는지 서술합니다."></textarea>
                <div class="markdown-preview prose max-w-none"></div>
            </div>
        </section>


        <section class="bg-white p-6 sm:p-8 rounded-xl shadow-lg mb-8 section-card">
            <h2 class="text-3xl font-bold border-b-2 border-orange-500 pb-3 mb-6">프로젝트 관련 교과 지식 탐구</h2>
            <h3 class="text-xl font-semibold mt-4">🔬 사용된 데이터 관련 개념</h3>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="knowledge-data" placeholder="데이터가 다루는 주제와 관련된 교과(수학, 과학, 사회 등) 지식을 심화 탐구하여 작성합니다. 예를 들어, '타이타닉 생존자 예측' 데이터라면 당시의 사회 계급 구조, 선박의 구조 등에 대해 탐구할 수 있습니다."></textarea><div class="markdown-preview prose max-w-none"></div></div>
            <h3 class="text-xl font-semibold mt-8">⚙️ 사용된 모델 관련 개념</h3>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="knowledge-model" placeholder="사용한 머신러닝 모델(예: 로지스틱 회귀, SVM, 결정 트리)의 수학적, 통계적 원리를 탐구하여 작성합니다. 모델이 어떤 원리로 데이터를 학습하고 예측하는지 설명해주세요. 수식을 포함하여 설명하면 더욱 좋습니다. 예: $y = Wx + b$"></textarea><div class="markdown-preview prose max-w-none"></div></div>
        </section>

        <section class="bg-white p-6 sm:p-8 rounded-xl shadow-lg mb-8 section-card">
            <h2 class="text-3xl font-bold border-b-2 border-orange-500 pb-3 mb-6">느낀점</h2>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="reflection" placeholder="프로젝트 전반을 통해 새롭게 알게 된 점, 데이터 분석의 중요성, 진로에 대한 생각 변화 등 자신의 성장과 변화를 중심으로 자유롭게 작성하세요."></textarea><div class="markdown-preview prose max-w-none"></div></div>
        </section>

        <section class="bg-white p-6 sm:p-8 rounded-xl shadow-lg mb-8 section-card">
            <h2 class="text-3xl font-bold border-b-2 border-orange-500 pb-3 mb-6">향후 계획</h2>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="future-plan" placeholder="이번 프로젝트를 통해 생긴 추가적인 질문이나, 앞으로 더 깊이 연구해보고 싶은 주제에 대해 간단히 작성해주세요. (예: 다른 변수를 추가하여 모델 성능 개선, 더 복잡한 모델 사용 등)"></textarea><div class="markdown-preview prose max-w-none"></div></div>
        </section>

        <section class="bg-white p-6 sm:p-8 rounded-xl shadow-lg mb-8 section-card">
            <h2 class="text-3xl font-bold border-b-2 border-orange-500 pb-3 mb-6">참고 문헌</h2>
            <div class="markdown-editor-container"><textarea class="markdown-input editable-field" oninput="updatePreview(this)" id="references" placeholder="APA 스타일(7판)에 맞춰 참고한 모든 자료의 출처를 기입하세요.&#10;&#10;[인터넷 기사/웹페이지]&#10;한국데이터분석정보센터. (2023, 3월 5일). 데이터 분석 최신 동향. https://www.data-analysis.kr/latest-trends&#10;&#10;[국내 학술 논문]&#10;김영수. (2021). 빅데이터 분석 기법의 비교 연구. 정보과학논문, 29(2), 101–115. https://doi.org/10.1234/abcd.efgh.ij&#10;&#10;[국내 단행본]&#10;최성민. (2019). 데이터 분석 실전 가이드. 미래앤.&#10;&#10;[해외 학술 논문]&#10;Smith, J., & Johnson, R. (2020). A comparative study on data analysis techniques. Journal of Data Science, 15(4), 233–250. https://doi.org/10.1016/j.jds.2020.01.005&#10;&#10;[해외 단행본]&#10;Brown, L. M. (2018). Introduction to data analysis (2nd ed.). Springer."></textarea><div class="markdown-preview prose max-w-none"></div></div>
        </section>

        <footer class="text-center mt-12 print-hidden">
            <div id="validation-message" class="text-red-600 font-semibold mb-4 h-6"></div>
            <button onclick="saveAsPdf()" class="bg-orange-600 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-orange-700 transition-colors shadow-lg">보고서 PDF로 저장</button>
        </footer>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
    <script>
        // --- CORE FUNCTIONS ---
        const converter = new showdown.Converter({ simpleLineBreaks: true, tables: true, strikethrough: true });

        function updatePreview(textareaElement) {
            saveContent(textareaElement);
            const container = textareaElement.parentElement;
            const preview = container.querySelector('.markdown-preview');
            const markdownText = textareaElement.value;
            const html = converter.makeHtml(markdownText);
            preview.innerHTML = html;
            if (window.renderMathInElement) {
                renderMathInElement(preview, { delimiters: [ {left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false} ] });
            }
        }

        function previewImage(event, id) {
            const preview = document.getElementById(`screenshot-preview-${id}`);
            const placeholder = document.getElementById(`screenshot-placeholder-${id}`);
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const base64Image = e.target.result;
                    preview.src = base64Image;
                    preview.classList.remove('hidden');
                    placeholder.classList.add('hidden');
                    localStorage.setItem(`screenshot-preview-${id}`, base64Image);
                }
                reader.readAsDataURL(file);
            }
        }
        
        // --- LOCAL STORAGE (AUTOSAVE) ---
        function saveContent(element) {
            if(element.id) {
                localStorage.setItem(element.id, element.value);
            }
        }

        function loadContent() {
            document.querySelectorAll('.editable-field').forEach(field => {
                const savedValue = localStorage.getItem(field.id);
                if (savedValue) {
                    field.value = savedValue;
                }
            });
            for (let i = 1; i <= 4; i++) {
                const savedImage = localStorage.getItem(`screenshot-preview-${i}`);
                if (savedImage) {
                    const preview = document.getElementById(`screenshot-preview-${i}`);
                    const placeholder = document.getElementById(`screenshot-placeholder-${i}`);
                    preview.src = savedImage;
                    preview.classList.remove('hidden');
                    placeholder.classList.add('hidden');
                }
            }
        }

        // --- VALIDATION & SAVE ---
        function validateForm() {
            let isValid = true;
            const validationMessage = document.getElementById('validation-message');
            
            // Validate all text fields
            document.querySelectorAll('.editable-field').forEach(field => {
                field.classList.remove('is-invalid');
                if (field.value.trim() === '') {
                    // Special case: Category name is only required if its image is uploaded.
                    if (field.id.startsWith('category') && field.id.endsWith('-name')) {
                        const imgId = field.id.split('-')[1];
                        const imgPreview = document.getElementById(`screenshot-preview-${imgId}`);
                        if (imgPreview && !imgPreview.classList.contains('hidden')) {
                             field.classList.add('is-invalid');
                             isValid = false;
                        }
                    } else {
                        field.classList.add('is-invalid');
                        isValid = false;
                    }
                }
            });

            // Validate mandatory screenshots (workflow and results)
            for (let i = 3; i <= 4; i++) {
                const imgPreview = document.getElementById(`screenshot-preview-${i}`);
                const container = imgPreview.parentElement; // The div that holds the image
                container.classList.remove('is-invalid');

                if (imgPreview.classList.contains('hidden')) {
                    container.classList.add('is-invalid');
                    isValid = false;
                }
            }
            
            validationMessage.textContent = isValid ? '' : '모든 필수 항목을 작성하고 스크린샷을 첨부해주세요.';
            if (!isValid) {
                 window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            return isValid;
        }
        
        function updatePrintableInputs() {
             document.querySelectorAll('.text-input.editable-field').forEach(input => {
                input.setAttribute('data-value', input.value);
            });
        }

        function saveAsPdf() { 
            updatePrintableInputs();
            if (validateForm()) { 
                window.print(); 
            } 
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            loadContent();

            document.querySelectorAll('.markdown-input').forEach(textarea => {
                function autoResize() {
                    textarea.style.height = 'auto';
                    textarea.style.height = (textarea.scrollHeight) + 'px';
                }
                textarea.addEventListener('input', autoResize);
                autoResize();
                textarea.addEventListener('input', () => saveContent(textarea));
            });
            
            document.querySelectorAll('.text-input.editable-field').forEach(input => {
                input.addEventListener('input', () => saveContent(input));
            });

            document.querySelectorAll('.markdown-input.editable-field').forEach(ta => {
                if(ta.value) {
                    updatePreview(ta);
                }
            });
        });
    </script>
</body>
</html>

