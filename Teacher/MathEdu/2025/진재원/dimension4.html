<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4D í…Œì„œë™íŠ¸ & 16-Cell 3D íˆ¬ì˜</title>
  <link rel="canonical" href="https://jinjw27.github.io/Webpage/dimension4.html" />
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 2.5em;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .subtitle {
      text-align: center;
      margin-bottom: 30px;
      opacity: 0.9;
      font-size: 1.1em;
    }

    canvas {
      display: block;
      margin: 0 auto;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 15px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
    }

    .controls {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 25px;
      margin-top: 30px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    }

    .control-group {
      margin-bottom: 20px;
    }

    .control-group:last-child {
      margin-bottom: 0;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 0.95em;
    }

    input[type="range"] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.2);
      outline: none;
      -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: white;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    input[type="range"]::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: white;
      cursor: pointer;
      border: none;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .value-display {
      display: inline-block;
      float: right;
      background: rgba(255, 255, 255, 0.2);
      padding: 2px 10px;
      border-radius: 12px;
      font-size: 0.9em;
    }

    button {
      background: white;
      color: #667eea;
      border: none;
      padding: 12px 30px;
      border-radius: 25px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    button:active {
      transform: translateY(0);
    }

    .info {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
      font-size: 0.95em;
      line-height: 1.6;
    }

    .formula {
      background: rgba(0, 0, 0, 0.2);
      padding: 15px;
      border-radius: 10px;
      margin: 15px 0;
      font-family: "Courier New", monospace;
      overflow-x: auto;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1 id="title">ğŸ”· 4D í…Œì„œë™íŠ¸ íˆ¬ì˜ (Full Rotation)</h1>
    <div class="subtitle" id="subtitle">
      4ì°¨ì› ì´ˆì…ë°©ì²´ì˜ 3ì°¨ì› ê·¸ë¦¼ì (6ê°œ í‰ë©´ íšŒì „)
    </div>

    <canvas id="canvas" width="800" height="600"></canvas>

    <div class="controls">
      <div class="control-group">
        <label>
          4D íšŒì „ XY í‰ë©´ (Î±)
          <span class="value-display" id="rotXY-val">0.00</span>
        </label>
        <input type="range" id="rotXY" min="0" max="6.28" step="0.01" value="0" />
      </div>

      <div class="control-group">
        <label>
          4D íšŒì „ XZ í‰ë©´ (Î²)
          <span class="value-display" id="rotXZ-val">0.00</span>
        </label>
        <input type="range" id="rotXZ" min="0" max="6.28" step="0.01" value="0" />
      </div>

      <div class="control-group">
        <label>
          4D íšŒì „ XW í‰ë©´ (Î³)
          <span class="value-display" id="rotXW-val">0.00</span>
        </label>
        <input type="range" id="rotXW" min="0" max="6.28" step="0.01" value="0" />
      </div>

      <div class="control-group">
        <label>
          4D íšŒì „ YZ í‰ë©´ (Î´)
          <span class="value-display" id="rotYZ-val">0.00</span>
        </label>
        <input type="range" id="rotYZ" min="0" max="6.28" step="0.01" value="0" />
      </div>

      <div class="control-group">
        <label>
          4D íšŒì „ YW í‰ë©´ (Îµ)
          <span class="value-display" id="rotYW-val">0.00</span>
        </label>
        <input type="range" id="rotYW" min="0" max="6.28" step="0.01" value="0" />
      </div>

      <div class="control-group">
        <label>
          4D íšŒì „ ZW í‰ë©´ (Î¶)
          <span class="value-display" id="rotZW-val">0.00</span>
        </label>
        <input type="range" id="rotZW" min="0" max="6.28" step="0.01" value="0" />
      </div>
      <hr style="
            border: 0;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            margin: 25px 0;
          " />

      <div class="control-group">
        <label>
          4Dâ†’3D íˆ¬ì˜ ê±°ë¦¬
          <span class="value-display" id="distance4D-val">2.00</span>
        </label>
        <input type="range" id="distance4D" min="1.5" max="5" step="0.1" value="2" />
      </div>

      <div class="control-group">
        <label>
          3Dâ†’2D íˆ¬ì˜ ê±°ë¦¬
          <span class="value-display" id="distance3D-val">4.00</span>
        </label>
        <input type="range" id="distance3D" min="2" max="8" step="0.1" value="4" />
      </div>

      <div class="control-group" style="text-align: center">
        <button id="toggle4D">16-Cellë¡œ ì „í™˜</button>
        <button id="autoRotate" style="margin-left: 10px">
          ìë™ íšŒì „ ì •ì§€
        </button>
        <button id="reset" style="margin-left: 10px">ì´ˆê¸°í™”</button>
      </div>
    </div>

    <div class="info">
      <h3>ğŸ“ 4D íšŒì „ ë° íˆ¬ì˜ ìˆ˜ì‹</h3>
      <div class="formula">
        x' = P Â· R(Î±,Î²,Î³,Î´,Îµ,Î¶) Â· x
        <br /><br />
        ì—¬ê¸°ì„œ:<br />
        â€¢ x = (x, y, z, w) âˆˆ â„â´ (4D ì¢Œí‘œ)<br />
        â€¢ R(...) = 4D íšŒì „ í–‰ë ¬ (6ê°œ í‰ë©´ íšŒì „ì˜ ê³±)<br />
        â€¢ P: 4Dâ†’3D íˆ¬ì˜ (ì›ê·¼ íˆ¬ì˜)<br />
        â€¢ x' âˆˆ â„Â³ (3D íˆ¬ì˜ ê²°ê³¼)
      </div>

      <p id="structure-info">
        <strong>í…Œì„œë™íŠ¸ êµ¬ì¡°:</strong> 16ê°œ ì •ì , 32ê°œ ê°„ì„ , 24ê°œ ë©´, 8ê°œ ì…€
      </p>
      <p>
        <strong>4D íšŒì „:</strong> 4ì°¨ì›ì—ì„œëŠ” 6ê°œì˜ ë…ë¦½ì ì¸ íšŒì „ í‰ë©´ì´
        ì¡´ì¬í•©ë‹ˆë‹¤ (XY, XZ, XW, YZ, YW, ZW).
      </p>
    </div>
  </div>
  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    // í˜„ì¬ í‘œì‹œ ì¤‘ì¸ 4D ë„í˜•
    let current4DShape = "tesseract"; // "tesseract" ë˜ëŠ” "16cell"
    let vertices = [];
    let edges = [];

    // í…Œì„œë™íŠ¸ ì •ì  ìƒì„± (16ê°œ)
    function generateTesseractVertices() {
      const vertices = [];
      for (let x = -1; x <= 1; x += 2) {
        for (let y = -1; y <= 1; y += 2) {
          for (let z = -1; z <= 1; z += 2) {
            for (let w = -1; w <= 1; w += 2) {
              vertices.push([x, y, z, w]);
            }
          }
        }
      }
      return vertices;
    }

    // 16-Cell ì •ì  ìƒì„± (8ê°œ)
    function generate16CellVertices() {
      return [
        [1, 0, 0, 0],
        [-1, 0, 0, 0],
        [0, 1, 0, 0],
        [0, -1, 0, 0],
        [0, 0, 1, 0],
        [0, 0, -1, 0],
        [0, 0, 0, 1],
        [0, 0, 0, -1],
      ];
    }

    // í…Œì„œë™íŠ¸ ê°„ì„  ìƒì„± (32ê°œ)
    function generateTesseractEdges() {
      const edges = [];
      const vertices = generateTesseractVertices();

      for (let i = 0; i < vertices.length; i++) {
        for (let j = i + 1; j < vertices.length; j++) {
          let diff = 0;
          for (let k = 0; k < 4; k++) {
            if (vertices[i][k] !== vertices[j][k]) diff++;
          }
          if (diff === 1) {
            edges.push([i, j]);
          }
        }
      }
      return edges;
    }

    // 16-Cell ê°„ì„  ìƒì„± (24ê°œ)
    function generate16CellEdges() {
      const edges = [];
      const vertices = generate16CellVertices();

      for (let i = 0; i < vertices.length; i++) {
        for (let j = i + 1; j < vertices.length; j++) {
          let distSq = 0;
          for (let k = 0; k < 4; k++) {
            distSq += Math.pow(vertices[i][k] - vertices[j][k], 2);
          }
          if (Math.abs(distSq - 2) < 0.01) {
            edges.push([i, j]);
          }
        }
      }
      return edges;
    }

    // í˜„ì¬ ë„í˜• ì´ˆê¸°í™”
    function initShape() {
      if (current4DShape === "tesseract") {
        vertices = generateTesseractVertices();
        edges = generateTesseractEdges();
      } else {
        vertices = generate16CellVertices();
        edges = generate16CellEdges();
      }
    }

    initShape();

    // 4D íšŒì „ í–‰ë ¬ (6ê°œ í‰ë©´ ëª¨ë‘ ì ìš©)
    function rotate4D(point, angles) {
      let [x, y, z, w] = point;
      const [aXY, aXZ, aXW, aYZ, aYW, aZW] = angles;

      // 1. XY í‰ë©´ íšŒì „
      let cosXY = Math.cos(aXY),
        sinXY = Math.sin(aXY);
      [x, y] = [x * cosXY - y * sinXY, x * sinXY + y * cosXY];

      // 2. XZ í‰ë©´ íšŒì „
      let cosXZ = Math.cos(aXZ),
        sinXZ = Math.sin(aXZ);
      [x, z] = [x * cosXZ - z * sinXZ, x * sinXZ + z * cosXZ];

      // 3. XW í‰ë©´ íšŒì „
      let cosXW = Math.cos(aXW),
        sinXW = Math.sin(aXW);
      [x, w] = [x * cosXW - w * sinXW, x * sinXW + w * cosXW];

      // 4. YZ í‰ë©´ íšŒì „
      let cosYZ = Math.cos(aYZ),
        sinYZ = Math.sin(aYZ);
      [y, z] = [y * cosYZ - z * sinYZ, y * sinYZ + z * cosYZ];

      // 5. YW í‰ë©´ íšŒì „
      let cosYW = Math.cos(aYW),
        sinYW = Math.sin(aYW);
      [y, w] = [y * cosYW - w * sinYW, y * sinYW + w * cosYW];

      // 6. ZW í‰ë©´ íšŒì „
      let cosZW = Math.cos(aZW),
        sinZW = Math.sin(aZW);
      [z, w] = [z * cosZW - w * sinZW, z * sinZW + w * cosZW];

      return [x, y, z, w];
    }

    // 4Dâ†’3D ì›ê·¼ íˆ¬ì˜
    function project4Dto3D(point, distance) {
      const [x, y, z, w] = point;
      const factor = distance / (distance - w);
      if (distance - w <= 0) return [null, null, null];
      return [x * factor, y * factor, z * factor];
    }

    // 3Dâ†’2D ì›ê·¼ íˆ¬ì˜
    function project3Dto2D(point, distance) {
      const [x, y, z] = point;
      if (x === null) return [null, null];
      const factor = distance / (distance - z);
      if (distance - z <= 0) return [null, null];
      return [x * factor, y * factor];
    }

    // ë Œë”ë§
    function render() {
      ctx.fillStyle = "rgba(0, 0, 0, 0.3)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      const rotXY = parseFloat(document.getElementById("rotXY").value);
      const rotXZ = parseFloat(document.getElementById("rotXZ").value);
      const rotXW = parseFloat(document.getElementById("rotXW").value);
      const rotYZ = parseFloat(document.getElementById("rotYZ").value);
      const rotYW = parseFloat(document.getElementById("rotYW").value);
      const rotZW = parseFloat(document.getElementById("rotZW").value);
      const dist4D = parseFloat(document.getElementById("distance4D").value);
      const dist3D = parseFloat(document.getElementById("distance3D").value);

      document.getElementById("rotXY-val").textContent = rotXY.toFixed(2);
      document.getElementById("rotXZ-val").textContent = rotXZ.toFixed(2);
      document.getElementById("rotXW-val").textContent = rotXW.toFixed(2);
      document.getElementById("rotYZ-val").textContent = rotYZ.toFixed(2);
      document.getElementById("rotYW-val").textContent = rotYW.toFixed(2);
      document.getElementById("rotZW-val").textContent = rotZW.toFixed(2);
      document.getElementById("distance4D-val").textContent =
        dist4D.toFixed(2);
      document.getElementById("distance3D-val").textContent =
        dist3D.toFixed(2);

      const angles = [rotXY, rotXZ, rotXW, rotYZ, rotYW, rotZW];

      const projectedVertices = vertices.map((v) => {
        const rotated = rotate4D(v, angles);
        const proj3D = project4Dto3D(rotated, dist4D);
        const proj2D = project3Dto2D(proj3D, dist3D);
        return proj2D;
      });

      ctx.strokeStyle = "rgba(255, 255, 255, 0.6)";
      ctx.lineWidth = 2;

      edges.forEach(([i, j]) => {
        const [x1, y1] = projectedVertices[i];
        const [x2, y2] = projectedVertices[j];

        if (x1 !== null && x2 !== null) {
          ctx.beginPath();
          ctx.moveTo(
            canvas.width / 2 + x1 * 100,
            canvas.height / 2 - y1 * 100
          );
          ctx.lineTo(
            canvas.width / 2 + x2 * 100,
            canvas.height / 2 - y2 * 100
          );
          ctx.stroke();
        }
      });

      ctx.fillStyle = "rgba(255, 255, 255, 0.9)";
      projectedVertices.forEach(([x, y]) => {
        if (x !== null) {
          ctx.beginPath();
          ctx.arc(
            canvas.width / 2 + x * 100,
            canvas.height / 2 - y * 100,
            4,
            0,
            Math.PI * 2
          );
          ctx.fill();
        }
      });
    }

    document.querySelectorAll('input[type="range"]').forEach((input) => {
      input.addEventListener("input", render);
    });

    // ìë™ íšŒì „
    let autoRotating = true;
    let animationId = null;
    let time = 0;

    function animate() {
      time += 0.01;

      const rotXY = document.getElementById("rotXY");
      const rotXZ = document.getElementById("rotXZ");
      const rotXW = document.getElementById("rotXW");
      const rotYZ = document.getElementById("rotYZ");
      const rotYW = document.getElementById("rotYW");
      const rotZW = document.getElementById("rotZW");

      rotXY.value = Math.sin(time * 0.5) * 3.14 + 3.14;
      rotXZ.value = Math.cos(time * 0.3) * 1.57 + 1.57;
      rotXW.value = time * 0.5;
      rotYZ.value = Math.sin(time * 0.7) * 2;
      rotYW.value = Math.cos(time * 0.4) * 3.14;
      rotZW.value = Math.sin(time * 0.6) * 1.57;

      render();
      if (autoRotating) {
        animationId = requestAnimationFrame(animate);
      }
    }

    document
      .getElementById("autoRotate")
      .addEventListener("click", function () {
        autoRotating = !autoRotating;
        this.textContent = autoRotating ? "ìë™ íšŒì „ ì •ì§€" : "ìë™ íšŒì „ ì‹œì‘";

        if (autoRotating) {
          animate();
        } else {
          if (animationId) {
            cancelAnimationFrame(animationId);
          }
        }
      });

    // ë„í˜• ì „í™˜ ë²„íŠ¼
    document
      .getElementById("toggle4D")
      .addEventListener("click", function () {
        if (current4DShape === "tesseract") {
          current4DShape = "16cell";
          this.textContent = "í…Œì„œë™íŠ¸ë¡œ ì „í™˜";
          document.getElementById("title").textContent =
            "ğŸ”¶ 4D 16-Cell íˆ¬ì˜ (Full Rotation)";
          document.getElementById("subtitle").textContent =
            "4ì°¨ì› ì •16í¬ì²´ì˜ 3ì°¨ì› ê·¸ë¦¼ì (6ê°œ í‰ë©´ íšŒì „)";
          document.getElementById("structure-info").innerHTML =
            "<strong>16-Cell êµ¬ì¡°:</strong> 8ê°œ ì •ì , 24ê°œ ê°„ì„ , 32ê°œ ë©´, 16ê°œ ì…€";
        } else {
          current4DShape = "tesseract";
          this.textContent = "16-Cellë¡œ ì „í™˜";
          document.getElementById("title").textContent =
            "ğŸ”· 4D í…Œì„œë™íŠ¸ íˆ¬ì˜ (Full Rotation)";
          document.getElementById("subtitle").textContent =
            "4ì°¨ì› ì´ˆì…ë°©ì²´ì˜ 3ì°¨ì› ê·¸ë¦¼ì (6ê°œ í‰ë©´ íšŒì „)";
          document.getElementById("structure-info").innerHTML =
            "<strong>í…Œì„œë™íŠ¸ êµ¬ì¡°:</strong> 16ê°œ ì •ì , 32ê°œ ê°„ì„ , 24ê°œ ë©´, 8ê°œ ì…€";
        }
        initShape();
        render();
      });

    document.getElementById("reset").addEventListener("click", function () {
      document.getElementById("rotXY").value = 0;
      document.getElementById("rotXZ").value = 0;
      document.getElementById("rotXW").value = 0;
      document.getElementById("rotYZ").value = 0;
      document.getElementById("rotYW").value = 0;
      document.getElementById("rotZW").value = 0;
      document.getElementById("distance4D").value = 2;
      document.getElementById("distance3D").value = 4;
      render();
    });

    render();
    animate();
  </script>
</body>

</html>