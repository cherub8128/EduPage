# 학생용 활동지: 쌀/모래 눈사태로 배우는 확률분포 & 시뮬레이션(SOC)

> **활동 흐름**  
> 실험 → 관찰 → 단순화(추상화) → 시뮬레이션 제작 → 조건 맞춰 비교 → 수식화 → 추가질문

---

## 0) 이름/조/날짜
- 이름: ____________  조: ____  날짜: ____/____( )  
- 역할(체크): ☐ 장치/안전  ☐ 투입 담당  ☐ 기록 담당  ☐ 촬영/분석 담당  ☐ 시뮬레이션 담당

---

## 1) 학습 목표(오늘 끝나면 할 수 있어야 함)
☐ 눈사태 크기 데이터를 **확률분포(PDF 또는 CCDF)**로 나타낼 수 있다.  
☐ 멱법칙 후보 \(P(s)\propto s^{-\tau}\)를 **로그-로그**로 점검할 수 있다.  
☐ 단순 규칙(격자 모델)로 **시뮬레이션**을 만들고 실험과 비교할 수 있다.  
☐ (심화) \(P(s,L)\sim s^{-\tau}f(s/L^\nu)\) 형태의 **유한크기 스케일링**을 이해한다. :contentReference[oaicite:0]{index=0}

---

## 2) 안전 체크(필수)
☐ 쌀/모래가 바닥에 떨어지면 미끄러울 수 있으니 즉시 정리한다.  
☐ 장치를 경사로 세울 때 넘어지지 않도록 고정한다.  
☐ 촬영용 스마트폰이 떨어지지 않도록 삼각대/고정물을 확인한다.

---

## 3) 실험 설계(Experiment)

### 3.1 장치 설정(그림/설명)
- 장치 길이(대략): ______ cm  
- 채널 폭(대략): ______ mm (쌀이 1~2겹 정도로 흐르는가? ☐예 ☐아니오)  
- 경사각(대략): ______ °  
- 열린 경계(쌀이 떨어져 나가는 쪽): ☐오른쪽 ☐왼쪽

### 3.2 “눈사태 크기” 정의 선택(하나 이상)
**정의 A(권장): 방출량 기반**
- 눈사태 크기 \(S\) = 한 번 투입 후 **밖으로 떨어져 나온 쌀의 질량** \(\Delta m\) (g)
- 또는 \(S=\Delta m / m_{\text{grain}}\) (쌀알 개수로 환산)

**정의 B(심화): 영상 기반**
- \(S\) = 프레임 차분으로 측정한 “움직임 면적”의 시간합 \(S=\sum_t A(t)\)

선택: ☐A ☐B ☐A+B

### 3.3 실험 프로토콜(“느린 구동” 규칙)
- 규칙: **한 번 투입 → 눈사태가 완전히 멈춘 뒤 다음 투입**  
  (이 가정이 모델의 핵심 전제 중 하나임) :contentReference[oaicite:1]{index=1}

- 투입 방식(통일):  
  ☐ 한 톨씩  ☐ 일정 질량(____ g)  ☐ 일정 부피(____ mL)

- 데이터 목표 개수: 최소 \(N=200\) 이벤트(가능하면 500 이상)

---

## 4) 관찰/기록(Observation)

### 4.1 데이터 기록표(방출량 \(\Delta m\) 기준)
> **이벤트 1개 = ‘투입 1회’에 의해 발생한 눈사태 1개**

| 이벤트 k | 투입(톨/질량) | 방출량 \(\Delta m_k\) (g) | 지속시간 \(T_k\) (초, 선택) | 메모(특이사항) |
|---:|---:|---:|---:|---|
| 1 | | | | |
| 2 | | | | |
| 3 | | | | |
| … | | | | |
| N | | | | |

### 4.2 빠른 정성 기록(체크)
- 작은 사건이 대부분이고 가끔 큰 사건이 나온다: ☐예 ☐아니오  
- 큰 사건은 매우 드물지만 “아예 안 나오진 않는다”: ☐예 ☐아니오  
- 장치 각도/쌀 종류를 바꾸면 사건 패턴이 달라진다: ☐예 ☐아니오

---

## 5) 데이터 분석 1: 분포 만들기(Statistics)

> **권장:** 히스토그램(PDF)은 bin에 민감하므로 **CCDF(생존함수)**도 함께 사용.

### 5.1 용어 정리
- 표본: \(S_1,S_2,\dots,S_N\)  
- PDF(확률밀도): \(p(s)\)  
- CCDF(생존함수): \(P(S\ge s)\)

### 5.2 CCDF 만드는 방법(손계산 가능)
1) 데이터를 오름차순 정렬: \(S_{(1)}\le S_{(2)}\le \cdots \le S_{(N)}\)  
2) 각 정렬값 \(S_{(i)}\)에 대해
\[
\widehat{P}(S\ge S_{(i)})=\frac{N-i+1}{N}
\]
3) \(x=S_{(i)}\), \(y=\widehat{P}(S\ge S_{(i)})\)를 로그-로그로 그린다.

### 5.3 멱법칙이면 어떤 모양?
- 만약 \(p(s)\propto s^{-\tau}\)라면,
  \[
  P(S\ge s)\propto s^{-(\tau-1)}
  \]
- 따라서 **CCDF의 로그-로그 기울기**를 \(-\alpha\)로 측정하면  
  \[
  \tau=\alpha+1
  \]
(이 관계는 적분으로 증명 가능: 보고서 “증명” 섹션에 작성)

---

## 6) 데이터 분석 2: 멱지수 \(\tau\) 추정(수학 활동)

### 6.1 방법 A: 로그-로그 직선 회귀(간단)
1) CCDF에서 “직선처럼 보이는 구간” \([s_{\min}, s_{\max}]\)를 선택  
2) 그 구간 점들로 선형회귀:  
   \[
   \log y = a \log x + b
   \]
   여기서 \(a\approx-(\tau-1)\)

- 선택한 구간: \(s_{\min}=\) ________, \(s_{\max}=\) ________  
- 회귀 기울기 \(a=\) ________  
- 추정 \(\tau=1-a=\) ________

> 주의: 구간 선택에 따라 \(\tau\)가 달라질 수 있다(표본 수/컷오프 영향).

### 6.2 방법 B(심화): 최대우도추정(MLE) 유도 & 계산(미적분)
연속형 근사에서 \(s\ge s_{\min}\)에 대해
\[
p(s|\tau)=(\tau-1)s_{\min}^{\tau-1}s^{-\tau}
\]
(정규화로 얻음)

**결과(유도 과제):**
\[
\widehat{\tau}
=1+\frac{n}{\sum_{i=1}^n \ln\left(\frac{s_i}{s_{\min}}\right)}
\]

- 여기서 \(n\)은 \(s_i\ge s_{\min}\)인 데이터 개수  
- 계산:
  - \(s_{\min}=\) ________
  - \(n=\) ________
  - \(\sum \ln(s_i/s_{\min})=\) ________
  - \(\widehat{\tau}=\) ________

**유도 과제(보고서에 필수):**
- \(\ln\mathcal{L}(\tau)\)를 쓰고 \(\frac{d}{d\tau}\ln\mathcal{L}=0\)을 풀어 위 식을 얻어라.

---

## 7) 추상화: 1차원 “쌀더미” 모델(Abstraction)

### 7.1 상태 변수
- 격자 길이 \(L\)
- 각 칸 높이 \(h(i)\), \(i=1,\dots,L\)
- 국소 기울기 \(\Delta h(i)=h(i)-h(i+1)\)

### 7.2 규칙(핵심)
- 매 단계(투입): \(i=1\)에 1톨 추가 :contentReference[oaicite:2]{index=2}  
- 임계 기울기 \(S_1<S_2\) :contentReference[oaicite:3]{index=3}  
  - \(\Delta h(i)>S_1\): 확률 \(p\)로 한 톨이 \(i\to i+1\) 이동  
  - \(\Delta h(i)>S_2\): 무조건 이동  
- 오른쪽 끝 \(i=L\)에서 이동하면 시스템 밖으로 방출(open boundary) :contentReference[oaicite:4]{index=4}  
- 확률 \(p\)는 마찰/메타안정성을 대표하는 파라미터로 해석 :contentReference[oaicite:5]{index=5}

---

## 8) 시뮬레이션 제작(Simulation)

### 8.1 파라미터 선택(출발값)
- 격자 길이 \(L=\) ________ (예: 50, 100, 200)
- \(S_1=\) ________ , \(S_2=\) ________  
- \(p=\) ________  
- 총 투입 횟수 \(N=\) ________ (최소 10,000 권장)

> 참고 예시(논문 그림 설명에 등장): \(S_1=1,S_2=4,p=0.6\) :contentReference[oaicite:6]{index=6}

### 8.2 산출할 데이터(실험과 대응)
- 눈사태 크기(전복 수): \(s_k\)  
- 방출량(경계 밖으로 나간 톨 수): \(m_k\)  
- 지속시간(스텝 수): \(T_k\)

### 8.3 구현 체크리스트
☐ “투입 1회”마다 눈사태가 완전히 끝날 때까지 완화 루프를 돌린다 :contentReference[oaicite:7]{index=7}  
☐ 한 번의 이동(전복)마다 \(s\)를 +1 한다 :contentReference[oaicite:8]{index=8}  
☐ \(i=L\)에서 이동하면 \(m\)을 +1 한다(방출) :contentReference[oaicite:9]{index=9}  
☐ \(s,m,T\)를 이벤트 단위로 기록한다

---

## 9) 비교(Validation): 실험 vs 시뮬레이션

### 9.1 비교 항목(필수 3종)
1) **CCDF log-log 그래프**가 비슷한가? (직선 구간 존재 여부)  
2) \(\tau\) 추정값이 비슷한가? (회귀 vs MLE)  
3) 큰 사건에서 **컷오프 위치**가 \(L\)에 따라 이동하는가?

### 9.2 유한크기 스케일링(심화)
모델은
\[
P(s,L)\sim s^{-\tau} f\!\left(\frac{s}{L^\nu}\right)
\]
형태를 제시한다. :contentReference[oaicite:10]{index=10}  

**데이터 붕괴 과제:**
- \(x=s/L^\nu\), \(y=s^\tau P(s,L)\)로 축을 바꿔 그래프가 포개지는지 확인

### 9.3 (심화 증명 과제) \(\tau\)–\(\nu\) 관계
논문은 \(\langle s\rangle=L\)을 이용해
\[
\tau = 2-\frac{1}{\nu}
\]
를 제시한다. :contentReference[oaicite:11]{index=11}  

- 과제: 스케일링 가정에서 \(\langle s\rangle \propto L^{\nu(2-\tau)}\)를 유도하고,
  \(\langle s\rangle\propto L\)일 때 위 관계를 얻어라.

---

## 10) 보고서 작성 가이드(제출물 체크)
☐ 실험 장치 사진/설명(길이, 각도, 재료)  
☐ 눈사태 정의(A/B)와 그 이유  
☐ 데이터 \(N\)개, 기록표 일부 포함  
☐ CCDF log-log 그래프 + 직선 구간 선택 근거  
☐ \(\tau\) 추정(회귀 + MLE 중 1개 이상)  
☐ 시뮬레이션 규칙 설명 + 파라미터( \(L,S_1,S_2,p\) )  
☐ 실험 vs 시뮬 CCDF 비교(같은 점/다른 점)  
☐ (심화) 데이터 붕괴 또는 \(\tau=2-1/\nu\) 증명

---

## 11) 추가 질문(탐구 확장)
1) \(p\)를 0.2, 0.4, 0.6, 0.8로 바꾸면 분포 꼬리가 어떻게 변하는가?  
2) 같은 \(p\)에서 \(L\)을 늘리면 큰 사건이 더 자주 나오나? 컷오프는 어디로 이동하나?  
3) 실험(쌀 종류/각도)을 바꾸면 시뮬레이션의 어떤 파라미터가 변한 것으로 해석할 수 있나?  
4) 왜 모델이 실험 지수와 다를 수 있는가? (보편성 계가 다를 가능성) :contentReference[oaicite:12]{index=12}  
5) (심화) 관성이 커지는 조건에서 SOC가 무너질 수 있다는 논의가 있다. 실험에서 “관성”을 키우는 방법은? :contentReference[oaicite:13]{index=13}

---

## 12) 부록: 빠른 계산/메모 공간
- \(s_{\min}\) 선택 이유: __________________________________________  
- 직선 구간 판단 근거: __________________________________________  
- 오차/한계(표본수, 측정오차, bin 민감도 등): _____________________

---
