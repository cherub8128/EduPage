<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì…”í‹€ì½• vs ììœ ë‚™í•˜ â€” ë°ì´í„°ë¡œ ê²€ì¦í•˜ëŠ” ìˆ˜í•™ì  ëª¨ë¸ë§ ìˆ˜ì—…</title>
  <meta name="description" content="Trackerë¡œ ì¸¡ì •í•œ ë°ì´í„°(ìœ„ì¹˜Â·ì†ë„Â·ê°€ì†ë„)ë¥¼ ë°”íƒ•ìœ¼ë¡œ ììœ ë‚™í•˜(í¬ë¬¼ì„ /ì´ì°¨í•¨ìˆ˜)ì™€ ì…”í‹€ì½•(ê³µê¸°ì €í•­ í¬í•¨) ìš´ë™ì„ ë¹„êµÂ·ëª¨ë¸ë§Â·ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” í”„ë¡œì íŠ¸í˜• ìˆ˜ì—… ì›¹í˜ì´ì§€." />

  <!-- Fonts (system-first) -->
  <style>
    :root{
      --bg: #0b1020;
      --bg2:#0a1635;
      --card:#0f1b3a;
      --card2:#0c1734;
      --text:#e7ecff;
      --muted:#b9c3ff;
      --soft:#93a1ff;
      --line: rgba(255,255,255,.10);
      --line2: rgba(255,255,255,.14);
      --accent:#7c5cff;
      --accent2:#00d4ff;
      --good:#4ade80;
      --warn:#fbbf24;
      --bad:#fb7185;
      --shadow: 0 20px 60px rgba(0,0,0,.38);
      --radius: 18px;
      --radius2: 26px;
      --max: 1160px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", Arial, sans-serif;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f7fb;
        --bg2:#eef1ff;
        --card:#ffffff;
        --card2:#ffffff;
        --text:#0f172a;
        --muted:#475569;
        --soft:#64748b;
        --line: rgba(2,6,23,.10);
        --line2: rgba(2,6,23,.14);
        --shadow: 0 18px 50px rgba(2,6,23,.10);
      }
    }

    [data-theme="dark"]{
      --bg: #0b1020;
      --bg2:#0a1635;
      --card:#0f1b3a;
      --card2:#0c1734;
      --text:#e7ecff;
      --muted:#b9c3ff;
      --soft:#93a1ff;
      --line: rgba(255,255,255,.10);
      --line2: rgba(255,255,255,.14);
      --shadow: 0 20px 60px rgba(0,0,0,.38);
    }
    [data-theme="light"]{
      --bg:#f6f7fb;
      --bg2:#eef1ff;
      --card:#ffffff;
      --card2:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --soft:#64748b;
      --line: rgba(2,6,23,.10);
      --line2: rgba(2,6,23,.14);
      --shadow: 0 18px 50px rgba(2,6,23,.10);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      background:
        radial-gradient(1200px 700px at 20% -10%, color-mix(in srgb, var(--accent) 25%, transparent), transparent 60%),
        radial-gradient(1000px 700px at 90% 10%, color-mix(in srgb, var(--accent2) 18%, transparent), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      color: var(--text);
      letter-spacing: -0.2px;
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    a.link{color: color-mix(in srgb, var(--accent2) 70%, var(--text)); text-decoration: underline; text-underline-offset: 3px}

    .wrap{max-width:var(--max); margin:0 auto; padding:28px 22px 80px}

    /* Top nav */
    .topbar{
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: blur(10px);
      background: color-mix(in srgb, var(--bg) 70%, transparent);
      border-bottom: 1px solid var(--line);
    }
    .topbar-inner{max-width:var(--max); margin:0 auto; padding:14px 22px; display:flex; gap:14px; align-items:center; justify-content:space-between}
    .brand{display:flex; align-items:center; gap:10px}
    .logo{
      width:38px; height:38px; border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: var(--shadow);
      display:grid; place-items:center; font-weight:800; color:white
    }
    .brand h1{font-size:14px; margin:0; line-height:1.2}
    .brand p{margin:0; font-size:12px; color:var(--muted)}

    .nav{
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center; justify-content:flex-end;
    }
    .chip{
      padding:8px 10px; border-radius: 999px;
      border: 1px solid var(--line);
      background: color-mix(in srgb, var(--card) 55%, transparent);
      font-size: 12px;
      color: var(--muted);
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .chip:hover{transform: translateY(-1px); border-color: var(--line2)}

    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:10px 12px; border-radius: 12px;
      border: 1px solid var(--line);
      background: color-mix(in srgb, var(--card) 78%, transparent);
      color: var(--text);
      font-size: 13px;
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
      user-select:none;
    }
    .btn:hover{transform: translateY(-1px); border-color: var(--line2)}
    .btn.primary{
      border: 1px solid color-mix(in srgb, var(--accent) 65%, var(--line));
      background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 85%, #0000), color-mix(in srgb, var(--accent2) 65%, #0000));
      color: white;
      box-shadow: var(--shadow);
    }
    .btn.ghost{background: transparent}
    .btn.small{padding:8px 10px; border-radius: 10px; font-size:12px}

    /* Hero */
    .hero{
      margin-top: 28px;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
      align-items: stretch;
    }
    @media (max-width: 980px){
      .hero{grid-template-columns: 1fr;}
    }

    .card{
      background: linear-gradient(180deg, color-mix(in srgb, var(--card) 92%, transparent), color-mix(in srgb, var(--card2) 92%, transparent));
      border: 1px solid var(--line);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card.pad{padding: 22px}
    .hero h2{margin:0 0 10px; font-size: 28px; letter-spacing: -0.8px}
    .hero p{margin:0 0 16px; color: var(--muted); line-height:1.55}

    .kpi{
      display:grid; grid-template-columns: repeat(3,1fr); gap:10px;
      margin-top: 16px;
    }
    @media (max-width: 560px){
      .kpi{grid-template-columns: 1fr;}
    }
    .kpi .tile{
      padding: 14px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: color-mix(in srgb, var(--card) 65%, transparent);
    }
    .tile .num{font-weight: 800; font-size: 16px}
    .tile .lab{font-size: 12px; color: var(--muted); margin-top: 4px}

    .hero-actions{display:flex; gap:10px; flex-wrap:wrap; margin-top: 14px}

    /* Feature grid */
    .grid{
      margin-top: 18px;
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }
    .span-6{grid-column: span 6}
    .span-4{grid-column: span 4}
    .span-8{grid-column: span 8}
    .span-12{grid-column: span 12}
    @media (max-width: 980px){
      .span-6,.span-4,.span-8{grid-column: span 12}
    }

    .mini{
      padding: 16px;
      border-radius: var(--radius);
      border: 1px solid var(--line);
      background: color-mix(in srgb, var(--card) 58%, transparent);
      position: relative;
      overflow:hidden;
    }
    .mini h3{margin:0 0 8px; font-size: 15px}
    .mini p{margin:0; color: var(--muted); font-size: 13px; line-height:1.55}
    .mini .tag{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius: 999px;
      border: 1px solid var(--line);
      background: color-mix(in srgb, var(--card) 75%, transparent);
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 10px;
    }

    /* Sections */
    section{scroll-margin-top: 78px;}
    .section-head{display:flex; align-items:flex-end; justify-content:space-between; gap:14px; margin: 34px 0 12px}
    .section-head h2{margin:0; font-size: 20px}
    .section-head p{margin:0; color: var(--muted); font-size: 13px}

    /* Accordions */
    details{
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: color-mix(in srgb, var(--card) 62%, transparent);
      overflow:hidden;
    }
    details + details{margin-top:10px}
    summary{
      list-style:none;
      cursor:pointer;
      padding: 14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-weight: 700;
    }
    summary::-webkit-details-marker{display:none}
    .details-body{padding: 0 16px 16px; color: var(--muted); line-height:1.65; font-size: 13px}

    /* Two-column content */
    .cols{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
    @media (max-width:980px){.cols{grid-template-columns:1fr}}

    /* Checklists */
    .checklist{display:flex; flex-direction:column; gap:10px}
    .check{
      display:flex; gap:10px; align-items:flex-start;
      padding: 10px 12px;
      border: 1px solid var(--line);
      border-radius: 14px;
      background: color-mix(in srgb, var(--card) 70%, transparent);
    }
    .check input{margin-top: 2px}
    .check b{display:block; color: var(--text)}
    .check small{display:block; color: var(--muted); margin-top: 2px; line-height:1.45}

    /* Tables */
    table{width:100%; border-collapse: collapse; overflow:hidden; border-radius: 14px; border:1px solid var(--line)}
    th,td{padding: 10px 10px; border-bottom: 1px solid var(--line); text-align:left; font-size: 13px}
    th{font-size: 12px; color: var(--muted); background: color-mix(in srgb, var(--card) 75%, transparent)}
    tr:last-child td{border-bottom:0}

    /* Tabs */
    .tabs{display:flex; flex-wrap:wrap; gap:8px; margin: 10px 0 14px}
    .tab{padding:8px 10px; border-radius: 999px; border:1px solid var(--line); background: color-mix(in srgb, var(--card) 68%, transparent); color: var(--muted); cursor:pointer; font-size:12px}
    .tab[aria-selected="true"]{color: var(--text); border-color: color-mix(in srgb, var(--accent) 60%, var(--line)); background: color-mix(in srgb, var(--accent) 18%, var(--card))}

    .panel{display:none}
    .panel.active{display:block}

    /* Inputs */
    .form{display:grid; grid-template-columns: repeat(12,1fr); gap:10px; align-items:end}
    .field{grid-column: span 3}
    .field.wide{grid-column: span 6}
    .field.full{grid-column: span 12}
    @media (max-width:980px){.field,.field.wide{grid-column: span 12}}

    label{display:block; font-size:12px; color: var(--muted); margin:0 0 6px}
    input[type="number"], input[type="text"], input[type="file"], select, textarea{
      width:100%;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: color-mix(in srgb, var(--card) 72%, transparent);
      color: var(--text);
      outline:none;
    }
    textarea{min-height:92px; resize: vertical}

    .hint{font-size: 12px; color: var(--muted); margin-top: 8px; line-height:1.5}

    /* Charts */
    .chartBox{border: 1px solid var(--line); border-radius: var(--radius); background: color-mix(in srgb, var(--card) 68%, transparent); padding: 14px}
    canvas{width:100%; height: 280px}

    /* Footer */
    footer{margin-top: 34px; color: var(--muted); font-size: 12px; line-height:1.55}

    /* Teacher/Student view */
    .teacher-only{display:none}
    [data-mode="teacher"] .teacher-only{display:block}
    [data-mode="teacher"] .student-only{display:none}

    /* Print */
    @media print{
      .topbar, .hero-actions, .nav, .btn, .chip, .tabs, .teacher-toggle, .download-row{display:none !important}
      body{background:#fff}
      .card{box-shadow:none}
      .wrap{padding:0}
      a{color:#000; text-decoration:none}
    }
  </style>

  <!-- KaTeX for clean math rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>

  <!-- Chart.js + CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>

<body data-theme="auto" data-mode="student">
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand" aria-label="ë¸Œëœë“œ">
        <div class="logo" aria-hidden="true">âˆ«</div>
        <div>
          <h1>ì…”í‹€ì½• vs ììœ ë‚™í•˜</h1>
          <p>Tracker ë°ì´í„°ë¡œ ê²€ì¦í•˜ëŠ” ìˆ˜í•™ì  ëª¨ë¸ë§ í”„ë¡œì íŠ¸</p>
        </div>
      </div>
      <nav class="nav" aria-label="ì£¼ìš” ì„¹ì…˜">
        <a class="chip" href="#overview">ê°œìš”</a>
        <a class="chip" href="#design">ì‹¤í—˜ ì„¤ê³„</a>
        <a class="chip" href="#tracker">Tracker</a>
        <a class="chip" href="#model">ëª¨ë¸ë§</a>
        <a class="chip" href="#sim">ì‹œë®¬ë ˆì´ì…˜</a>
        <a class="chip" href="#extensions">í™•ì¥</a>
        <button class="btn small" id="themeBtn" type="button" aria-label="í…Œë§ˆ ì „í™˜">ğŸŒ“ í…Œë§ˆ</button>
        <button class="btn small teacher-toggle" id="modeBtn" type="button" aria-label="êµì‚¬ìš© ë³´ê¸° ì „í™˜">ğŸ“ êµì‚¬ìš©</button>
        <button class="btn small" type="button" onclick="window.print()">ğŸ–¨ï¸ ì¸ì‡„</button>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <div class="hero" id="overview">
      <div class="card pad">
        <h2>í¬ë¬¼ì„ ìœ¼ë¡œ ì‹œì‘í•´ì„œ, ì…”í‹€ì½•ì—ì„œ ëª¨ë¸ì„ â€˜ì—…ê·¸ë ˆì´ë“œâ€™í•œë‹¤</h2>
        <p>
          ì¼ë°˜ ë¬¼ì²´ì˜ <b>ììœ ë‚™í•˜</b>ë¥¼ ì´¬ì˜í•´ \(y(t), v(t), a(t)\)ë¥¼ í™•ì¸í•˜ê³ , ê°™ì€ ë°©ì‹ìœ¼ë¡œ <b>ì…”í‹€ì½•</b>ì„ ì´¬ì˜í•´ ë¹„êµí•©ë‹ˆë‹¤.
          ë°ì´í„°ê°€ â€œí¬ë¬¼ì„ /ì´ì°¨í•¨ìˆ˜â€ì—ì„œ ë²—ì–´ë‚˜ëŠ” ì§€ì ì„ ë°œê²¬í•˜ë©´, ê³µê¸°ì €í•­ì„ í¬í•¨í•œ ëª¨ë¸ì„ ì„¸ìš°ê³  ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ê²€ì¦í•©ë‹ˆë‹¤.
        </p>

        <div class="hero-actions">
          <a class="btn primary" href="#quickstart">ğŸš€ ë¹ ë¥¸ ì‹œì‘</a>
          <a class="btn" href="#data">ğŸ“ˆ CSV ë¶„ì„(Tracker)</a>
          <a class="btn" href="#sim">ğŸ§ª ì‹œë®¬ë ˆì´í„°</a>
        </div>

        <div class="kpi" aria-label="í•µì‹¬ í•™ìŠµ í¬ì¸íŠ¸">
          <div class="tile">
            <div class="num">ê´€ì¸¡ â†’ í•¨ìˆ˜</div>
            <div class="lab">ê·¸ë˜í”„ë¡œ ìš´ë™ì„ í•´ì„</div>
          </div>
          <div class="tile">
            <div class="num">ê°€ì • â†’ ëª¨ë¸</div>
            <div class="lab">ë‹¨ìˆœí™”ëœ ì¡°ê±´(ê°€ì„¤) ì„¸ìš°ê¸°</div>
          </div>
          <div class="tile">
            <div class="num">ê²€ì¦ â†’ ì˜¤ì°¨</div>
            <div class="lab">ì”ì°¨Â·ì˜¤ì°¨ ì›ì¸ ë¶„ì„</div>
          </div>
        </div>

        <p class="hint" style="margin-top:14px">
          ì°¸ê³  ë…¼ë¬¸(ìˆ˜ì§ë‚™í•˜ ì‹¤í—˜ ê¸°ë°˜): <span style="font-family:var(--mono)">Peastrel, Lynch, Armenti Jr. (1980), AJP, doi:10.1119/1.12373</span>
        </p>
      </div>

      <div class="card pad">
        <h3 style="margin:0 0 10px">ì˜¤ëŠ˜ì˜ â€˜ì‚¬ìš©ìâ€™ëŠ” í•™ìƒ</h3>
        <p style="margin:0 0 14px; color:var(--muted); line-height:1.6">
          ì´ í˜ì´ì§€ëŠ” í•™ìƒì´ <b>í˜¼ì ì½ì–´ë„ ê¸¸ì„ ìƒì§€ ì•Šê²Œ</b> êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
          ì²´í¬ë¦¬ìŠ¤íŠ¸ëŠ” ìë™ ì €ì¥ë˜ê³ (ë¸Œë¼ìš°ì € LocalStorage), CSVë¥¼ ì—…ë¡œë“œí•˜ë©´ ê·¸ë˜í”„/ì¶”ì •ê°’ì´ ë°”ë¡œ ë‚˜ì˜µë‹ˆë‹¤.
        </p>

        <div class="mini" style="margin-bottom:12px">
          <div class="tag">ğŸ¯ ì‚°ì¶œë¬¼</div>
          <p><b>íƒêµ¬ ë³´ê³ ì„œ</b>: ì‹¤í—˜ ì„¤ê³„(ë³€ì¸), ë°ì´í„° ê·¸ë˜í”„, ëª¨ë¸ ìœ ë„, ì‹œë®¬ë ˆì´ì…˜, ì˜¤ì°¨Â·í™•ì¥ íƒêµ¬</p>
        </div>

        <div class="mini teacher-only">
          <div class="tag">ğŸ§‘â€ğŸ« êµì‚¬ìš© íŒ</div>
          <p>
            â€œì •ë‹µ ë§íˆê¸°â€ë³´ë‹¤ <b>ëª¨ë¸ì´ ì™œ/ì–´ë””ì„œ í‹€ë¦¬ëŠ”ì§€</b>ë¥¼ ì„¤ë“ë ¥ ìˆê²Œ ì“°ê²Œ í•˜ë©´ í”„ë¡œì íŠ¸ í€„ë¦¬í‹°ê°€ í™• ë›°ì–´ìš”.
          </p>
        </div>

        <div class="mini student-only">
          <div class="tag">ğŸ§‘â€ğŸ”¬ í•™ìƒìš© ê°€ì´ë“œ</div>
          <p>
            ì‹¤í—˜ì´ ì™„ë²½í•  í•„ìš”ëŠ” ì—†ì–´ìš”. ëŒ€ì‹  <b>ì™œ ì–´ê¸‹ë‚¬ëŠ”ì§€</b>ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë§í•  ìˆ˜ ìˆìœ¼ë©´ ì ìˆ˜ëŠ” ì˜¬ë¼ê°‘ë‹ˆë‹¤.
          </p>
        </div>
      </div>
    </div>

    <section id="quickstart">
      <div class="section-head">
        <div>
          <h2>ë¹ ë¥¸ ì‹œì‘</h2>
          <p>ë°”ë¡œ ìˆ˜ì—… ìš´ì˜ ê°€ëŠ¥í•œ 4ë‹¨ê³„ ë£¨íŠ¸</p>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <button class="btn" id="resetAll" type="button">â™»ï¸ ì§„í–‰ìƒíƒœ ì´ˆê¸°í™”</button>
          <a class="btn" href="#design">ğŸ§© ì„¤ê³„ë¡œ ì´ë™</a>
        </div>
      </div>

      <div class="grid">
        <div class="mini span-4">
          <div class="tag">1</div>
          <h3>ì´¬ì˜</h3>
          <p>ììœ ë‚™í•˜(ì‘ì€ êµ¬) + ì…”í‹€ì½•ì„ ê°™ì€ ë†’ì´/ê°™ì€ ì¥ì†Œì—ì„œ ì´¬ì˜</p>
        </div>
        <div class="mini span-4">
          <div class="tag">2</div>
          <h3>Tracker</h3>
          <p>\(y(t)\) ì¶”ì  â†’ \(v(t), a(t)\) ê³„ì‚° â†’ ê·¸ë˜í”„ ë¹„êµ</p>
        </div>
        <div class="mini span-4">
          <div class="tag">3</div>
          <h3>ëª¨ë¸ë§</h3>
          <p>ììœ ë‚™í•˜ëŠ” ì´ì°¨í•¨ìˆ˜, ì…”í‹€ì½•ì€ \(a=g-kv^2\) ê°€ì„¤ë¡œ ì—…ê·¸ë ˆì´ë“œ</p>
        </div>
        <div class="mini span-6">
          <div class="tag">4</div>
          <h3>ì‹œë®¬ë ˆì´ì…˜ & ê²€ì¦</h3>
          <p>ìˆ˜ì¹˜ ì ë¶„ìœ¼ë¡œ ê¶¤ì ì„ ì¬í˜„í•˜ê³ , ì‹¤ì¸¡ê³¼ ì”ì°¨ë¥¼ ë¹„êµí•´ ì˜¤ì°¨ ì›ì¸ì„ ì •ë¦¬</p>
        </div>
        <div class="mini span-6">
          <div class="tag">ğŸ§ </div>
          <h3>í™•ì¥</h3>
          <p>ë³€ì¸ ì¶”ê°€(ì…”í‹€ ì¢…ë¥˜/ì§ˆëŸ‰/íšŒì „/ë†’ì´) ë˜ëŠ” â€œë¬¸ì œ ë°”ê¿”ìƒê°í•˜ê¸°(ì—­ë¬¸ì œ/ìµœì í™”)â€ë¡œ íƒêµ¬ í™•ì¥</p>
        </div>
      </div>
    </section>

    <section id="design">
      <div class="section-head">
        <div>
          <h2>1) ì‹¤í—˜ ì„¤ê³„ (ê³¼í•™ ì‹¤í—˜ í‘œì¤€)</h2>
          <p>ì¡°ì‘Â·ì¢…ì†Â·í†µì œ ë³€ì¸ì„ ëª…í™•íˆ ì •ì˜í•˜ê³ , â€œê°™ì€ ì¡°ê±´ ë¹„êµâ€ë¥¼ ë§Œë“ ë‹¤</p>
        </div>
      </div>

      <div class="cols">
        <div class="card pad">
          <h3 style="margin:0 0 12px">ì—°êµ¬ë¬¸ì œ í…œí”Œë¦¿</h3>
          <details open>
            <summary>RQ1. ììœ ë‚™í•˜ì—ì„œ \(a\)ëŠ” ì •ë§ ì¼ì •í•œê°€?</summary>
            <div class="details-body">Trackerë¡œ \(y(t)\)ë¥¼ ì¸¡ì •í•˜ê³ , \(y\)ë¥¼ ì´ì°¨í•¨ìˆ˜ë¡œ í”¼íŒ…í•´ \(g\)ë¥¼ ì¶”ì •í•œë‹¤.</div>
          </details>
          <details>
            <summary>RQ2. ì…”í‹€ì½•ì€ ì¢…ë‹¨ì†ë„ì— ê°€ê¹Œì›Œì§€ëŠ”ê°€?</summary>
            <div class="details-body">\(v(t)\) ê·¸ë˜í”„ê°€ â€˜í¬í™”â€™ë˜ëŠ”ì§€ í™•ì¸í•˜ê³ , \(v_T\)ë¥¼ ë°ì´í„°ë¡œ ì¶”ì •í•œë‹¤.</div>
          </details>
          <details>
            <summary>RQ3. ì €í•­ì€ \(v\)ì— ë¹„ë¡€? \(v^2\)ì— ë¹„ë¡€?</summary>
            <div class="details-body">ê°€ì„¤ \(a=g-kv^2\)ê°€ ë§ë‹¤ë©´ \(a\) vs \(v^2\) ì‚°ì ë„ê°€ ì§ì„ ì— ê°€ê¹ë‹¤.</div>
          </details>

          <div class="hint teacher-only">êµì‚¬ìš©: ì—¬ê¸°ì„œ â€œì •ë‹µâ€ì„ ë¯¸ë¦¬ ë§í•˜ì§€ ë§ê³ , í•™ìƒë“¤ì´ ë°ì´í„°ë¡œ â€˜ëª¨ë¸ ê²½ìŸâ€™ì„ í•˜ê²Œ ë‘ë©´ ëª°ì…ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.</div>
        </div>

        <div class="card pad">
          <h3 style="margin:0 0 12px">ë³€ì¸ ì„¤ê³„ ë¹Œë”(ìë™ ì €ì¥)</h3>
          <p style="margin:0 0 12px; color:var(--muted); line-height:1.6">
            ì•„ë˜ í‘œë¥¼ ì±„ìš°ê³  <b>CSVë¡œ ë‚´ë³´ë‚´ê¸°</b>í•˜ë©´ ë³´ê³ ì„œì— ë°”ë¡œ ë¶™ì¼ ìˆ˜ ìˆì–´ìš”.
          </p>

          <div class="form">
            <div class="field wide">
              <label>ì¶”ê°€í•  ë³€ì¸(ë¬¸ì¥)</label>
              <input id="varText" type="text" placeholder="ì˜ˆ: ë‚™í•˜ ë†’ì´ H (1.5 më¡œ ê³ ì •)" />
            </div>
            <div class="field">
              <label>ì¢…ë¥˜</label>
              <select id="varType">
                <option value="ì¡°ì‘ë³€ì¸">ì¡°ì‘ë³€ì¸(ë…ë¦½)</option>
                <option value="ì¢…ì†ë³€ì¸">ì¢…ì†ë³€ì¸</option>
                <option value="í†µì œë³€ì¸" selected>í†µì œë³€ì¸</option>
              </select>
            </div>
            <div class="field">
              <button class="btn primary" type="button" id="addVar">â• ì¶”ê°€</button>
            </div>
          </div>

          <div style="margin-top:12px" class="chartBox">
            <table aria-label="ë³€ì¸ í‘œ" id="varTable">
              <thead>
                <tr>
                  <th style="width:110px">ì¢…ë¥˜</th>
                  <th>ë‚´ìš©</th>
                  <th style="width:90px">ì‘ì—…</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div class="download-row" style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px">
              <button class="btn" type="button" id="exportVars">â¬‡ï¸ CSV ë‚´ë³´ë‚´ê¸°</button>
              <button class="btn ghost" type="button" id="seedVars">âœ¨ ì˜ˆì‹œ ì±„ìš°ê¸°</button>
            </div>
          </div>

          <p class="hint">íŒ: ì…”í‹€ì½• vs ì¼ë°˜ ë¬¼ì²´ ë¹„êµëŠ” â€œê°™ì€ ì¡°ê±´ì—ì„œ ë¬¼ì²´ë§Œ ë°”ê¾¼ë‹¤â€ê°€ í•µì‹¬ì…ë‹ˆë‹¤.</p>
        </div>
      </div>
    </section>

    <section id="tracker">
      <div class="section-head">
        <div>
          <h2>2) ì´¬ì˜ & Tracker ì›Œí¬í”Œë¡œ</h2>
          <p>ì •í™•ë„ëŠ” â€˜ìˆ˜í•™â€™ë³´ë‹¤ â€˜ì¹´ë©”ë¼ ì„¸íŒ…â€™ì—ì„œ ê²°ì •ëœë‹¤</p>
        </div>
      </div>

      <div class="grid">
        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">ì´¬ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸(ìë™ ì €ì¥)</h3>
          <div class="checklist" id="shootChecks"></div>
          <p class="hint">íŒ: ì¤„ì(ìŠ¤ì¼€ì¼)ëŠ” ë°˜ë“œì‹œ <b>ë‚™í•˜ í‰ë©´ê³¼ ê°™ì€ í‰ë©´</b>ì— ë¶™ì´ê¸°(íŒ¨ëŸ´ëŸ­ìŠ¤ ë°©ì§€).</p>
        </div>

        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">Tracker ì²´í¬ë¦¬ìŠ¤íŠ¸(ìë™ ì €ì¥)</h3>
          <div class="checklist" id="trackerChecks"></div>
          <details style="margin-top:12px">
            <summary>ê°€ì†ë„ \(a(t)\)ê°€ í”ë“¤ë¦¬ëŠ” ì´ìœ </summary>
            <div class="details-body">
              ì†ë„Â·ê°€ì†ë„ëŠ” â€œë¯¸ë¶„â€ì´ë¼ ì¡ìŒì— ë¯¼ê°í•©ë‹ˆë‹¤. \(y(t)\)ë¥¼ ë¨¼ì € í”¼íŒ…í•œ ë’¤ ë¯¸ë¶„í•˜ê±°ë‚˜, ì´ë™í‰ê· ìœ¼ë¡œ ì™„í™”í•˜ë©´ ê·¸ë˜í”„ê°€ ì•ˆì •ë©ë‹ˆë‹¤.
            </div>
          </details>
        </div>

        <div class="card pad span-12">
          <h3 style="margin:0 0 10px">ìˆ˜ì—… ìš´ì˜(ì°¨ì‹œ íƒ­)</h3>
          <div class="tabs" role="tablist" aria-label="ì°¨ì‹œ ì„ íƒ">
            <button class="tab" role="tab" aria-selected="true" data-tab="d1">1ì°¨ì‹œ</button>
            <button class="tab" role="tab" aria-selected="false" data-tab="d2">2ì°¨ì‹œ</button>
            <button class="tab" role="tab" aria-selected="false" data-tab="d3">3ì°¨ì‹œ</button>
            <button class="tab" role="tab" aria-selected="false" data-tab="d4">4ì°¨ì‹œ</button>
            <button class="tab" role="tab" aria-selected="false" data-tab="d5">5ì°¨ì‹œ(ì„ íƒ)</button>
          </div>

          <div class="panel active" id="d1">
            <div class="cols">
              <div class="mini">
                <div class="tag">ëª©í‘œ</div>
                <p>ì‹¤í—˜ ì„¤ê³„(ë³€ì¸) + ì´¬ì˜ ì¡°ê±´ í†µì¼ + Tracker ê¸°ë³¸ ì¡°ì‘</p>
              </div>
              <div class="mini">
                <div class="tag">í™œë™</div>
                <p>ììœ ë‚™í•˜ ì´¬ì˜(ì‘ì€ êµ¬) â†’ Trackerë¡œ \(y(t)\) í™•ë³´</p>
              </div>
            </div>
          </div>

          <div class="panel" id="d2">
            <div class="cols">
              <div class="mini"><div class="tag">ëª©í‘œ</div><p>ì…”í‹€ì½• ë‚™í•˜ ì´¬ì˜ & ë°ì´í„° ì¶”ì¶œ</p></div>
              <div class="mini"><div class="tag">í™œë™</div><p>ì…”í‹€ì½• \(y(t), v(t), a(t)\) â†’ ììœ ë‚™í•˜ì™€ ê·¸ë˜í”„ ë¹„êµ</p></div>
            </div>
          </div>

          <div class="panel" id="d3">
            <div class="cols">
              <div class="mini"><div class="tag">ëª©í‘œ</div><p>ììœ ë‚™í•˜ ì‹ ìœ ë„(ê³ 1 ìˆ˜ì¤€) + \(g\) ì¶”ì • + ì˜¤ì°¨ ë¶„ì„</p></div>
              <div class="mini"><div class="tag">í™œë™</div><p>\(y(t)=at^2+bt+c\) íšŒê·€ â†’ \(g\approx 2a\)</p></div>
            </div>
          </div>

          <div class="panel" id="d4">
            <div class="cols">
              <div class="mini"><div class="tag">ëª©í‘œ</div><p>ì…”í‹€ì½• ëª¨ë¸(ì œê³±ì €í•­) ê°€ì„¤ ì„¤ì • & ë°ì´í„°ë¡œ ê²€ì¦</p></div>
              <div class="mini"><div class="tag">í™œë™</div><p>\(a\) vs \(v^2\) ì‚°ì ë„ â†’ ì§ì„  í”¼íŒ… â†’ \(v_T\) ì¶”ì •</p></div>
            </div>
          </div>

          <div class="panel" id="d5">
            <div class="cols">
              <div class="mini"><div class="tag">ëª©í‘œ</div><p>GeoGebra/ì›¹ ì‹œë®¬ë ˆì´í„° ì œì‘ + í™•ì¥ íƒêµ¬ ë°œí‘œ</p></div>
              <div class="mini"><div class="tag">í™œë™</div><p>ë³€ì¸ ì¶”ê°€/ë¬¸ì œ ì¬ì •ì˜/ì‹¤ìƒí™œ ì—°ê²°(ì „ìˆ Â·ì¥ë¹„)</p></div>
            </div>
          </div>

          <p class="hint" style="margin-top:12px">ì°¨ì‹œ êµ¬ì„±ì€ ìƒí™©ì— ë§ê²Œ 2~3ì°¨ì‹œë¡œ ì••ì¶•í•´ë„ ë©ë‹ˆë‹¤(í•µì‹¬ì€ â€œê°™ì€ ì¡°ê±´ ë¹„êµ + ëª¨ë¸ ê²€ì¦â€).</p>
        </div>
      </div>
    </section>

    <section id="model">
      <div class="section-head">
        <div>
          <h2>3) ê°€ì„¤ ì„¤ì • â†’ ìˆ˜í•™ì  ëª¨ë¸ë§</h2>
          <p>ë‹¨ìˆœí™”(ê°€ì •)ê°€ ëª¨ë¸ì„ ë§Œë“ ë‹¤. ëª¨ë¸ì€ ë°ì´í„° ì•ì—ì„œ ê²¸ì†í•´ì§„ë‹¤.</p>
        </div>
      </div>

      <div class="grid">
        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">ììœ ë‚™í•˜(ë¬´ì €í•­) â€” ê³ 1 ìˆ˜ì¤€ ìœ ë„</h3>
          <p style="margin:0; color:var(--muted); line-height:1.65">
            ê°€ì •: ê³µê¸°ì €í•­ ë¬´ì‹œ, \(g\) ì¼ì •, ìˆ˜ì§ 1ì°¨ì›, \(v_0=0\).
          </p>
          <div class="mini" style="margin-top:12px">
            <div class="tag">ê²°ë¡ </div>
            <p>
              \(y(t)=\tfrac{1}{2}gt^2\), \(v(t)=gt\), \(a(t)=g\)
            </p>
          </div>
          <details style="margin-top:12px">
            <summary>ë“±ì°¨ìˆ˜ì—´ë¡œ ì¦ëª…(ë¯¸ì ë¶„ ì—†ì´)</summary>
            <div class="details-body">
              ì‹œê°„ì„ \(\Delta t\)ë¡œ ë‚˜ëˆ„ë©´ ì†ë„ ë³€í™”ëŸ‰ì€ \(\Delta v=g\Delta t\)ë¡œ ì¼ì • â†’ \(v_n\)ì€ ë“±ì°¨ìˆ˜ì—´.
              ê° êµ¬ê°„ ì´ë™ê±°ë¦¬ëŠ” â€œí‰ê· ì†ë„Ã—ì‹œê°„â€ì´ê³ , ì´ë¥¼ í•©í•˜ë©´ \(y(t)=\tfrac12gt^2\)ê°€ ëœë‹¤.
            </div>
          </details>
        </div>

        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">ì…”í‹€ì½•(ê³µê¸°ì €í•­) â€” ì œê³±ì €í•­ ê°€ì„¤</h3>
          <p style="margin:0; color:var(--muted); line-height:1.65">
            ì…”í‹€ì½•ì€ ê³µê¸°ì €í•­ì´ ì»¤ì„œ ê°€ì†ë„ê°€ ì¼ì •í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
            ë‹¨ìˆœí™” ê°€ì„¤: ì €í•­ë ¥ \(\propto v^2\) â†’ \(a=g-kv^2\).
          </p>
          <div class="mini" style="margin-top:12px">
            <div class="tag">í•µì‹¬ ê²€ì¦ í¬ì¸íŠ¸</div>
            <p>
              \(a\) vs \(v^2\) ê·¸ë˜í”„ê°€ ì§ì„ ì´ë©´ ê°€ì„¤ì´ ì„¤ë“ë ¥ì„ ì–»ëŠ”ë‹¤.
              ì ˆí¸ \(\approx g\), ê¸°ìš¸ê¸° \(\approx -k\), ì¢…ë‹¨ì†ë„ \(v_T=\sqrt{g/k}\).
            </p>
          </div>

          <details style="margin-top:12px" class="teacher-only">
            <summary>ì‹¬í™”(ì„ íƒ): \(v(t)=v_T\tanh(\cdot)\) í˜•íƒœë¡œ í’€ê¸°</summary>
            <div class="details-body">
              ë¯¸ì ë¶„(ë³€ìˆ˜ë¶„ë¦¬)ì„ ì“°ë©´ \(\frac{dv}{dt}=g-kv^2\)ë¥¼ ë‹«íŒí˜•ìœ¼ë¡œ í’€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
              ìˆ˜í•™ ë™ì•„ë¦¬/ì‹¬í™” ë³´ê³ ì„œìš©ìœ¼ë¡œë§Œ ê¶Œì¥.
            </div>
          </details>
        </div>

        <div class="card pad span-12">
          <h3 style="margin:0 0 10px">í¬ë¬¼ì„  ìš´ë™ìœ¼ë¡œ í™•ì¥(ì„ íƒ)</h3>
          <p style="margin:0 0 12px; color:var(--muted); line-height:1.65">
            â€˜ì¤‘ë ¥ë§Œâ€™ ê°€ì •ì´ë©´ íˆ¬ì‚¬ì²´ëŠ” í¬ë¬¼ì„ ì…ë‹ˆë‹¤. ì…”í‹€ì½•ì€ ì €í•­ ë•Œë¬¸ì— \(x\)ë°©í–¥ ì†ë„ë„ ê°ì†Œí•˜ì—¬ í¬ë¬¼ì„ ì´ ê¹¨ì§‘ë‹ˆë‹¤.
            (ì´ í˜ì´ì§€ëŠ” ìˆ˜ì§ë‚™í•˜ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„í–ˆì§€ë§Œ, ì›í•˜ë©´ ê°™ì€ ë°©ì‹ìœ¼ë¡œ íˆ¬ì‚¬ ìš´ë™ê¹Œì§€ í™•ì¥ ê°€ëŠ¥)
          </p>
          <div class="mini">
            <div class="tag">í¬ë¬¼ì„ </div>
            <p>
              \(x(t)=v_0\cos\theta\,t\), \(y(t)=v_0\sin\theta\,t-\tfrac12gt^2\)
              â†’ \(y(x)=x\tan\theta-\frac{g}{2v_0^2\cos^2\theta}x^2\)
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="data">
      <div class="section-head">
        <div>
          <h2>4) Tracker CSV ì—…ë¡œë“œ â†’ ê·¸ë˜í”„ & ì¶”ì •ê°’</h2>
          <p>ì‹¤ì¸¡ ë°ì´í„°ë¥¼ â€˜ëª¨ë¸ ê²€ì¦â€™ì— ë°”ë¡œ ì—°ê²°í•˜ê¸°</p>
        </div>
      </div>

      <div class="grid">
        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">CSV ì—…ë¡œë“œ</h3>
          <p style="margin:0 0 12px; color:var(--muted); line-height:1.65">
            Trackerì—ì„œ ë‚´ë³´ë‚¸ CSVë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”.
            <b>í•„ìˆ˜ ì—´</b>: ì‹œê°„ \(t\) (ì´ˆ), ìˆ˜ì§ ìœ„ì¹˜ \(y\) (m). ì—´ ì´ë¦„ì€ ë‹¬ë¼ë„ ë©ë‹ˆë‹¤(ìë™ íƒìƒ‰).
          </p>

          <div class="form">
            <div class="field full">
              <label>CSV íŒŒì¼</label>
              <input type="file" id="csvFile" accept=".csv,text/csv" />
            </div>
            <div class="field">
              <label>ëª¨ë¸</label>
              <select id="fitMode">
                <option value="freefall" selected>ììœ ë‚™í•˜: y(t) ì´ì°¨ í”¼íŒ… â†’ g</option>
                <option value="shuttle">ì…”í‹€ì½•: a vs v^2 ì„ í˜• í”¼íŒ… â†’ k, vT</option>
              </select>
            </div>
            <div class="field">
              <label>ì¢Œí‘œ ë¶€í˜¸</label>
              <select id="signMode">
                <option value="down" selected>ì•„ë˜ê°€ + (ê¶Œì¥)</option>
                <option value="up">ìœ„ê°€ +</option>
              </select>
            </div>
            <div class="field">
              <button class="btn primary" type="button" id="runFit">ë¶„ì„ ì‹¤í–‰</button>
            </div>
          </div>

          <div class="mini" style="margin-top:12px">
            <div class="tag">ê²°ê³¼</div>
            <div id="fitResult" style="font-family:var(--mono); color:var(--text); font-size:12px; line-height:1.55">
              ì•„ì§ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
            </div>
          </div>

          <details style="margin-top:12px">
            <summary>CSVê°€ ì˜ ì•ˆ ì½í ë•Œ ì²´í¬</summary>
            <div class="details-body">
              1) ì‹œê°„ê³¼ ìœ„ì¹˜ ë‹¨ìœ„(ì´ˆ, ë¯¸í„°)ë¥¼ í™•ì¸í•˜ì„¸ìš”. 2) yê°€ í”½ì…€ì´ë¼ë©´ Trackerì—ì„œ ìŠ¤ì¼€ì¼ ë³´ì •ì„ ë¨¼ì € í•´ì•¼ í•©ë‹ˆë‹¤.
              3) ìƒ˜í”Œë§ì´ ë„ˆë¬´ ê±°ì¹ ë©´(ë‚®ì€ fps) ê°€ì†ë„ ê³„ì‚°ì´ ìš”ë™ì¹  ìˆ˜ ìˆì–´ìš”.
            </div>
          </details>
        </div>

        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">ê·¸ë˜í”„</h3>
          <div class="chartBox">
            <canvas id="chart1" aria-label="y, v ê·¸ë˜í”„"></canvas>
          </div>
          <div class="chartBox" style="margin-top:12px">
            <canvas id="chart2" aria-label="a ë˜ëŠ” a vs v^2 ê·¸ë˜í”„"></canvas>
          </div>
          <p class="hint">ì£¼ì˜: \(v\), \(a\)ëŠ” ìœ í•œì°¨ë¶„(ê·¼ì‚¬ ë¯¸ë¶„)ì´ë¼ ë…¸ì´ì¦ˆê°€ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”. í° íë¦„ì„ ë³´ì„¸ìš”.</p>
        </div>
      </div>
    </section>

    <section id="sim">
      <div class="section-head">
        <div>
          <h2>5) ì‹œë®¬ë ˆì´ì…˜(ìˆ˜ì¹˜ ì ë¶„)</h2>
          <p>ë¯¸ì ë¶„ì„ ëª°ë¼ë„, ë°˜ë³µ ê³„ì‚°(ìˆ˜ì—´)ë¡œ ëª¨ë¸ì„ â€˜ëŒë¦´â€™ ìˆ˜ ìˆë‹¤</p>
        </div>
      </div>

      <div class="grid">
        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">ëª¨ë¸ ì„ íƒ & íŒŒë¼ë¯¸í„°</h3>

          <div class="form">
            <div class="field">
              <label>ì €í•­ ëª¨ë¸</label>
              <select id="simModel">
                <option value="none" selected>ë¬´ì €í•­(ììœ ë‚™í•˜)</option>
                <option value="linear">ì„ í˜•ì €í•­: a = g - b v</option>
                <option value="quad">ì œê³±ì €í•­: a = g - k vÂ²</option>
              </select>
            </div>
            <div class="field">
              <label>ì¤‘ë ¥ê°€ì†ë„ g (m/sÂ²)</label>
              <input type="number" id="simG" value="9.8" step="0.01" />
            </div>
            <div class="field">
              <label>ë†’ì´ H (m)</label>
              <input type="number" id="simH" value="2.0" step="0.1" />
            </div>
            <div class="field">
              <label>Î”t (s)</label>
              <input type="number" id="simDt" value="0.01" step="0.005" />
            </div>

            <div class="field">
              <label>b (1/s)</label>
              <input type="number" id="simB" value="0.7" step="0.05" />
            </div>
            <div class="field">
              <label>k (1/m)</label>
              <input type="number" id="simK" value="0.22" step="0.01" />
            </div>
            <div class="field">
              <button class="btn primary" type="button" id="runSim">ì‹œë®¬ë ˆì´ì…˜</button>
            </div>
            <div class="field full">
              <p class="hint" style="margin:0">
                ì œê³±ì €í•­ ëª¨ë¸ì—ì„œ ì¢…ë‹¨ì†ë„: \(v_T=\sqrt{g/k}\)
              </p>
            </div>
          </div>

          <div class="mini" style="margin-top:12px">
            <div class="tag">ìˆ˜ì—´ ì—…ë°ì´íŠ¸(í•µì‹¬)</div>
            <p style="margin:0; color:var(--muted); line-height:1.65">
              \(v_{n+1}=v_n+a(v_n)\Delta t\), \(y_{n+1}=y_n+v_{n+1}\Delta t\).
              ì—¬ê¸°ì„œ \(a(v)=g\), \(g-bv\), \(g-kv^2\) ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>

        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">ê²°ê³¼ ê·¸ë˜í”„</h3>
          <div class="chartBox">
            <canvas id="simChart" aria-label="ì‹œë®¬ë ˆì´ì…˜ ê·¸ë˜í”„"></canvas>
          </div>
          <div class="mini" style="margin-top:12px">
            <div class="tag">ìš”ì•½</div>
            <div id="simSummary" style="font-family:var(--mono); font-size:12px; color:var(--text); line-height:1.55">
              ì•„ì§ ì‹¤í–‰í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
            </div>
          </div>
        </div>

        <div class="card pad span-12">
          <h3 style="margin:0 0 10px">(ì„ íƒ) ê¸°ì¡´ ì‹œë®¬ë ˆì´í„° ì„ë² ë“œ</h3>
          <p style="margin:0 0 12px; color:var(--muted); line-height:1.65">
            ê°™ì€ í´ë”ì— <code style="font-family:var(--mono)">fall_simulator.html</code> íŒŒì¼ì´ ìˆìœ¼ë©´ ì•„ë˜ iframeì—ì„œ ë°”ë¡œ ì—´ë¦½ë‹ˆë‹¤.
          </p>
          <div class="chartBox" style="padding:0; overflow:hidden">
            <iframe title="ë‚™í•˜ ì‹œë®¬ë ˆì´í„°" src="fall_simulator.html" style="width:100%; height:560px; border:0"></iframe>
          </div>
        </div>
      </div>
    </section>

    <section id="extensions">
      <div class="section-head">
        <div>
          <h2>6) í† ì˜ Â· í™•ì¥ íƒêµ¬(ì°½ì˜ íŒŒíŠ¸)</h2>
          <p>ëª¨ë¸ì„ â€˜ì§„ì§œâ€™ë¡œ ë§Œë“œëŠ” ê±´, ì‹¤íŒ¨ë¥¼ ì •ì§í•˜ê²Œ ì„¤ëª…í•˜ëŠ” ëŠ¥ë ¥</p>
        </div>
      </div>

      <div class="grid">
        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">ì˜¤ì°¨ ì›ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
          <div class="checklist" id="errorChecks"></div>
          <details style="margin-top:12px">
            <summary>ë³´ê³ ì„œ ë¬¸ì¥ í…œí”Œë¦¿(ê·¸ëŒ€ë¡œ ì¨ë„ ë¨)</summary>
            <div class="details-body">
              â€œìš°ë¦¬ì˜ ë°ì´í„°ì—ì„œ \(a(t)\)ê°€ ì¼ì •í•˜ì§€ ì•Šê²Œ ë‚˜íƒ€ë‚œ ì´ìœ ëŠ” (1) ë¯¸ë¶„ì— ì˜í•œ ë…¸ì´ì¦ˆ ì¦í­, (2) ì´¬ì˜ ê°ë„ì— ë”°ë¥¸ íŒ¨ëŸ´ëŸ­ìŠ¤,
              (3) ë¬¼ì²´ì˜ ìì„¸ ë³€í™”(ì…”í‹€ì½•), (4) ê³µê¸° íë¦„ ë“±ìœ¼ë¡œ í•´ì„ëœë‹¤. ë”°ë¼ì„œ ë‹¤ìŒ ì‹¤í—˜ì—ì„œëŠ” (ê°œì„ ì•ˆ)ì„ ì ìš©í•œë‹¤.â€
            </div>
          </details>
        </div>

        <div class="card pad span-6">
          <h3 style="margin:0 0 10px">í™•ì¥ ì•„ì´ë””ì–´ ì¹´ë“œ</h3>
          <div class="grid" style="margin-top:0">
            <div class="mini span-6">
              <div class="tag">ë³€ì¸ ì¶”ê°€</div>
              <p>ì…”í‹€ì½• ì¢…ë¥˜(ê¹ƒí„¸/ë‚˜ì¼ë¡ ), ë§ˆëª¨ ì •ë„, ì´ˆê¸° íšŒì „(ìŠ¤í•€) ìœ ë¬´, ì§ˆëŸ‰ ë³€í™”(í…Œì´í”„) ë“±</p>
            </div>
            <div class="mini span-6">
              <div class="tag">ë¬¸ì œ ë°”ê¿” ìƒê°í•˜ê¸°</div>
              <p>ì—­ë¬¸ì œ: \(v_T\)ë¥¼ ì¸¡ì •í–ˆì„ ë•Œ \(k\)ëŠ”? ìµœì í™”: â€œê°€ì¥ ëŠ¦ê²Œ ë–¨ì–´ì§€ê²Œâ€ í•˜ë ¤ë©´?</p>
            </div>
            <div class="mini span-6">
              <div class="tag">ì‹¤ìƒí™œ ì—°ê²°</div>
              <p>ì™œ ë°°ë“œë¯¼í„´ì€ ê³µ ëŒ€ì‹  ì…”í‹€ì„ ì“¸ê¹Œ? ê°•í•œ ì €í•­ì´ ê²½ê¸° ê³µê°„Â·ë°˜ì‘ ì‹œê°„ì„ ì–´ë–»ê²Œ ë°”ê¾¸ë‚˜?</p>
            </div>
            <div class="mini span-6">
              <div class="tag">ëª¨ë¸ ê²½ìŸ</div>
              <p>ë¬´ì €í•­/ì„ í˜•/ì œê³±ì €í•­ ì¤‘ ì–´ë–¤ ëª¨ë¸ì´ ì”ì°¨ê°€ ê°€ì¥ ì‘ì€ê°€? (RÂ², ì”ì°¨ ê·¸ë˜í”„)</p>
            </div>
          </div>
        </div>

        <div class="card pad span-12">
          <h3 style="margin:0 0 10px">í‰ê°€ ë£¨ë¸Œë¦­(ìƒ˜í”Œ)</h3>
          <table aria-label="í‰ê°€ ë£¨ë¸Œë¦­">
            <thead>
              <tr><th>ì˜ì—­</th><th>ê¸°ì¤€</th><th style="width:120px">ë¹„ì¤‘</th></tr>
            </thead>
            <tbody>
              <tr><td>ì‹¤í—˜ ì„¤ê³„</td><td>ë³€ì¸(ì¡°ì‘/ì¢…ì†/í†µì œ) ì •ì˜, í†µì œ ì „ëµì˜ ëª…í™•ì„±</td><td>25%</td></tr>
              <tr><td>ë°ì´í„° ë¶„ì„</td><td>ê·¸ë˜í”„/í”¼íŒ…/ì¶”ì •ê°’, ë‹¨ìœ„Â·ì¢Œí‘œ ì²˜ë¦¬ì˜ ì •í™•ì„±</td><td>25%</td></tr>
              <tr><td>ìˆ˜í•™ì  ëª¨ë¸ë§</td><td>ê°€ì •â†’ì‹â†’ì˜ˆì¸¡â†’ê²€ì¦ ë…¼ë¦¬, ì‹ì˜ í•´ì„ ëŠ¥ë ¥</td><td>25%</td></tr>
              <tr><td>ì˜¤ì°¨Â·í™•ì¥</td><td>ì˜¤ì°¨ ì›ì¸ ë¶„ì„ì˜ ì„¤ë“ë ¥, í™•ì¥ íƒêµ¬ì˜ ì°½ì˜ì„±</td><td>25%</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <footer class="card pad">
      <div class="cols">
        <div>
          <b>ë‹¤ìš´ë¡œë“œ(ìˆ˜ì—… ìë£Œ)</b>
          <p class="hint" style="margin:8px 0 0">
            ì´ í˜ì´ì§€ëŠ” ë‹¨ì¼ HTMLì´ë¼ í•™êµ LMS/í´ë˜ìŠ¤ë£¸/í™ˆí˜ì´ì§€ì— ê·¸ëŒ€ë¡œ ì˜¬ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            ê°™ì€ í´ë”ì— <code style="font-family:var(--mono)">fall_simulator.html</code>ë¥¼ ë‘ë©´ ì‹œë®¬ë ˆì´í„°ê°€ ìë™ ì„ë² ë“œë©ë‹ˆë‹¤.
          </p>
        </div>
        <div>
          <b>ë°ì´í„°/ì €ì‘ê¶Œ ë©”ëª¨</b>
          <p class="hint" style="margin:8px 0 0">
            ë…¼ë¬¸ ì›ë¬¸ì€ ì¸ìš© ê·œì •ì„ ì§€ì¼œ ì‚¬ìš©í•˜ì„¸ìš”(ì§§ì€ ì¸ìš© + ì¶œì²˜ í‘œê¸°).
            ë³¸ í˜ì´ì§€ëŠ” ìˆ˜ì—… ìš´ì˜ì„ ìœ„í•œ í™œë™ ì„¤ê³„Â·UI ë„êµ¬ì…ë‹ˆë‹¤.
          </p>
        </div>
      </div>
    </footer>
  </main>

  <script>
    // ---------- Theme & Mode ----------
    const root = document.body;
    const themeBtn = document.getElementById('themeBtn');
    const modeBtn = document.getElementById('modeBtn');

    function getTheme(){ return localStorage.getItem('theme') || 'auto'; }
    function setTheme(v){ localStorage.setItem('theme', v); applyTheme(); }
    function applyTheme(){
      const t = getTheme();
      root.setAttribute('data-theme', t);
      themeBtn.textContent = t === 'dark' ? 'ğŸŒ™ ë‹¤í¬' : (t === 'light' ? 'â˜€ï¸ ë¼ì´íŠ¸' : 'ğŸŒ“ ìë™');
    }

    themeBtn.addEventListener('click', () => {
      const t = getTheme();
      const next = t === 'auto' ? 'dark' : (t === 'dark' ? 'light' : 'auto');
      setTheme(next);
    });

    function getMode(){ return localStorage.getItem('mode') || 'student'; }
    function setMode(v){ localStorage.setItem('mode', v); applyMode(); }
    function applyMode(){
      const m = getMode();
      root.setAttribute('data-mode', m);
      modeBtn.textContent = m === 'teacher' ? 'ğŸ“ êµì‚¬ìš© ON' : 'ğŸ“ êµì‚¬ìš©';
    }

    modeBtn.addEventListener('click', () => {
      const m = getMode();
      setMode(m === 'teacher' ? 'student' : 'teacher');
    });

    applyTheme();
    applyMode();

    // ---------- Tabs ----------
    const tabs = [...document.querySelectorAll('.tab')];
    tabs.forEach(btn => btn.addEventListener('click', () => {
      const id = btn.getAttribute('data-tab');
      tabs.forEach(b => b.setAttribute('aria-selected', b === btn ? 'true' : 'false'));
      document.querySelectorAll('.panel').forEach(p => p.classList.toggle('active', p.id === id));
    }));

    // ---------- Checklists (autosave) ----------
    function renderChecklist(containerId, items, key){
      const box = document.getElementById(containerId);
      const saved = JSON.parse(localStorage.getItem(key) || '{}');
      box.innerHTML = '';
      items.forEach((it, idx) => {
        const row = document.createElement('label');
        row.className = 'check';
        const cb = document.createElement('input');
        cb.type = 'checkbox';
        cb.checked = !!saved[idx];
        cb.addEventListener('change', () => {
          const s = JSON.parse(localStorage.getItem(key) || '{}');
          s[idx] = cb.checked;
          localStorage.setItem(key, JSON.stringify(s));
        });
        const text = document.createElement('div');
        text.innerHTML = `<b>${it.title}</b><small>${it.desc}</small>`;
        row.appendChild(cb);
        row.appendChild(text);
        box.appendChild(row);
      });
    }

    renderChecklist('shootChecks', [
      {title:'60fps ì´ìƒ(ê°€ëŠ¥í•˜ë©´) + ì‚¼ê°ëŒ€ ê³ ì •', desc:'í”„ë ˆì„ì´ ì´˜ì´˜í• ìˆ˜ë¡ v, a ê³„ì‚°ì´ ì•ˆì •ì ì…ë‹ˆë‹¤.'},
      {title:'ì¤„ì/ìŠ¤ì¼€ì¼ì„ ë‚™í•˜ í‰ë©´ê³¼ ê°™ì€ í‰ë©´ì—', desc:'íŒ¨ëŸ´ëŸ­ìŠ¤(ì›ê·¼) ì˜¤ì°¨ë¥¼ í¬ê²Œ ì¤„ì…ë‹ˆë‹¤.'},
      {title:'ì¹´ë©”ë¼ëŠ” ë©€ë¦¬ì„œ(ì¤Œ ì•½ê°„) ì •ë©´ ì´¬ì˜', desc:'ì™œê³¡ì„ ì¤„ì´ê³  ì¶”ì ì´ ì‰¬ì›Œì§‘ë‹ˆë‹¤.'},
      {title:'ì´ˆê¸°ì†ë„ v0â‰ˆ0ë¡œ ë–¨ì–´ëœ¨ë¦¬ê¸°', desc:'ì†ìœ¼ë¡œ ë°€ì§€ ë§ê³  ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë†“ê¸°.'},
      {title:'ì‹¤ë‚´ ë°”ëŒ ìµœì†Œí™”(ì°½ë¬¸/ì„ í’ê¸° OFF)', desc:'ì…”í‹€ì½•ì€ íŠ¹íˆ ê³µê¸°íë¦„ì— ë¯¼ê°í•©ë‹ˆë‹¤.'},
    ], 'checks_shoot');

    renderChecklist('trackerChecks', [
      {title:'Calibration(ìŠ¤ì¼€ì¼) ì„¤ì •', desc:'í”½ì…€ â†’ ë¯¸í„° ë³€í™˜ì´ ì •í™•í•´ì•¼ í•©ë‹ˆë‹¤.'},
      {title:'ì¢Œí‘œì¶• ì„¤ì •(ì•„ë˜ê°€ + ê¶Œì¥)', desc:'ë¶€í˜¸ê°€ ëª¨ë¸ê³¼ ë§ìœ¼ë©´ ì‹¤ìˆ˜ê°€ ì¤„ì–´ìš”.'},
      {title:'ì§ˆì (ì¤‘ì‹¬ì ) ì¶”ì ', desc:'ê°€ëŠ¥í•˜ë©´ ìë™ì¶”ì  + ìˆ˜ë™ ë³´ì •.'},
      {title:'y(t) í™•ì¸ í›„ v(t), a(t) í™•ì¸', desc:'ê°€ì†ë„ëŠ” ë…¸ì´ì¦ˆê°€ í¬ë‹ˆ í° íë¦„ì— ì§‘ì¤‘.'},
      {title:'CSVë¡œ ë‚´ë³´ë‚´ê¸°', desc:'ì´ í˜ì´ì§€ì˜ ì—…ë¡œë“œ ë¶„ì„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
    ], 'checks_tracker');

    renderChecklist('errorChecks', [
      {title:'ìŠ¤ì¼€ì¼ì´ ë‚™í•˜ í‰ë©´ê³¼ ì–´ê¸‹ë‚¨(íŒ¨ëŸ´ëŸ­ìŠ¤)', desc:'ê°€ì¥ í”í•œ ì˜¤ì°¨. ì¤„ì/ìŠ¤ì¼€ì¼ ìœ„ì¹˜ë¥¼ ë‹¤ì‹œ í™•ì¸.'},
      {title:'í”„ë ˆì„ë ˆì´íŠ¸ ë‚®ìŒ/ëª¨ì…˜ ë¸”ëŸ¬', desc:'í´ë¦­ ì˜¤ì°¨ ì¦ê°€ â†’ v, aê°€ ìš”ë™.'},
      {title:'ì´ˆê¸°ì†ë„(ì†ì˜ ë¯¸ëŠ” í˜) ì¡´ì¬', desc:'íŠ¹íˆ ìˆ˜í‰/íˆ¬ì‚¬ ìš´ë™ì—ì„œ í° ì˜í–¥.'},
      {title:'ê³µê¸° íë¦„(ìƒìŠ¹ê¸°ë¥˜/ë°”ëŒ)', desc:'ì…”í‹€ì½•ì€ ì‘ì€ ê¸°ë¥˜ì—ë„ ë¯¼ê°.'},
      {title:'ì…”í‹€ì½• ìì„¸ ë³€í™”(íšŒì „/í”ë“¤ë¦¼)', desc:'ì €í•­ê³„ìˆ˜ê°€ ì‹œê°„ì— ë”°ë¼ ë³€í•˜ëŠ” íš¨ê³¼.'},
    ], 'checks_error');

    // ---------- Variable table (autosave + export) ----------
    const varTableBody = document.querySelector('#varTable tbody');
    const varText = document.getElementById('varText');
    const varType = document.getElementById('varType');
    const addVar = document.getElementById('addVar');
    const exportVars = document.getElementById('exportVars');
    const seedVars = document.getElementById('seedVars');

    function loadVars(){
      return JSON.parse(localStorage.getItem('vars_table') || '[]');
    }
    function saveVars(rows){
      localStorage.setItem('vars_table', JSON.stringify(rows));
      renderVars();
    }
    function renderVars(){
      const rows = loadVars();
      varTableBody.innerHTML = '';
      rows.forEach((r, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${r.type}</td>
          <td>${escapeHtml(r.text)}</td>
          <td><button class="btn small" type="button" data-del="${idx}">ì‚­ì œ</button></td>
        `;
        varTableBody.appendChild(tr);
      });
      varTableBody.querySelectorAll('button[data-del]').forEach(b => {
        b.addEventListener('click', () => {
          const i = Number(b.getAttribute('data-del'));
          const rows = loadVars();
          rows.splice(i,1);
          saveVars(rows);
        });
      });
    }

    function escapeHtml(s){
      return String(s)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'",'&#039;');
    }

    addVar.addEventListener('click', () => {
      const t = varText.value.trim();
      if(!t) return;
      const rows = loadVars();
      rows.push({type: varType.value, text: t});
      saveVars(rows);
      varText.value = '';
      varText.focus();
    });

    seedVars.addEventListener('click', () => {
      const rows = [
        {type:'ì¡°ì‘ë³€ì¸', text:'ë¬¼ì²´ ì¢…ë¥˜(ì¼ë°˜ ë¬¼ì²´ vs ì…”í‹€ì½•)'},
        {type:'ì¢…ì†ë³€ì¸', text:'y(t), v(t), a(t), ì¶”ì • g ë˜ëŠ” v_T'},
        {type:'í†µì œë³€ì¸', text:'ë‚™í•˜ ë†’ì´ H(ì˜ˆ: 2.0 më¡œ ê³ ì •)'},
        {type:'í†µì œë³€ì¸', text:'ì´ˆê¸°ì†ë„ v0â‰ˆ0(ë†“ëŠ” ë°©ì‹ í†µì¼)'},
        {type:'í†µì œë³€ì¸', text:'ì´¬ì˜ fps(ê°€ëŠ¥í•˜ë©´ 60fps ì´ìƒ), ì¹´ë©”ë¼ ìœ„ì¹˜/ê°ë„ ê³ ì •'},
        {type:'í†µì œë³€ì¸', text:'ì‹¤ë‚´ ë°”ëŒ(ì°½ë¬¸ ë‹«ê¸°, ì„ í’ê¸° OFF), ê°™ì€ ì¥ì†Œì—ì„œ ì¸¡ì •'},
      ];
      saveVars(rows);
    });

    exportVars.addEventListener('click', () => {
      const rows = loadVars();
      const csv = ['type,text', ...rows.map(r => `${csvEsc(r.type)},${csvEsc(r.text)}`)].join('\n');
      downloadText(csv, 'variables.csv', 'text/csv;charset=utf-8');
    });

    function csvEsc(s){
      const t = String(s).replaceAll('"','""');
      return `"${t}"`;
    }

    function downloadText(text, filename, mime){
      const blob = new Blob([text], {type: mime});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    renderVars();

    // ---------- Reset all progress ----------
    document.getElementById('resetAll').addEventListener('click', () => {
      if(!confirm('ì²´í¬ë¦¬ìŠ¤íŠ¸/ë³€ì¸í‘œ ì €ì¥ ë‚´ìš©ì„ ì´ˆê¸°í™”í• ê¹Œìš”?')) return;
      ['checks_shoot','checks_tracker','checks_error','vars_table'].forEach(k => localStorage.removeItem(k));
      renderVars();
      renderChecklist('shootChecks', [
        {title:'60fps ì´ìƒ(ê°€ëŠ¥í•˜ë©´) + ì‚¼ê°ëŒ€ ê³ ì •', desc:'í”„ë ˆì„ì´ ì´˜ì´˜í• ìˆ˜ë¡ v, a ê³„ì‚°ì´ ì•ˆì •ì ì…ë‹ˆë‹¤.'},
        {title:'ì¤„ì/ìŠ¤ì¼€ì¼ì„ ë‚™í•˜ í‰ë©´ê³¼ ê°™ì€ í‰ë©´ì—', desc:'íŒ¨ëŸ´ëŸ­ìŠ¤(ì›ê·¼) ì˜¤ì°¨ë¥¼ í¬ê²Œ ì¤„ì…ë‹ˆë‹¤.'},
        {title:'ì¹´ë©”ë¼ëŠ” ë©€ë¦¬ì„œ(ì¤Œ ì•½ê°„) ì •ë©´ ì´¬ì˜', desc:'ì™œê³¡ì„ ì¤„ì´ê³  ì¶”ì ì´ ì‰¬ì›Œì§‘ë‹ˆë‹¤.'},
        {title:'ì´ˆê¸°ì†ë„ v0â‰ˆ0ë¡œ ë–¨ì–´ëœ¨ë¦¬ê¸°', desc:'ì†ìœ¼ë¡œ ë°€ì§€ ë§ê³  ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë†“ê¸°.'},
        {title:'ì‹¤ë‚´ ë°”ëŒ ìµœì†Œí™”(ì°½ë¬¸/ì„ í’ê¸° OFF)', desc:'ì…”í‹€ì½•ì€ íŠ¹íˆ ê³µê¸°íë¦„ì— ë¯¼ê°í•©ë‹ˆë‹¤.'},
      ], 'checks_shoot');
      renderChecklist('trackerChecks', [
        {title:'Calibration(ìŠ¤ì¼€ì¼) ì„¤ì •', desc:'í”½ì…€ â†’ ë¯¸í„° ë³€í™˜ì´ ì •í™•í•´ì•¼ í•©ë‹ˆë‹¤.'},
        {title:'ì¢Œí‘œì¶• ì„¤ì •(ì•„ë˜ê°€ + ê¶Œì¥)', desc:'ë¶€í˜¸ê°€ ëª¨ë¸ê³¼ ë§ìœ¼ë©´ ì‹¤ìˆ˜ê°€ ì¤„ì–´ìš”.'},
        {title:'ì§ˆì (ì¤‘ì‹¬ì ) ì¶”ì ', desc:'ê°€ëŠ¥í•˜ë©´ ìë™ì¶”ì  + ìˆ˜ë™ ë³´ì •.'},
        {title:'y(t) í™•ì¸ í›„ v(t), a(t) í™•ì¸', desc:'ê°€ì†ë„ëŠ” ë…¸ì´ì¦ˆê°€ í¬ë‹ˆ í° íë¦„ì— ì§‘ì¤‘.'},
        {title:'CSVë¡œ ë‚´ë³´ë‚´ê¸°', desc:'ì´ í˜ì´ì§€ì˜ ì—…ë¡œë“œ ë¶„ì„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
      ], 'checks_tracker');
      renderChecklist('errorChecks', [
        {title:'ìŠ¤ì¼€ì¼ì´ ë‚™í•˜ í‰ë©´ê³¼ ì–´ê¸‹ë‚¨(íŒ¨ëŸ´ëŸ­ìŠ¤)', desc:'ê°€ì¥ í”í•œ ì˜¤ì°¨. ì¤„ì/ìŠ¤ì¼€ì¼ ìœ„ì¹˜ë¥¼ ë‹¤ì‹œ í™•ì¸.'},
        {title:'í”„ë ˆì„ë ˆì´íŠ¸ ë‚®ìŒ/ëª¨ì…˜ ë¸”ëŸ¬', desc:'í´ë¦­ ì˜¤ì°¨ ì¦ê°€ â†’ v, aê°€ ìš”ë™.'},
        {title:'ì´ˆê¸°ì†ë„(ì†ì˜ ë¯¸ëŠ” í˜) ì¡´ì¬', desc:'íŠ¹íˆ ìˆ˜í‰/íˆ¬ì‚¬ ìš´ë™ì—ì„œ í° ì˜í–¥.'},
        {title:'ê³µê¸° íë¦„(ìƒìŠ¹ê¸°ë¥˜/ë°”ëŒ)', desc:'ì…”í‹€ì½•ì€ ì‘ì€ ê¸°ë¥˜ì—ë„ ë¯¼ê°.'},
        {title:'ì…”í‹€ì½• ìì„¸ ë³€í™”(íšŒì „/í”ë“¤ë¦¼)', desc:'ì €í•­ê³„ìˆ˜ê°€ ì‹œê°„ì— ë”°ë¼ ë³€í•˜ëŠ” íš¨ê³¼.'},
      ], 'checks_error');
      alert('ì´ˆê¸°í™” ì™„ë£Œ!');
    });

    // ---------- KaTeX render ----------
    window.addEventListener('DOMContentLoaded', () => {
      try{
        renderMathInElement(document.body, {
          delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "\\[", right: "\\]", display: true},
            {left: "\\(", right: "\\)", display: false},
          ],
          throwOnError: false
        });
      }catch(e){/* ignore */}
    });

    // ---------- Charts helpers ----------
    let chart1, chart2, simChart;

    function mkLineChart(canvas, datasets, title){
      return new Chart(canvas, {
        type:'line',
        data:{ datasets },
        options:{
          responsive:true,
          maintainAspectRatio:false,
          plugins:{
            legend:{labels:{color:getComputedStyle(document.body).getPropertyValue('--muted')}},
            title:{display:!!title, text:title, color:getComputedStyle(document.body).getPropertyValue('--text')},
            tooltip:{mode:'nearest', intersect:false}
          },
          scales:{
            x:{type:'linear', ticks:{color:getComputedStyle(document.body).getPropertyValue('--muted')}, grid:{color:getComputedStyle(document.body).getPropertyValue('--line')}},
            y:{ticks:{color:getComputedStyle(document.body).getPropertyValue('--muted')}, grid:{color:getComputedStyle(document.body).getPropertyValue('--line')}}
          }
        }
      });
    }

    function setChart(chart, datasets){
      chart.data.datasets = datasets;
      chart.update();
    }

    // init empty charts
    chart1 = mkLineChart(document.getElementById('chart1'), [
      {label:'y(t)', data:[], parsing:false, borderWidth:2, pointRadius:0},
      {label:'v(t)', data:[], parsing:false, borderWidth:2, pointRadius:0},
    ], 'ì‹œê°„ì— ë”°ë¥¸ y, v');

    chart2 = mkLineChart(document.getElementById('chart2'), [
      {label:'a(t)', data:[], parsing:false, borderWidth:2, pointRadius:0},
    ], 'ê°€ì†ë„');

    simChart = mkLineChart(document.getElementById('simChart'), [
      {label:'y(t)', data:[], parsing:false, borderWidth:2, pointRadius:0},
      {label:'v(t)', data:[], parsing:false, borderWidth:2, pointRadius:0},
      {label:'a(t)', data:[], parsing:false, borderWidth:2, pointRadius:0},
    ], 'ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼');

    // ---------- CSV load + analysis ----------
    const csvFile = document.getElementById('csvFile');
    const runFit = document.getElementById('runFit');
    const fitMode = document.getElementById('fitMode');
    const signMode = document.getElementById('signMode');
    const fitResult = document.getElementById('fitResult');

    function findColumn(cols, candidates){
      const lower = cols.map(c => String(c).trim().toLowerCase());
      for(const cand of candidates){
        const i = lower.findIndex(c => c === cand);
        if(i !== -1) return cols[i];
      }
      // fuzzy contains
      for(const cand of candidates){
        const i = lower.findIndex(c => c.includes(cand));
        if(i !== -1) return cols[i];
      }
      return null;
    }

    function finiteDiff(t, y){
      // central differences for v and a
      const n = t.length;
      const v = new Array(n).fill(NaN);
      const a = new Array(n).fill(NaN);
      for(let i=1;i<n-1;i++){
        const dt = t[i+1]-t[i-1];
        if(dt===0) continue;
        v[i] = (y[i+1]-y[i-1]) / dt;
      }
      for(let i=2;i<n-2;i++){
        const dt = t[i+1]-t[i-1];
        if(dt===0) continue;
        a[i] = (v[i+1]-v[i-1]) / dt;
      }
      return {v,a};
    }

    function polyFit2(t, y){
      // least squares for y = a t^2 + b t + c
      // normal equations
      let S0=0,S1=0,S2=0,S3=0,S4=0;
      let T0=0,T1=0,T2=0;
      const n = t.length;
      for(let i=0;i<n;i++){
        const ti=t[i];
        const yi=y[i];
        const t2=ti*ti;
        S0+=1;
        S1+=ti;
        S2+=t2;
        S3+=t2*ti;
        S4+=t2*t2;
        T0+=yi;
        T1+=yi*ti;
        T2+=yi*t2;
      }
      // Solve 3x3 using Cramer's rule / gaussian elimination
      const A = [
        [S4, S3, S2],
        [S3, S2, S1],
        [S2, S1, S0]
      ];
      const B = [T2, T1, T0];

      // gaussian elimination
      for(let i=0;i<3;i++){
        // pivot
        let max=i;
        for(let r=i+1;r<3;r++) if(Math.abs(A[r][i])>Math.abs(A[max][i])) max=r;
        if(max!==i){ [A[i],A[max]]=[A[max],A[i]]; [B[i],B[max]]=[B[max],B[i]]; }
        const piv=A[i][i] || 1e-12;
        for(let j=i;j<3;j++) A[i][j]/=piv;
        B[i]/=piv;
        for(let r=0;r<3;r++){
          if(r===i) continue;
          const f=A[r][i];
          for(let j=i;j<3;j++) A[r][j]-=f*A[i][j];
          B[r]-=f*B[i];
        }
      }
      const [a,b,c]=B;
      return {a,b,c};
    }

    function linFit(x, y){
      // y = p + q x
      let n=0, sx=0, sy=0, sxx=0, sxy=0;
      for(let i=0;i<x.length;i++){
        const xi=x[i], yi=y[i];
        if(!isFinite(xi) || !isFinite(yi)) continue;
        n++; sx+=xi; sy+=yi; sxx+=xi*xi; sxy+=xi*yi;
      }
      const denom = (n*sxx - sx*sx) || 1e-12;
      const q = (n*sxy - sx*sy) / denom;
      const p = (sy - q*sx) / (n || 1e-12);
      return {p,q,n};
    }

    function toPoints(t, y){
      const pts=[];
      for(let i=0;i<t.length;i++) if(isFinite(t[i]) && isFinite(y[i])) pts.push({x:t[i], y:y[i]});
      return pts;
    }

    runFit.addEventListener('click', () => {
      const f = csvFile.files?.[0];
      if(!f){ alert('CSV íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”.'); return; }
      Papa.parse(f, {
        header:true,
        dynamicTyping:true,
        skipEmptyLines:true,
        complete:(res)=>{
          const rows = res.data;
          if(!rows || !rows.length){ alert('CSVê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.'); return; }
          const cols = Object.keys(rows[0]);
          const tCol = findColumn(cols, ['t','time','timestamp','seconds','sec']);
          const yCol = findColumn(cols, ['y','posy','positiony','y(m)','y (m)','vertical','height']);
          if(!tCol || !yCol){
            alert('ì—´ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì‹œê°„(t)ê³¼ ìœ„ì¹˜(y) ì—´ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');
            return;
          }

          let t = rows.map(r => Number(r[tCol]));
          let y = rows.map(r => Number(r[yCol]));

          // normalize sign if needed
          if(signMode.value === 'up'){
            // if up is +, flip to down+ for our internal convention
            y = y.map(v => -v);
          }

          // remove NaNs
          const filteredT=[], filteredY=[];
          for(let i=0;i<t.length;i++){
            if(isFinite(t[i]) && isFinite(y[i])){ filteredT.push(t[i]); filteredY.push(y[i]); }
          }
          t=filteredT; y=filteredY;

          // shift t to start at 0
          const t0=t[0];
          t = t.map(v => v - t0);

          const {v,a} = finiteDiff(t,y);

          // charts y, v
          setChart(chart1, [
            {label:'y(t)', data: toPoints(t,y), parsing:false, borderWidth:2, pointRadius:0},
            {label:'v(t) (ê·¼ì‚¬)', data: toPoints(t,v), parsing:false, borderWidth:2, pointRadius:0},
          ]);

          if(fitMode.value === 'freefall'){
            // quadratic fit: y = a t^2 + b t + c
            const fit = polyFit2(t,y);
            const gEst = 2*fit.a;
            const yFit = t.map(tt => fit.a*tt*tt + fit.b*tt + fit.c);
            setChart(chart2, [
              {label:'a(t) (ê·¼ì‚¬)', data: toPoints(t,a), parsing:false, borderWidth:2, pointRadius:0},
              {label:'y_fit(t)', data: toPoints(t,yFit), parsing:false, borderWidth:2, pointRadius:0},
            ]);

            fitResult.innerHTML =
              `model: y(t)=a t^2 + b t + c\n`+
              `a=${fit.a.toFixed(6)}, b=${fit.b.toFixed(6)}, c=${fit.c.toFixed(6)}\n`+
              `g â‰ˆ 2a = ${gEst.toFixed(4)} m/s^2\n`+
              `tip: ì•„ë˜ê°€ + ì¢Œí‘œì¼ ë•Œ gëŠ” ì–‘ìˆ˜ë¡œ ë‚˜ì™€ì•¼ í•©ë‹ˆë‹¤.`;

          }else{
            // shuttle: a vs v^2
            const v2 = v.map(x => x*x);
            const fit = linFit(v2, a);
            // a = p + q v^2  => q â‰ˆ -k, p â‰ˆ g
            const gEst = fit.p;
            const kEst = -fit.q;
            const vT = kEst>0 ? Math.sqrt(gEst/kEst) : NaN;

            // scatter a vs v^2
            const pts=[];
            for(let i=0;i<t.length;i++) if(isFinite(v2[i]) && isFinite(a[i])) pts.push({x:v2[i], y:a[i]});
            const line=[];
            const xmin = Math.min(...pts.map(p=>p.x));
            const xmax = Math.max(...pts.map(p=>p.x));
            if(isFinite(xmin) && isFinite(xmax)){
              line.push({x:xmin, y: fit.p + fit.q*xmin});
              line.push({x:xmax, y: fit.p + fit.q*xmax});
            }

            setChart(chart2, [
              {label:'a vs vÂ²', data: pts, parsing:false, showLine:false, pointRadius:2, borderWidth:0},
              {label:'ì„ í˜• í”¼íŒ…', data: line, parsing:false, borderWidth:2, pointRadius:0},
            ]);

            fitResult.innerHTML =
              `model: a = p + q v^2\n`+
              `pâ‰ˆg=${gEst.toFixed(4)} , q=${fit.q.toFixed(6)}\n`+
              `kâ‰ˆ-q=${kEst.toFixed(6)} (ë‹¨ìœ„ëŠ” ë°ì´í„° ìŠ¤ì¼€ì¼ì— ì˜ì¡´)\n`+
              `v_Tâ‰ˆsqrt(g/k)=${isFinite(vT)?vT.toFixed(4):'NaN'} m/s\n`+
              `n=${fit.n} (ìœ íš¨ ë°ì´í„° ì )`;
          }
        }
      });
    });

    // ---------- Simulation ----------
    const simModel = document.getElementById('simModel');
    const simG = document.getElementById('simG');
    const simH = document.getElementById('simH');
    const simDt = document.getElementById('simDt');
    const simB = document.getElementById('simB');
    const simK = document.getElementById('simK');
    const runSim = document.getElementById('runSim');
    const simSummary = document.getElementById('simSummary');

    function accel(v, g, b, k, model){
      if(model==='none') return g;
      if(model==='linear') return g - b*v;
      return g - k*v*v;
    }

    runSim.addEventListener('click', () => {
      const g = Number(simG.value);
      const H = Number(simH.value);
      const dt = Number(simDt.value);
      const b = Number(simB.value);
      const k = Number(simK.value);
      const model = simModel.value;

      let t=0, y=0, v=0;
      const T=[], Y=[], V=[], A=[];
      const maxSteps = 200000;
      let steps=0;
      while(y < H && steps < maxSteps){
        const a = accel(v,g,b,k,model);
        v = v + a*dt;
        y = y + v*dt;
        t = t + dt;
        T.push(t); Y.push(y); V.push(v); A.push(a);
        steps++;
        if(t>30) break;
      }

      setChart(simChart, [
        {label:'y(t)', data: toPoints(T,Y), parsing:false, borderWidth:2, pointRadius:0},
        {label:'v(t)', data: toPoints(T,V), parsing:false, borderWidth:2, pointRadius:0},
        {label:'a(t)', data: toPoints(T,A), parsing:false, borderWidth:2, pointRadius:0},
      ]);

      let vT = NaN;
      if(model==='quad' && k>0) vT = Math.sqrt(g/k);
      if(model==='linear' && b>0) vT = g/b;

      simSummary.innerHTML =
        `model=${model}\n`+
        `H=${H} m, dt=${dt} s\n`+
        `time_to_hitâ‰ˆ${t.toFixed(3)} s\n`+
        `v_endâ‰ˆ${v.toFixed(3)} m/s\n`+
        `v_Tâ‰ˆ${isFinite(vT)?vT.toFixed(3):'â€”'} (ëª¨ë¸ì— ë”°ë¼ ì •ì˜)`;
    });

    // Theme changes should refresh chart label colors
    const observer = new MutationObserver(() => {
      // rebuild options colors
      [chart1, chart2, simChart].forEach(c => {
        c.options.plugins.legend.labels.color = getComputedStyle(document.body).getPropertyValue('--muted');
        c.options.plugins.title.color = getComputedStyle(document.body).getPropertyValue('--text');
        c.options.scales.x.ticks.color = getComputedStyle(document.body).getPropertyValue('--muted');
        c.options.scales.y.ticks.color = getComputedStyle(document.body).getPropertyValue('--muted');
        c.options.scales.x.grid.color = getComputedStyle(document.body).getPropertyValue('--line');
        c.options.scales.y.grid.color = getComputedStyle(document.body).getPropertyValue('--line');
        c.update();
      });
    });
    observer.observe(document.body, {attributes:true, attributeFilter:['data-theme']});
  </script>
</body>
</html>
