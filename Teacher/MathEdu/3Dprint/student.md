# 학생용 활동지(심화): 미분과 적분으로 최적화하는 3D 프린터의 궤적  
## 직선의 한계를 넘어 — (G-code 선형 보간 → NURBS → 오차·속도·저크 최적화)

대상: 고2~고3(미적분/기하/물리/정보 심화)  
총 4차시(50분×4, 블록타임 권장)

---

## 0) 기본 정보
- 이름: ____________  학번: ______  조: ____  날짜: ____/____  
- 역할(체크): ☐ 실험/기록 ☐ 기하·증명 ☐ GeoGebra ☐ Python ☐ 발표/정리

---

## 1) 학습 목표(체크리스트)
☐ G-code의 **선형 보간**이 왜 곡선에서 한계를 갖는지 설명할 수 있다. :contentReference[oaicite:0]{index=0}  
☐ 현 오차(Chord error)를 **정확식→근사식**으로 유도할 수 있다. :contentReference[oaicite:1]{index=1}  
☐ 매개변수 곡선에서 속도와 \(u\) 업데이트를 **연쇄법칙 + 테일러 급수**로 유도할 수 있다. :contentReference[oaicite:2]{index=2}  
☐ 곡률반경 \(\rho\)와 허용오차 \(e_{\max}\)로부터 **속도 제한식**을 설계할 수 있다. :contentReference[oaicite:3]{index=3}  
☐ (심화) 저크 제한이 왜 필요한지, **S-curve**의 미분·적분 구조로 설명할 수 있다. :contentReference[oaicite:4]{index=4}  

---

## 2) 전체 흐름(너희가 할 일)
1차시: 실험·관찰(인간 CNC)  
2차시: 단순화·시뮬(직선 근사 vs NURBS 개념)  
3차시: 수식화 1(현 오차 증명 + 곡선 길이 적분)  
4차시: 수식화 2(테일러 보간 + 속도·저크 제한 설계)

---

# 1차시 활동지 — 실험 & 관찰
## A. 인간 CNC 실험(아날로그 시뮬)
### 준비물
모눈종이, 자, 펜, 컴퍼스(또는 원형 물체), 스톱워치

### 미션
반지름 \(R=5\,\text{cm}\) 원을 “직선만”으로 그린다.

- Case A(저해상도): 원 위 점 6개 → 정육각형  
- Case B(고해상도): 원 위 점 36개 → 정36각형  

> **규칙:** 가능한 일정한 속도로, 꼭짓점에서 멈추지 말고 그릴 것.

### 기록 1: 그리기 시간
- Case A 소요 시간: ______ s  
- Case B 소요 시간: ______ s  
- 느낀 점(데이터가 많아지면 왜 더 힘든가?): _______________________

### 기록 2: “튐/진동” 관찰
- 꼭짓점에서 손이 튀는 느낌이 더 큰 쪽: ☐ A ☐ B ☐ 비슷  
- 이유(속도 벡터 관점으로 설명):  
  ___________________________________________________________

### 토의 질문(1차시 마무리)
- 직선 조각이 많아질수록 더 매끈해지는 것 같지만, 왜 오히려 더 ‘힘들어지는’가?  
  (힌트: 명령 개수 증가 → 처리/전송 부담, 방향 급변) :contentReference[oaicite:5]{index=5}  
  ___________________________________________________________

---

# 2차시 활동지 — 단순화 & 시뮬레이션(GeoGebra/Python)
## B. 직선 근사 오차가 어떻게 줄어드는지 실험(시각화)
### (GeoGebra) 설정
- 반지름 4인 원을 그리고, 점 \(n\)개를 찍어 다각형 생성.
- \(n\)을 바꾸며 최대 현 오차(원과 다각형 사이 최대거리)를 측정.

### 측정표(최대 현 오차 \(e_n\))
| n(분할 수) | 6 | 12 | 24 | 48 | 96 |
|---:|---:|---:|---:|---:|---:|
| 최대 오차 \(e_n\) (픽셀/단위) | | | | | |

### 질문 1: 수렴 속도 추측
- \(n\)을 2배 늘리면 \(e_n\)은 대략 ☐ 1/2 ☐ 1/4 ☐ 1/8 로 줄어든다(관찰 기반)
- 근거: ______________________________________________________

## C. NURBS 개념(수식은 이해 중심)
NURBS는
\[
C(u)=\frac{\sum_{i=0}^{n}N_{i,p}(u)w_iP_i}{\sum_{i=0}^{n}N_{i,p}(u)w_i}
\]
형태로 “제어점+가중치+기저함수”로 곡선을 정의한다. :contentReference[oaicite:6]{index=6}  

### 질문 2: 왜 NURBS가 데이터 압축인가?
- 직선 근사(점 수천개) vs NURBS(제어점 몇 개) 비교로 설명:  
  ___________________________________________________________

---

# 3차시 활동지 — 수식화 1: 현 오차 증명 + 곡선 길이 적분
## D. 현 오차(Chord error) 정확식 유도
### 상황
곡률반경 \(R\)인 원호를 길이 \(L\)인 현으로 근사한다.  
현의 중점에서 원호까지 최대 거리 = \(e\).

### 1) 정확식(기하)
직각삼각형에서
\[
d=\sqrt{R^2-\left(\frac{L}{2}\right)^2}
\]
이므로
\[
e=R-d=R-\sqrt{R^2-\left(\frac{L}{2}\right)^2}
=R\left(1-\sqrt{1-\frac{L^2}{4R^2}}\right).
\]
(여기까지 전개를 너희가 설명할 수 있어야 함)

- 빈칸 채우기: \(d=\) ______________________________  
- \(e=\) ___________________________________________

## E. 근사식(테일러/무리함수 근사) 증명
\(x=\frac{L^2}{4R^2}\ll 1\)일 때  
\[
\sqrt{1-x}\approx 1-\frac{x}{2}
\]
를 사용하여 \(e\approx \frac{L^2}{8R}\)를 얻어라.

### 2) 유도 공간(필수)
\[
e=R\left(1-\sqrt{1-x}\right)\approx R\left(1-\left(1-\frac{x}{2}\right)\right)=R\cdot\frac{x}{2}
\]
여기서 \(x=\frac{L^2}{4R^2}\)이므로
\[
e\approx R\cdot\frac{1}{2}\cdot\frac{L^2}{4R^2}=\frac{L^2}{8R}.
\]

- 최종 근사식: \(\boxed{e\approx \frac{L^2}{8R}}\)

### 3) 공학 변수로 바꾸기
한 보간 주기 \(T\) 동안 속력 \(V_s\)로 이동하면 \(L\approx V_sT\).  
따라서
\[
\boxed{e\approx \frac{(V_sT)^2}{8R}}
\]
(논문에서도 동일한 형태로 사용) :contentReference[oaicite:7]{index=7}

---

## F. 곡선 길이와 정적분(구분구적법 연결)
매개변수 곡선 \(C(u)=(x(u),y(u))\)의 길이:
\[
S=\int_a^b\sqrt{\left(\frac{dx}{du}\right)^2+\left(\frac{dy}{du}\right)^2}\,du
\]
### 질문 3: “직선 잔뜩 이어붙이기”가 왜 적분의 근사인가?
구분구적법 관점으로 2~3문장 설명:  
_____________________________________________________________

---

# 4차시 활동지 — 수식화 2: 테일러 보간 + 속도·저크 제한
## G. 연쇄법칙으로 \(u'(t)\) 유도(필수)
속력 \(V_s=\frac{ds}{dt}\). 또한
\[
\frac{ds}{du}=\|C'(u)\|
\]
이므로
\[
V_s=\|C'(u)\|\frac{du}{dt}\Rightarrow
\boxed{\frac{du}{dt}=\frac{V_s}{\|C'(u)\|}}.
\]
(논문에서도 같은 형태로 전개) :contentReference[oaicite:8]{index=8}

### 질문 4: 위 식의 의미(말로 설명)
“\(\|C'(u)\|\)”가 크면 같은 \(u\) 변화가 실제 거리에서 더 크게 움직인다.  
따라서 …(완성):  
_____________________________________________________________

## H. 테일러 급수로 실시간 보간 공식 만들기
### 1) 1차(기본)
\[
u_{k+1}\approx u_k + T\cdot \frac{V_s}{\|C'(u_k)\|}
\]
- 이 식이 의미하는 바: “다음 매개변수 = 현재 + (이동거리/확장비율)”  
설명(2문장): _______________________________________________

### 2) 2차(심화 선택)
\[
u_{k+1}=u_k + T u'_k + \frac{T^2}{2}u''_k
\]
논문은 \(u''\)까지 계산해 정밀도를 높이는 2차 보간을 제시한다. :contentReference[oaicite:9]{index=9}  
(심화팀은 논문 식(10) 형태를 참고해 구현해도 됨)

---

## I. 곡률반경 \(\rho\)와 속도 제한(최적화 핵심)
곡률반경(일반형):
\[
\boxed{\rho=\frac{\|C'(u)\|^3}{\|C'(u)\times C''(u)\|}}
\]
:contentReference[oaicite:10]{index=10}

현 오차 근사:
\[
e\approx \frac{(V_sT)^2}{8\rho}
\]
이때 \(e\le e_{\max}\)이면
\[
\boxed{V_s\le \frac{1}{T}\sqrt{8\rho e_{\max}}}.
\]
(논문은 \(\rho\)가 작아지면 속도를 줄이는 규칙을 제안) :contentReference[oaicite:11]{index=11}

### 질문 5: 급커브에서 속도를 줄여야 하는 이유(수식 기반)
\(\rho\)가 작아지면(곡률 큼) 위 부등식에서 \(V_s\)의 상한이 _________ (증가/감소)한다.  
따라서 …(완성): ____________________________________________

---

## J. 저크(Jerk) 제한과 S-curve(심화)
저크 \(J=\frac{da}{dt}\).  
저크가 일정하면:
\[
a(t)=a_0+Jt,\quad
v(t)=v_0+a_0t+\frac12Jt^2,\quad
s(t)=s_0+v_0t+\frac12a_0t^2+\frac16Jt^3.
\]
Hui 논문은 look-ahead와 함께 S-shaped 가감속(저크 제한)을 다룬다. :contentReference[oaicite:12]{index=12}  

### 질문 6: 왜 사다리꼴 속도(등가속)보다 S-curve가 좋은가?
“가속도의 변화” 관점에서 2~3문장 설명:  
_____________________________________________________________

---

## 5) 미니 프로젝트(모둠 과제)
아래 중 **1개 이상 선택**하여 결과를 세미나 형식으로 발표.

### 프로젝트 A: \(e_n\) vs \(n\) 로그–로그 분석
- 데이터로 \(e_n \propto 1/n^k\)에서 \(k\) 추정
- (목표) \(k\approx 2\) 확인

### 프로젝트 B: 1차 vs 2차 테일러 보간 비교
- 같은 \(T\)에서 위치 오차/현 오차 비교
- (목표) 2차가 왜 더 정밀한지 실험적으로 보여주기

### 프로젝트 C: “허용오차 기반 속도 제어기” 설계
- \(T,e_{\max}\)를 정하고, \(\rho(u)\)를 계산해 \(V_s(u)\) 프로파일 생성  
- (목표) 급커브에서 자동 감속되는 속도 그래프 만들기

---

## 6) 제출물 체크리스트
☐ 1차시 실험 결과(시간/관찰)  
☐ 2차시 오차 표 + 그래프(가능하면 로그–로그)  
☐ 3차시 현 오차 증명(정확식→근사식)  
☐ 4차시 \(u'(t)\) 유도 + 속도 제한식 유도  
☐ (선택) 저크/S-curve 설명 또는 시뮬 결과  
☐ 프로젝트 발표자료(1~3슬라이드 또는 1쪽 보고서)

---

## 7) 확장 질문(탐구용)
1) \(e_{\max}\)를 절반으로 줄이면 평균 속도(가공시간)는 얼마나 변할까?  
2) 데이터 병목(직선 명령 폭증)이 실제 컨트롤러에서 어떻게 나타날까? :contentReference[oaicite:13]{index=13}  
3) “곡률 기반 감속”과 “저크 기반 감속”은 서로 어떤 관계가 있을까?

---

## 8) 메모
- 오늘 가장 인상 깊었던 식/아이디어 1개: __________________________  
- 다음 시간에 더 확인하고 싶은 것: _________________________________
