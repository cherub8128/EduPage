<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3D 프린터 궤적 최적화 - NURBS와 미적분</title>

    <!-- Modern Design System -->
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/components/report.css" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap"
        rel="stylesheet" />

    <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <!-- Showdown -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
</head>

<body>
    <!-- Back Button -->
    <a href="../index.html" class="m-back-btn" aria-label="Back">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
    </a>

    <div class="container pt-lg pb-lg">
        <header class="modern-header mb-8 flex justify-between items-end flex-wrap gap-4">
            <div>
                <div class="mb-2">
                    <span class="m-badge"
                        style="background: linear-gradient(135deg, #7c3aed, #2563eb); color: white">Math &
                        Engineering</span>
                </div>
                <h1>3D 프린터 궤적 최적화</h1>
                <p class="text-neutral-600">미분·적분으로 NURBS 곡선을 실시간 보간하기</p>
            </div>
            <div class="flex gap-2 print-hidden">
                <button id="export-md" class="m-btn secondary small"><span>📝 MD</span></button>
                <button id="export-html" class="m-btn secondary small"><span>🌐 HTML</span></button>
                <button id="export-pdf" class="m-btn primary small"><span>📄 PDF</span></button>
            </div>
        </header>

        <main class="flex flex-col gap-6">

            <!-- Navigation Cards -->
            <section class="m-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 1rem">
                <a href="simulation.html" class="block text-decoration-none transform transition hover:-translate-y-1">
                    <div class="m-card h-full hover:shadow-lg transition-shadow border-l-4 border-blue-500 p-4">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xl">🎮</span>
                            <h3 class="font-bold m-0 text-neutral-800">인터랙티브 시뮬레이션</h3>
                        </div>
                        <p class="text-xs text-neutral-600">베지어 곡선 조작, 적응형 세분화</p>
                    </div>
                </a>
                <a href="theory.html" class="block text-decoration-none transform transition hover:-translate-y-1">
                    <div class="m-card h-full hover:shadow-lg transition-shadow border-l-4 border-purple-500 p-4">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xl">📚</span>
                            <h3 class="font-bold m-0 text-neutral-800">이론 가이드 (교사용)</h3>
                        </div>
                        <p class="text-xs text-neutral-600">현 오차, 테일러 보간, 저크 제한</p>
                    </div>
                </a>
                <a href="student.html" class="block text-decoration-none transform transition hover:-translate-y-1">
                    <div class="m-card h-full hover:shadow-lg transition-shadow border-l-4 border-green-500 p-4">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xl">📝</span>
                            <h3 class="font-bold m-0 text-neutral-800">학생 활동지</h3>
                        </div>
                        <p class="text-xs text-neutral-600">인간 CNC 실험, 수식 유도, 시뮬레이션</p>
                    </div>
                </a>
            </section>

            <!-- Student Info -->
            <section class="m-card">
                <div class="m-grid" style="grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <label class="font-bold text-sm block mb-1">학번</label>
                        <input id="student-id" class="m-input savable" placeholder="예: 30212">
                    </div>
                    <div>
                        <label class="font-bold text-sm block mb-1">이름</label>
                        <input id="student-name" class="m-input savable" placeholder="예: 홍길동">
                    </div>
                </div>
            </section>

            <!-- 핵심 아이디어 -->
            <section class="m-card bg-purple-50">
                <p class="text-purple-900">
                    <strong>핵심 한 줄:</strong> "곡선(연속)을 기계(이산)가 따라가려면, 오차·속도·가속도·저크를 <strong>수학적으로 제한</strong>해야 한다."
                </p>
            </section>

            <!-- Step 1: 현상 관찰 -->
            <section class="m-card">
                <h2 class="text-xl font-bold mb-4">Step 1: 문제 인식</h2>

                <div class="m-grid" style="grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                    <div class="bg-red-50 p-4 rounded-lg border border-red-100">
                        <strong class="text-red-700 block mb-2">문제: 직선 근사 (G01)</strong>
                        <ul class="text-sm list-disc pl-4 space-y-1">
                            <li>곡선을 수천 개의 짧은 직선으로 쪼갬</li>
                            <li>G-code 파일이 커져 전송/처리 병목</li>
                            <li>꼭짓점마다 속도 방향 급변 → 진동</li>
                        </ul>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg border border-green-100">
                        <strong class="text-green-700 block mb-2">해결: NURBS 보간 (G06.2)</strong>
                        <ul class="text-sm list-disc pl-4 space-y-1">
                            <li>제어점 몇 개로 곡선 정의 (데이터 압축)</li>
                            <li>제어기가 실시간으로 다음 점 계산</li>
                            <li>매끄러운 속도 변화 가능</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Step 2: 수학적 모델링 -->
            <section class="m-card">
                <h2 class="text-xl font-bold mb-4">Step 2: 수학적 모델링</h2>

                <h3 class="font-bold text-sm mb-2">현 오차 (Chord Error)</h3>
                <p class="text-sm text-neutral-600 mb-2">곡률반경 $R$인 원호를 길이 $L$인 현으로 근사할 때:</p>
                <div class="p-4 bg-gray-50 rounded-lg text-center mb-4">
                    $$ e = R - \sqrt{R^2 - \left(\frac{L}{2}\right)^2} \approx \frac{L^2}{8R} $$
                </div>

                <h3 class="font-bold text-sm mb-2">속도와 매개변수 연결</h3>
                <p class="text-sm text-neutral-600 mb-2">연쇄법칙으로 $u$ 업데이트:</p>
                <div class="p-4 bg-blue-50 rounded-lg text-center">
                    $$ \frac{du}{dt} = \frac{V_s}{|C'(u)|} $$
                    <p class="text-xs text-blue-700 mt-2">$V_s$: 속력, $C'(u)$: 곡선의 도함수</p>
                </div>
            </section>

            <!-- Step 3: 인터랙티브 시뮬레이션 -->
            <section class="m-card">
                <h2 class="text-xl font-bold mb-4">Step 3: 인터랙티브 시뮬레이션</h2>
                <p class="text-sm text-neutral-600 mb-4">
                    베지어 곡선을 직접 조작하며 현 오차, 적응형 세분화, NURBS 보간의 장점을 탐구하세요.
                </p>

                <div class="m-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                    <div class="p-4 bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg border border-purple-100">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-2xl">🖱️</span>
                            <h3 class="font-bold text-sm text-purple-900">드래그 조작</h3>
                        </div>
                        <p class="text-xs text-purple-700">제어점을 드래그하여 곡선 모양 변경</p>
                    </div>
                    <div class="p-4 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-100">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-2xl">📊</span>
                            <h3 class="font-bold text-sm text-blue-900">실시간 통계</h3>
                        </div>
                        <p class="text-xs text-blue-700">현 오차, 오차율, 압축률 즉시 확인</p>
                    </div>
                    <div class="p-4 bg-gradient-to-br from-cyan-50 to-teal-50 rounded-lg border border-cyan-100">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-2xl">▶️</span>
                            <h3 class="font-bold text-sm text-cyan-900">애니메이션</h3>
                        </div>
                        <p class="text-xs text-cyan-700">적응형 알고리즘 과정을 단계별로 관찰</p>
                    </div>
                </div>

                <a href="simulation.html" class="block">
                    <button class="m-btn primary w-full" style="padding: 1rem; font-size: 1rem;">
                        🎮 인터랙티브 시뮬레이터 열기 →
                    </button>
                </a>
            </section>

            <!-- Step 4: 결론 -->
            <section class="m-card">
                <h2 class="text-xl font-bold mb-4">Step 4: 탐구 결론</h2>
                <div class="editable-container">
                    <textarea id="conclusion" class="savable markdown-input"
                        placeholder="### 결론&#10;1. 직선 근사의 한계&#10;2. 현 오차의 수학적 유도&#10;3. n과 오차의 관계 (1/n² 스케일링)&#10;4. NURBS의 장점"></textarea>
                    <div class="markdown-preview"></div>
                </div>
            </section>

        </main>

        <footer class="mt-8 text-center text-sm text-muted print-hidden">
            <div id="autosave-status" class="flex items-center justify-center gap-2 opacity-0 transition-opacity">
                <span id="autosave-icon-saved" class="text-green-600 hidden">✅ 저장됨</span>
            </div>
            <p class="mt-4">MathEdu Project 2025.</p>
        </footer>
    </div>

    <script type="module">
        import { ReportManager } from '../js/report-core.js';
        const report = new ReportManager('3dprint-project-v1');
        report.init();
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(document.body, {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "$", right: "$", display: false }
                ]
            });
        });
    </script>
</body>

</html>