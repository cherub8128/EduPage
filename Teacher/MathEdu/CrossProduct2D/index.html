<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2D 벡터 연산 탐구 보고서 (perp·dot)</title>

  <!-- Modern Design System -->
  <link rel="stylesheet" href="../css/main.css" />
  <link rel="stylesheet" href="../css/components/report.css" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/naen-nae/d2coding/d2coding-subset.css">

  <!-- Libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <style>
    /* Custom Color Overrides for this Project */
    :root {
      --a: #10b981;
      --b: #f59e0b;
    }
  </style>
</head>

<body>

  <!-- Back Button -->
  <a href="../index.html" class="m-back-btn" aria-label="Back">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2">
      <line x1="19" y1="12" x2="5" y2="12"></line>
      <polyline points="12 19 5 12 12 5"></polyline>
    </svg>
  </a>

  <div class="container pt-lg pb-lg">

    <!-- Header -->
    <header class="modern-header flex justify-between items-end flex-wrap gap-4">
      <div>
        <div class="mb-2">
          <span class="m-badge" style="background:var(--grad-blue); color:white;">Interactive Report</span>
        </div>
        <h1>2D 벡터 연산 탐구 보고서</h1>
        <p>perp·dot 관점에서의 면적과 토크 해석</p>
      </div>
      <div class="flex gap-2 print-hidden">
        <a href="advanced.html" class="m-btn secondary small">
          <span>📚 심화 이론 가이드</span>
        </a>
        <button id="floatOpen" class="m-btn secondary small">
          <span>⚙️ 시뮬레이션 옵션</span>
        </button>
        <button id="export-pdf" class="m-btn primary small">
          <span>📄 PDF 저장</span>
        </button>
      </div>
    </header>

    <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-6 flex gap-3 text-sm text-blue-900 print-hidden">
      <div style="font-size:1.2rem;">💡</div>
      <div>
        <strong>PDF 저장 팁:</strong> 인쇄 설정에서 "PDF로 저장"을 선택하고, 머리글/바닥글 옵션을 해제하세요.
      </div>
    </div>

    <main id="report-root" class="flex flex-col gap-6">

      <!-- Student Info -->
      <section class="m-card">
        <div class="m-grid" style="grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div>
            <label for="student-id" class="font-bold text-sm block mb-1">학번</label>
            <input id="student-id" class="m-input savable" placeholder="예: 30212">
          </div>
          <div>
            <label for="student-name" class="font-bold text-sm block mb-1">이름</label>
            <input id="student-name" class="m-input savable" placeholder="예: 홍길동">
          </div>
        </div>
        <div class="mt-4 p-4 bg-gray-50 rounded-xl text-sm">
          <strong class="block mb-2 text-neutral-700">학습 목표</strong>
          <ul class="list-disc pl-5 text-muted space-y-1">
            <li>\( \mathbf a\,{}^{\perp}\!\cdot\,\mathbf b \)의 기하학적 의미(부호 있는 면적) 이해</li>
            <li>토크 \( \tau=\mathbf r\,{}^{\perp}\!\cdot\,\mathbf F \)의 2D 표현</li>
            <li>회전 분해 및 슈레이스 공식과의 연결</li>
          </ul>
        </div>
      </section>

      <!-- Navigation (Jump Links) -->
      <nav class="flex flex-wrap gap-2 print-hidden">
        <a href="#observe" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">관찰</a>
        <a href="#model" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">모델링</a>
        <a href="#sim" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">시뮬레이션</a>
        <a href="#math" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">수식화</a>
        <a href="#exercises" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">연습문제</a>
        <a href="#deep" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">심화탐구</a>
      </nav>

      <!-- 1. Observe -->
      <section id="observe" class="m-card">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-bold">1. 현상 관찰 & 문제 설정</h2>
          <span class="m-badge">Observation</span>
        </div>

        <div class="mb-6">
          <label class="font-bold text-sm block mb-2">관찰 상황 요약</label>
          <div class="editable-container">
            <textarea id="A1" class="savable markdown-input"
              placeholder="- 예: 문 손잡이를 밀고/당길 때의 회전력(토크) 차이 관찰"></textarea>
            <div class="markdown-preview"></div>
          </div>
        </div>

        <div class="mb-4">
          <div class="font-bold text-sm mb-2">관찰 자료 (Gallery)</div>
          <div id="gallery-drop" class="dropzone">
            이미지를 끌어다 놓거나 추가하세요.
          </div>
          <div class="flex gap-2 mt-2">
            <input id="gallery-input" type="file" accept="image/*" multiple class="hidden">
            <button id="gallery-add" class="m-btn small secondary">+ 이미지 추가</button>
            <button id="gallery-clear" class="m-btn small secondary">초기화</button>
          </div>
          <div id="gallery" class="gallery-grid"></div>
        </div>

        <div class="mb-4">
          <label class="font-bold text-sm block mb-2">핵심 질문</label>
          <input id="C1" class="m-input savable" placeholder="예: 2D 평면에서 회전 방향을 부호로만 나타내도 충분한가?">
        </div>

        <div>
          <label class="font-bold text-sm block mb-2">예비 가설</label>
          <div class="editable-container">
            <textarea id="D1" class="savable markdown-input"
              placeholder="- 예: perp dot product의 값은 면적과 비례하며, 그 부호는 회전 방향을 결정한다."></textarea>
            <div class="markdown-preview"></div>
          </div>
        </div>
      </section>

      <!-- 2. Modeling -->
      <section id="model" class="m-card">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-bold">2. 모델링 (Simplification)</h2>
          <span class="m-badge">Modeling</span>
        </div>

        <div class="mb-4">
          <label class="font-bold text-sm block mb-1">핵심 벡터 정의</label>
          <div class="m-grid" style="grid-template-columns: 1fr 1fr; gap: 1rem;">
            <input id="F1" class="m-input savable" placeholder="벡터 a 정의 (예: 위치 벡터 r)">
            <input id="F2" class="m-input savable" placeholder="벡터 b 정의 (예: 힘 벡터 F)">
          </div>
        </div>

        <div>
          <label class="font-bold text-sm block mb-2">가정 (Assumptions)</label>
          <div class="editable-container">
            <textarea id="G1" class="savable markdown-input"
              placeholder="- 모든 운동은 2D 평면 상에서 일어난다.&#10;- 마찰은 무시하거나 상수로 가정한다."></textarea>
            <div class="markdown-preview"></div>
          </div>
        </div>
      </section>

      <!-- 3. Simulation -->
      <section id="sim" class="m-card">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-bold">3. perp·dot 시뮬레이션</h2>
          <button id="openControls" class="m-btn small secondary print-hidden">옵션 열기</button>
        </div>

        <div class="relative w-full bg-white border border-gray-200 rounded-xl overflow-hidden mb-4">
          <canvas id="playCanvas" height="600"
            style="width:100%; min-height: 600px; display:block; aspect-ratio: 4/3;"></canvas>
        </div>

        <div class="bg-gray-50 p-4 rounded-xl mb-6 text-sm text-neutral-700">
          <div class="m-grid" style="grid-template-columns: repeat(3, 1fr); gap: 1rem; text-align: center;">
            <div>\(\mathbf a \cdot \mathbf b =\) <strong id="dAB" class="text-lg">0</strong></div>
            <div>\(\mathbf a^\perp \cdot \mathbf b =\) <strong id="pAB" class="text-lg text-primary">0</strong></div>
            <div>\(\varphi =\) <strong id="angleAB" class="text-lg">0</strong>°</div>
          </div>
        </div>

        <div class="mb-4">
          <label class="font-bold text-sm block mb-2">실험 메모: 평행/수직 조건</label>
          <div class="editable-container">
            <textarea id="M1" class="savable markdown-input"
              placeholder="- 두 벡터가 평행할 때 perp dot 값은?&#10;- 두 벡터가 수직일 때 dot product 값은?"></textarea>
            <div class="markdown-preview"></div>
          </div>
        </div>
      </section>

      <!-- 4. Math -->
      <section id="math" class="m-card">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-bold">4. 수식화 (Formulation)</h2>
          <span class="m-badge">Math</span>
        </div>

        <div class="p-4 bg-gray-50 rounded-xl mb-4 text-sm">
          <strong class="block mb-2">유도 과제</strong>
          <ol class="list-decimal pl-5 space-y-1">
            <li>\( \tilde{\mathbf a} \cdot \mathbf b = a_x b_y - a_y b_x \) 유도</li>
            <li>회전 분해 식 \( \mathbf b = \cos\varphi \mathbf a + \sin\varphi \tilde{\mathbf a} \) 확인</li>
            <li>Shoelace Formula와 perp dot의 관계 설명</li>
          </ol>
        </div>

        <div>
          <label class="font-bold text-sm block mb-2">나의 유도 과정</label>
          <div class="editable-container">
            <textarea id="Dcalc1" class="savable markdown-input"
              placeholder="- 수식 유도 과정을 여기에 적으세요. LaTeX 문법 사용 가능 (예: $$ ... $$)"></textarea>
            <div class="markdown-preview"></div>
          </div>
        </div>
      </section>

      <!-- 5. Exercises -->
      <section id="exercises" class="m-card">
        <h2 class="text-xl font-bold mb-4">5. 계산 연습 (Exercises)</h2>
        <ul id="ex-list" class="space-y-6">
          <!-- Items added by script or hardcoded below for cleaner DOM -->
          <li class="mb-4">
            <div class="font-bold mb-2 ex-question">문항 1. \(\mathbf a=(1,2), \mathbf b=(3,1)\): \(\mathbf a\cdot\mathbf
              b\), \(\mathbf a^{\perp}\cdot\mathbf b\), \(\varphi\) 계산</div>
            <div class="editable-container">
              <textarea id="EX1" class="savable markdown-input" style="width:100%;" placeholder="- 풀이"></textarea>
              <div class="markdown-preview"></div>
            </div>
          </li>
          <li class="mb-4">
            <div class="font-bold mb-2 ex-question">문항 2. \(\mathbf a=(2,-1), \mathbf b=(-1,4)\): \(\tau=\mathbf
              a^{\perp}\cdot\mathbf b\) 물리 해석</div>
            <div class="editable-container">
              <textarea id="EX2" class="savable markdown-input" style="width:100%;" placeholder="- 풀이"></textarea>
              <div class="markdown-preview"></div>
            </div>
          </li>
          <li class="mb-4">
            <div class="font-bold mb-2 ex-question">문항 3. \((0,0)\to(4,0)\to(4,2)\to(0,2)\): 면적을 perp·dot 합으로 계산</div>
            <div class="editable-container">
              <textarea id="EX3" class="savable markdown-input" style="width:100%;" placeholder="- 풀이"></textarea>
              <div class="markdown-preview"></div>
            </div>
          </li>
          <li class="mb-4">
            <div class="font-bold mb-2 ex-question">문항 4. \(\mathbf a \parallel \mathbf b\)이면 \(\mathbf
              a^{\perp}\cdot\mathbf b=0\)인 기하적 이유</div>
            <div class="editable-container">
              <textarea id="EX4" class="savable markdown-input" style="width:100%;" placeholder="- 풀이"></textarea>
              <div class="markdown-preview"></div>
            </div>
          </li>
        </ul>
      </section>

      <!-- 6. Deep Dive (Report) -->
      <section id="deep" class="m-card">
        <h2 class="text-xl font-bold mb-4">6. 심화 탐구 보고서</h2>

        <div class="mb-4">
          <label class="font-bold text-sm block mb-1">연구 주제 (Research Topic)</label>
          <input id="research-topic" class="m-input savable" placeholder="예: 자전거 페달링 효율과 크랭크 각도의 관계 분석">
        </div>

        <div class="mb-4">
          <label class="font-bold text-sm block mb-1">연구 배경 및 목적</label>
          <div class="editable-container">
            <textarea id="intro" class="savable markdown-input" placeholder="연구의 동기와 목적, 관련 이론 배경 등을 서술"></textarea>
            <div class="markdown-preview"></div>
          </div>
        </div>

        <div class="mb-4">
          <label class="font-bold text-sm block mb-1">연구 결과</label>
          <div class="editable-container">
            <textarea id="results" class="savable markdown-input" placeholder="실험 데이터, 그래프 해석 등"></textarea>
            <div class="markdown-preview"></div>
          </div>
        </div>

        <div class="mb-4">
          <label class="font-bold text-sm block mb-1">결과 자료 (Gallery)</label>
          <div id="results-gallery-drop" class="dropzone">
            결과 이미지를 추가하세요.
          </div>
          <div class="flex gap-2 mt-2">
            <input id="results-gallery-input" type="file" accept="image/*" multiple class="hidden">
            <button id="results-gallery-add" class="m-btn small secondary">+ 이미지 추가</button>
            <button id="results-gallery-clear" id="results-gallery-clear" class="m-btn small secondary">초기화</button>
          </div>
          <div id="results-gallery" class="gallery-grid"></div>
        </div>

        <div>
          <label class="font-bold text-sm block mb-1">결론 및 제언</label>
          <div class="editable-container">
            <textarea id="conclusion" class="savable markdown-input" placeholder="결론 요약 및 향후 연구 방향"></textarea>
            <div class="markdown-preview"></div>
          </div>
        </div>
      </section>

    </main>

    <footer class="mt-8 text-center text-sm text-muted print-hidden">
      <div id="autosave-status" class="flex items-center justify-center gap-2 opacity-0 transition-opacity">
        <span id="autosave-icon-saving" class="hidden">💾 저장 중...</span>
        <span id="autosave-icon-saved" class="text-green-600 hidden">✅ 저장됨</span>
        <span id="autosave-text"></span>
      </div>
      <p class="mt-4">MathEdu Project 2025.</p>
    </footer>

  </div>

  <!-- Drawer / Sidebar for Controls -->
  <div id="drawer-backdrop"></div>
  <aside id="drawer">
    <div class="p-4 border-b flex justify-between items-center">
      <span class="font-bold text-lg">Options</span>
      <button id="floatClose" class="text-muted hover:text-black">✕</button>
    </div>
    <div class="p-4 flex flex-col gap-4 overflow-y-auto">

      <!-- Toggles -->
      <label class="flex justify-between items-center cursor-pointer">
        <span class="text-sm font-medium">격자 (Grid)</span>
        <input id="optGrid" type="checkbox" class="toggle savable" checked>
      </label>
      <label class="flex justify-between items-center cursor-pointer">
        <span class="text-sm font-medium">면적 채움 (Fill)</span>
        <input id="optFill" type="checkbox" class="toggle savable" checked>
      </label>
      <label class="flex justify-between items-center cursor-pointer">
        <span class="text-sm font-medium">각도 표시 (Angle)</span>
        <input id="optAngle" type="checkbox" class="toggle savable" checked>
      </label>
      <label class="flex justify-between items-center cursor-pointer">
        <span class="text-sm font-medium">보조선 (Guides)</span>
        <input id="optGuides" type="checkbox" class="toggle savable">
      </label>

      <hr class="border-gray-100">

      <!-- Sliders with .savable class for AutoSave -->
      <div>
        <label class="text-xs font-bold text-muted mb-1 block">Vector a Magnitude</label>
        <input id="magA" type="range" min="0.5" max="5" step="0.1" value="2.5" class="w-full savable">
      </div>
      <div>
        <label class="text-xs font-bold text-muted mb-1 block">Vector b Angle</label>
        <input id="angB" type="range" min="-179" max="180" step="1" value="35" class="w-full savable">
      </div>

      <div class="flex flex-col gap-2 mt-2">
        <button id="btnSnapOrtho" class="m-btn secondary small w-full justify-center">b ⟂ a (Snap)</button>
        <button id="btnSnapPara" class="m-btn secondary small w-full justify-center">b ∥ a (Snap)</button>
        <button id="btnReset" class="m-btn secondary small w-full justify-center">Reset</button>
      </div>

    </div>
  </aside>

  <!-- Logic (Module) -->
  <script type="module" src="script.js"></script>

</body>

</html>