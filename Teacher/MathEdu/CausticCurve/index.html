<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Caustic Curve íƒêµ¬ ë³´ê³ ì„œ</title>

    <!-- Modern Design System -->
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/components/report.css" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/naen-nae/d2coding/d2coding-subset.css">

    <!-- Libs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <style>
        .vis-container {
            background: white;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        canvas {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>

    <!-- Back Button -->
    <a href="../index.html" class="m-back-btn" aria-label="Back">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
    </a>

    <div class="container pt-lg pb-lg">

        <!-- Header -->
        <header class="modern-header flex justify-between items-end flex-wrap gap-4">
            <div>
                <div class="mb-2">
                    <span class="m-badge" style="background:var(--grad-primary); color:white;">One-Page Report</span>
                </div>
                <h1>Caustic Curve íƒêµ¬</h1>
                <p>ì»¤í”¼ì” ì†ì˜ ê¸°í•˜í•™: ë°˜ì‚¬ ê´‘ì„ ê³¼ í¬ë½ì„ </p>
            </div>
            <div class="flex gap-2 print-hidden">
                <button id="export-pdf" class="m-btn primary small">
                    <span>ğŸ“„ PDF ì €ì¥</span>
                </button>
            </div>
        </header>

        <main class="flex flex-col gap-6">

            <!-- Student Info -->
            <section class="m-card">
                <div class="m-grid" style="grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <label for="student-id" class="font-bold text-sm block mb-1">í•™ë²ˆ</label>
                        <input id="student-id" class="m-input savable" placeholder="ì˜ˆ: 30212">
                    </div>
                    <div>
                        <label for="student-name" class="font-bold text-sm block mb-1">ì´ë¦„</label>
                        <input id="student-name" class="m-input savable" placeholder="ì˜ˆ: í™ê¸¸ë™">
                    </div>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="flex flex-wrap gap-2 print-hidden">
                <a href="#step1" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">Step 1: ê´€ì°°</a>
                <a href="#step2" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">Step 2: ëª¨ë¸ë§</a>
                <a href="#step3" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">Step 3: ë¶„ì„</a>
                <a href="#step4" class="m-badge hover:bg-gray-200 cursor-pointer text-decoration-none">Step 4: ì‹¬í™”</a>
            </nav>

            <!-- Step 1: Observation -->
            <section id="step1" class="m-card">
                <h2 class="text-xl font-bold mb-4">Step 1: í˜„ìƒ ê´€ì°° & ë¬¸ì œ ë°œê²¬</h2>

                <div class="m-grid" style="grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;">
                    <div>
                        <strong class="block mb-2 text-sm text-neutral-600">ê´€ì°° ì˜ˆì‹œ</strong>
                        <img src="images/cup0.jpg" alt="Example" class="rounded-lg border w-full object-cover h-48">
                    </div>
                    <div>
                        <strong class="block mb-2 text-sm text-neutral-600">ë‚˜ì˜ ê´€ì°° ì‚¬ì§„</strong>
                        <div id="gallery-drop" class="dropzone p-4">
                            ê´€ì°° ì‚¬ì§„ì„ ì¶”ê°€í•˜ì„¸ìš”.
                        </div>
                        <div class="flex gap-2 mt-2">
                            <input id="gallery-input" type="file" accept="image/*" multiple class="hidden">
                            <button id="gallery-add" class="m-btn small secondary"
                                onclick="document.getElementById('gallery-input').click()">+ ì¶”ê°€</button>
                            <button id="gallery-clear" class="m-btn small secondary"
                                onclick="if(confirm('ì‚­ì œ?')) document.getElementById('gallery').innerHTML=''">ì´ˆê¸°í™”</button>
                        </div>
                        <div id="gallery" class="gallery-grid"></div>
                    </div>
                </div>

                <div class="mt-4">
                    <label class="font-bold text-sm block mb-2">ê´€ì°° ë‚´ìš© ê¸°ë¡</label>
                    <div class="editable-container">
                        <textarea id="observations" class="savable markdown-input"
                            placeholder="- ë¹›ì´ ë§Œë“œëŠ” ë¬´ëŠ¬ëŠ” í•˜íŠ¸ ëª¨ì–‘ê³¼ ë¹„ìŠ·í•˜ë‹¤.&#10;- ë¾°ì¡±í•œ ë¶€ë¶„(cusp)ì´ ìƒê¸´ë‹¤."></textarea>
                        <div class="markdown-preview"></div>
                    </div>
                </div>
            </section>

            <!-- Step 2: Modeling (Reflection) -->
            <section id="step2" class="m-card">
                <h2 class="text-xl font-bold mb-4">Step 2: ë°˜ì‚¬ ê´‘ì„  ëª¨ë¸ë§</h2>

                <div class="m-grid" style="grid-template-columns: 1fr 1fr; gap: 2rem;">
                    <div class="vis-container">
                        <canvas id="reflectionCanvas" width="400" height="400"></canvas>
                    </div>
                    <div class="flex flex-col gap-4 justify-center">
                        <div>
                            <label class="font-bold text-sm block mb-1">ë°˜ì‚¬ì  ê°ë„ (\(\theta\))</label>
                            <div class="flex items-center gap-2">
                                <input id="theta-slider" type="range" min="0" max="180" value="135"
                                    class="w-full savable">
                                <span id="theta-value" class="w-12 text-center font-mono text-sm">45Â°</span>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg text-sm text-neutral-700">
                            <p>â–ªï¸ <strong>ë°˜ì‚¬ì  P:</strong> \( P(\cos\theta, \sin\theta) \)</p>
                            <p>â–ªï¸ <strong>ë°˜ì‚¬ê°:</strong> ì…ì‚¬ê° = ë°˜ì‚¬ê°</p>
                        </div>
                    </div>
                </div>

                <div class="mt-6">
                    <label class="font-bold text-sm block mb-2">ì¦ëª…: ë°˜ì‚¬ ê´‘ì„  ë°©ì •ì‹ ìœ ë„</label>
                    <div class="editable-container">
                        <textarea id="proof-writing" class="savable markdown-input"
                            placeholder="ë°˜ì‚¬ ë²•ì¹™ì„ ì´ìš©í•˜ì—¬ ê´‘ì„ ì˜ ë°©ì •ì‹ì„ ìœ ë„í•´ë³´ì„¸ìš”."></textarea>
                        <div class="markdown-preview"></div>
                    </div>
                </div>
            </section>

            <!-- Step 3: Epicycloid -->
            <section id="step3" class="m-card">
                <h2 class="text-xl font-bold mb-4">Step 3: ì—í”¼ì‚¬ì´í´ë¡œì´ë“œì™€ í¬ë½ì„ </h2>

                <div class="m-grid" style="grid-template-columns: 1fr 1fr; gap: 2rem;">
                    <div class="vis-container">
                        <canvas id="epicycloidCanvas" width="400" height="400"></canvas>
                    </div>
                    <div class="flex flex-col gap-4">
                        <div>
                            <label class="font-bold text-sm block mb-1">ë¾°ì¡±ì  ê°œìˆ˜ (k)</label>
                            <div class="flex items-center gap-2">
                                <input id="k-slider" type="range" min="1" max="10" value="2" step="1"
                                    class="w-full savable">
                                <span id="k-value" class="w-8 text-center font-mono">2</span>
                            </div>
                        </div>
                        <div>
                            <label class="font-bold text-sm block mb-1">í¬ê¸° (r)</label>
                            <div class="flex items-center gap-2">
                                <input id="size-slider" type="range" min="10" max="50" value="25" step="1"
                                    class="w-full savable">
                                <span id="size-value" class="w-8 text-center font-mono">25</span>
                            </div>
                        </div>
                        <div>
                            <label class="font-bold text-sm block mb-1">ìƒì„± ê°ë„ (t)</label>
                            <div class="flex items-center gap-2">
                                <input id="epicycloid-slider" type="range" min="0" max="360" value="360"
                                    class="w-full savable">
                                <span id="epicycloid-value" class="w-12 text-center font-mono">360Â°</span>
                            </div>
                        </div>

                        <div class="p-3 bg-blue-50 text-blue-900 rounded-lg text-sm">
                            <strong>Hint:</strong> ì»¤í”¼ì”ì˜ ë¹› ë¬´ëŠ¬ëŠ” \(k=2\)ì¸ ì—í”¼ì‚¬ì´í´ë¡œì´ë“œ(Nephroid)ì…ë‹ˆë‹¤.
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 4: Deep Dive -->
            <section id="step4" class="m-card">
                <h2 class="text-xl font-bold mb-4">Step 4: ì‹¬í™” íƒêµ¬ ë³´ê³ ì„œ</h2>

                <div class="space-y-4">
                    <div>
                        <label class="font-bold text-sm block mb-1">íƒêµ¬ ì£¼ì œ</label>
                        <input id="inquiry-title" class="m-input savable" placeholder="ì˜ˆ: í¬ë¬¼ì„  ê±°ìš¸ì—ì„œì˜ í¬ë½ì„ ">
                    </div>
                    <div>
                        <label class="font-bold text-sm block mb-1">íƒêµ¬ ë‚´ìš© ë° ì‹œë®¬ë ˆì´ì…˜ ì½”ë“œ</label>
                        <div class="editable-container">
                            <textarea id="inquiry-code" class="savable markdown-input font-mono text-sm"
                                placeholder="Python/GeoGebra ì½”ë“œë‚˜ ë§í¬ë¥¼ ì—¬ê¸°ì— ì‘ì„±í•˜ì„¸ìš”."></textarea>
                            <div class="markdown-preview"></div>
                        </div>
                    </div>
                    <div>
                        <label class="font-bold text-sm block mb-1">ê²°ê³¼ ìë£Œ (ìŠ¤í¬ë¦°ìƒ·)</label>
                        <div id="results-gallery-drop" class="dropzone p-4">ê²°ê³¼ ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.</div>
                        <div class="flex gap-2 mt-2">
                            <input id="results-gallery-input" type="file" accept="image/*" multiple class="hidden">
                            <button id="results-gallery-add" class="m-btn small secondary"
                                onclick="document.getElementById('results-gallery-input').click()">+ ì¶”ê°€</button>
                            <button id="results-gallery-clear" class="m-btn small secondary"
                                onclick="if(confirm('ì‚­ì œ?')) document.getElementById('results-gallery').innerHTML=''">ì´ˆê¸°í™”</button>
                        </div>
                        <div id="results-gallery" class="gallery-grid"></div>
                    </div>

                    <div>
                        <label class="font-bold text-sm block mb-1">ê²°ë¡ </label>
                        <div class="editable-container">
                            <textarea id="inquiry-conclusion" class="savable markdown-input"
                                placeholder="ê²°ë¡  ë° ì œì–¸"></textarea>
                            <div class="markdown-preview"></div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <footer class="mt-8 text-center text-sm text-muted print-hidden">
            <div id="autosave-status" class="flex items-center justify-center gap-2 opacity-0 transition-opacity">
                <span id="autosave-icon-saving" class="hidden">ğŸ’¾ ì €ì¥ ì¤‘...</span>
                <span id="autosave-icon-saved" class="text-green-600 hidden">âœ… ì €ì¥ë¨</span>
                <span id="autosave-text"></span>
            </div>
            <p class="mt-4">MathEdu Project 2025.</p>
        </footer>

    </div>

    <!-- Logic -->
    <script type="module" src="script.js"></script>

</body>

</html>