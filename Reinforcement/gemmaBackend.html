<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemma 3 ì±„íŒ… AI ë°±ì—”ë“œ ë§Œë“¤ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #282c34; color: #abb2bf; }
        .slide { display: none; }
        .slide.active { display: block; }
        .code-highlight { background-color: rgba(255, 255, 0, 0.15); display: block; margin: -0.25rem -0.5rem; padding: 0.25rem 0.5rem; border-radius: 0.25rem; }
        pre[class*="language-"] { font-size: 0.9rem; line-height: 1.6; white-space: pre-wrap; word-break: break-all; }
        .explanation-box { background-color: #21252b; border-left: 4px solid #98c379; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto bg-[#21252b] rounded-xl shadow-2xl overflow-hidden">
        <div class="p-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white text-center">Gemma 3 ì±„íŒ… AI ë°±ì—”ë“œ ë§Œë“¤ê¸°</h1>
            <p class="text-center text-gray-400 mt-2">ì›¹ UIì™€ í†µì‹ í•˜ëŠ” íŒŒì´ì¬ ì„œë²„ë¥¼ êµ¬ì¶•í•´ë´…ì‹œë‹¤.</p>
        </div>

        <div id="slider-container" class="p-4 md:p-8 border-t border-gray-700 min-h-[500px]"></div>

        <div class="bg-[#282c34] p-4 flex justify-between items-center">
            <button id="prevBtn" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed">ì´ì „</button>
            <div id="slide-counter" class="text-white text-lg font-semibold"></div>
            <button id="nextBtn" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg transition duration-300">ë‹¤ìŒ</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        const slides = [
            {
                title: "1. ì•„í‚¤í…ì²˜ ì´í•´ ë° í”„ë¡ íŠ¸ì—”ë“œ ì¤€ë¹„",
                explanation: `
                    <p>ìš°ë¦¬ëŠ” ë‘ ê°œì˜ ë…ë¦½ì ì¸ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ ì„œë¡œ í†µì‹ í•˜ê²Œ í•  ê²ƒì…ë‹ˆë‹¤.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 text-center">
                        <div class="bg-gray-800 p-4 rounded-lg">
                            <p class="text-2xl">ğŸ–¥ï¸</p>
                            <p class="font-bold text-white">í”„ë¡ íŠ¸ì—”ë“œ (chat.html)</p>
                            <p class="text-sm text-gray-400">ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ëŠ” ì±„íŒ… UI.</p>
                        </div>
                        <div class="bg-gray-800 p-4 rounded-lg">
                            <p class="text-2xl">ğŸ</p>
                            <p class="font-bold text-white">ë°±ì—”ë“œ (app.py)</p>
                            <p class="text-sm text-gray-400">AI ëª¨ë¸ì„ ì‹¤í–‰í•˜ê³  ê³„ì‚°ì„ ì²˜ë¦¬í•˜ëŠ” íŒŒì´ì¬ ì„œë²„.</p>
                        </div>
                    </div>
                    <p class="mt-4">ë¨¼ì €, ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œë  ì±„íŒ… UI íŒŒì¼(<code class="bg-gray-700 p-1 rounded">chat.html</code>)ì„ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”. ì´ íŒŒì¼ì€ ìš°ë¦¬ê°€ ë§Œë“¤ ë°±ì—”ë“œ ì„œë²„ì™€ í†µì‹ í•˜ë„ë¡ ë¯¸ë¦¬ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
                     <div class="mt-4">
                        <a href="chat.html" download="chat.html" class="inline-block bg-teal-500 hover:bg-teal-400 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                            chat.html ë‹¤ìš´ë¡œë“œ
                        </a>
                    </div>
                `,
                code: ``
            },
            {
                title: "2. ë°±ì—”ë“œ ì„œë²„ ì¤€ë¹„í•˜ê¸° (Flask)",
                explanation: `
                    <p>íŒŒì´ì¬ìœ¼ë¡œ ì›¹ ì„œë²„ë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” <strong>Flask</strong>ë¼ëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í•  ê²ë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ(HTML)ì™€ ë°±ì—”ë“œ(Python)ê°€ ì„œë¡œ ë‹¤ë¥¸ ê³³ì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ, ë³´ì•ˆ ì •ì±…(CORS)ì„ í—ˆìš©í•´ì£¼ëŠ” ë„êµ¬ë„ í•¨ê»˜ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>
                `,
                code: `
# í„°ë¯¸ë„ì— ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
# transformers, torchëŠ” ì´ì „ì— ì„¤ì¹˜í–ˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
<span class="code-highlight">pip install Flask Flask-Cors</span>
                `
            },
            {
                title: "3. Gemma ëª¨ë¸ ë¡œë“œ ë° Flask ì„œë²„ ì„¤ì •",
                explanation: `
                    <p>ì´ì œ ë°±ì—”ë“œ íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸(<code class="bg-gray-700 p-1 rounded">app.py</code>)ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ê°€ì¥ ë¨¼ì €, í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ importí•˜ê³  Gemma ëª¨ë¸ì„ ë¡œë“œí•©ë‹ˆë‹¤.</p>
                    <p class="mt-2"><strong>ì¤‘ìš”:</strong> ëª¨ë¸ ë¡œë”©ì€ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ë¯€ë¡œ, ì„œë²„ê°€ ì²˜ìŒ ì‹œì‘ë  ë•Œ ë”± í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ë„ë¡ ì½”ë“œì˜ ë§¨ ìœ„ì— ë°°ì¹˜í•©ë‹ˆë‹¤.</p>
                `,
                code: `
# app.py
from flask import Flask, request, jsonify
from flask_cors import CORS
import torch
from transformers import pipeline

print("Loading Gemma 3 270M model...")
device = "cuda" if torch.cuda.is_available() else "cpu"
pipe = pipeline(
    "text-generation",
    model="google/gemma-3-270m-it",
    model_kwargs={"torch_dtype": torch.bfloat16},
    device=device,
)
print(f"Model loaded on {device}!")

<span class="code-highlight">app = Flask(__name__)</span>
<span class="code-highlight">CORS(app) # ëª¨ë“  ì™¸ë¶€ ìš”ì²­ì„ í—ˆìš©</span>
                `
            },
            {
                title: "4. API ì—”ë“œí¬ì¸íŠ¸ ë§Œë“¤ê¸°",
                explanation: `
                    <p>í”„ë¡ íŠ¸ì—”ë“œê°€ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ 'ì°½êµ¬'ë¥¼ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì„ <strong>API ì—”ë“œí¬ì¸íŠ¸</strong>ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.</p>
                    <p class="mt-2"><code class="bg-gray-700 p-1 rounded">@app.route('/chat', methods=['POST'])</code>ëŠ” "ëˆ„êµ°ê°€ ìš°ë¦¬ ì„œë²„ì˜ /chat ì£¼ì†Œë¡œ POST ë°©ì‹ì˜ ìš”ì²­ì„ ë³´ë‚´ë©´, ë°”ë¡œ ì•„ë˜ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´!" ë¼ëŠ” ì˜ë¯¸ì˜ ì•½ì†ì…ë‹ˆë‹¤.</p>
                `,
                code: `
# ... (ì´ì „ ì½”ë“œ) ...
app = Flask(__name__)
CORS(app)

<span class="code-highlight">@app.route('/chat', methods=['POST'])</span>
<span class="code-highlight">def chat():</span>
<span class="code-highlight">    # í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë³´ë‚¸ ëŒ€í™” ê¸°ë¡(JSON)ì„ ë°›ìŠµë‹ˆë‹¤.</span>
<span class="code-highlight">    data = request.json</span>
<span class="code-highlight">    messages = data.get('messages')</span>
<span class="code-highlight"></span>
<span class="code-highlight">    if not messages:</span>
<span class="code-highlight">        return jsonify({"error": "No messages provided"}), 400</span>
<span class="code-highlight"></span>
<span class="code-highlight">    # Gemma ëª¨ë¸ë¡œ ë‹µë³€ ìƒì„± (ë‹¤ìŒ ìŠ¬ë¼ì´ë“œì—ì„œ ê³„ì†)</span>
<span class="code-highlight">    # ...</span>
                `
            },
            {
                title: "5. Gemma ë‹µë³€ ìƒì„± ë° ë°˜í™˜",
                explanation: `
                    <p>í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°›ì€ ëŒ€í™” ê¸°ë¡ì„ Gemma íŒŒì´í”„ë¼ì¸ì— ì „ë‹¬í•˜ì—¬ AIì˜ ë‹µë³€ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
                    <p class="mt-2">ìƒì„±ëœ ë‹µë³€ì€ ë‹¤ì‹œ JSON í˜•íƒœë¡œ í”„ë¡ íŠ¸ì—”ë“œì— ëŒë ¤ì¤ë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œëŠ” ì´ JSONì„ ë°›ì•„ í™”ë©´ì— í‘œì‹œí•˜ê²Œ ë©ë‹ˆë‹¤.</p>
                `,
                code: `
@app.route('/chat', methods=['POST'])
def chat():
    data = request.json
    messages = data.get('messages')
    
    # Hugging Face íŒŒì´í”„ë¼ì¸ í˜•ì‹ì— ë§ê²Œ 'role'ê³¼ 'content'ë¥¼ ë§ì¶°ì¤ë‹ˆë‹¤.
    hf_messages = [{"role": msg["role"], "content": msg["content"]} for msg in messages]

<span class="code-highlight">    outputs = pipe(hf_messages, max_new_tokens=512, do_sample=True)</span>
<span class="code-highlight">    assistant_response = outputs[0][-1]["content"]</span>
<span class="code-highlight">    </span>
<span class="code-highlight">    # ìƒì„±ëœ ë‹µë³€ì„ JSON í˜•ì‹ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œì— ì‘ë‹µí•©ë‹ˆë‹¤.</span>
<span class="code-highlight">    return jsonify({"response": assistant_response})</span>
                `
            },
            {
                title: "6. ì™„ì„±ëœ ë°±ì—”ë“œ ìŠ¤í¬ë¦½íŠ¸",
                explanation: `
                    <p>ëª¨ë“  ì¡°ê°ì„ í•©ì¹˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì™„ì „í•œ ë°±ì—”ë“œ ì„œë²„ ì½”ë“œê°€ ë©ë‹ˆë‹¤. ì´ ì½”ë“œë¥¼ <code class="bg-gray-700 p-1 rounded">app.py</code>ë¡œ ì €ì¥í•˜ì„¸ìš”.</p>
                `,
                code: `
# app.py
from flask import Flask, request, jsonify
from flask_cors import CORS
import torch
from transformers import pipeline

# 1. ëª¨ë¸ ë¡œë”© (ì„œë²„ ì‹œì‘ ì‹œ í•œ ë²ˆë§Œ)
print("Loading Gemma 3 270M model...")
device = "cuda" if torch.cuda.is_available() else "cpu"
pipe = pipeline(
    "text-generation",
    model="google/gemma-3-270m-it",
    model_kwargs={"torch_dtype": torch.bfloat16},
    device=device,
)
print(f"Model loaded on {device}!")

# 2. Flask ì•± ì„¤ì •
app = Flask(__name__)
CORS(app)

# 3. API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
@app.route('/chat', methods=['POST'])
def chat():
    data = request.json
    messages = data.get('messages')

    if not messages:
        return jsonify({"error": "No messages provided"}), 400
    
    hf_messages = [{"role": msg["role"], "content": msg["content"]} for msg in messages]
    
    outputs = pipe(hf_messages, max_new_tokens=512, do_sample=True)
    assistant_response = outputs[0][-1]["content"]
    
    return jsonify({"response": assistant_response})

# 4. ì„œë²„ ì‹¤í–‰
if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
                `
            },
            {
                title: "7. ì‹¤í–‰í•˜ê³  ì¦ê¸°ê¸°!",
                explanation: `
                    <p>ì´ì œ ëª¨ë“  ì¤€ë¹„ê°€ ëë‚¬ìŠµë‹ˆë‹¤. ì•„ë˜ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•˜ì—¬ ë‚˜ë§Œì˜ AI ì±„íŒ… ì•±ì„ ì¦ê²¨ë³´ì„¸ìš”!</p>
                    <div class="explanation-box">
                        <p><strong>ì‹¤í–‰ ìˆœì„œ:</strong><br>
                        1. í„°ë¯¸ë„ì„ ì—´ê³  <code class="bg-gray-700 p-1 rounded">app.py</code>ì™€ <code class="bg-gray-700 p-1 rounded">chat.html</code>ì„ ê°™ì€ í´ë”ì— ì €ì¥í•©ë‹ˆë‹¤.<br>
                        2. í„°ë¯¸ë„ì—ì„œ <code class="bg-gray-700 p-1 rounded">python app.py</code>ë¥¼ ì…ë ¥í•˜ì—¬ <strong>ë°±ì—”ë“œ ì„œë²„ë¥¼ ë¨¼ì € ì‹¤í–‰</strong>í•©ë‹ˆë‹¤.<br>
                        3. ì„œë²„ê°€ ì‹¤í–‰ë˜ë©´, <code class="bg-gray-700 p-1 rounded">chat.html</code> íŒŒì¼ì„ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì—½ë‹ˆë‹¤.<br>
                        4. ì´ì œ ì±„íŒ…ì°½ì— ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ê³  AIì™€ ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
                        </p>
                    </div>
                `,
                code: ``
            }
        ];

        let currentSlide = 0;
        const sliderContainer = document.getElementById('slider-container');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const slideCounter = document.getElementById('slide-counter');

        function createSlide(slideData, index) {
            const slideElement = document.createElement('div');
            slideElement.className = 'slide p-4';
            slideElement.dataset.index = index;

            let codeHtml = '';
            if (slideData.code) {
                const tempDiv = document.createElement('div');
                const codeWithPlaceholders = slideData.code.trim()
                    .replace(/<span class="code-highlight">/g, '[[HIGHLIGHT_START]]')
                    .replace(/<\/span>/g, '[[HIGHLIGHT_END]]');
                tempDiv.textContent = codeWithPlaceholders;
                const finalCode = tempDiv.innerHTML
                    .replace(/\[\[HIGHLIGHT_START\]\]/g, '<span class="code-highlight">')
                    .replace(/\[\[HIGHLIGHT_END\]\]/g, '</span>');
                codeHtml = `<div class="mt-6 bg-[#282c34] rounded-lg overflow-hidden border border-gray-700"><pre class="language-python !text-sm !leading-relaxed"><code>${finalCode}</code></pre></div>`;
            }

            slideElement.innerHTML = `<div class="grid grid-cols-1 ${slideData.code ? 'md:grid-cols-2' : ''} gap-8 items-start"><div class="prose prose-invert max-w-none"><h2 class="text-2xl font-bold text-indigo-400 mb-4">${slideData.title}</h2><div class="text-gray-300 leading-relaxed space-y-2">${slideData.explanation}</div></div>${slideData.code ? `<div>${codeHtml}</div>` : ''}</div>`;
            return slideElement;
        }

        function updateSlider() {
            document.querySelectorAll('.slide').forEach((slide, index) => {
                slide.classList.toggle('active', index === currentSlide);
            });
            slideCounter.textContent = `${currentSlide + 1} / ${slides.length}`;
            prevBtn.disabled = currentSlide === 0;
            nextBtn.disabled = currentSlide === slides.length - 1;
            Prism.highlightAll();
        }

        prevBtn.addEventListener('click', () => { if (currentSlide > 0) { currentSlide--; updateSlider(); } });
        nextBtn.addEventListener('click', () => { if (currentSlide < slides.length - 1) { currentSlide++; updateSlider(); } });
        
        slides.forEach((slideData, index) => { sliderContainer.appendChild(createSlide(slideData, index)); });
        updateSlider();
    </script>
</body>
</html>
