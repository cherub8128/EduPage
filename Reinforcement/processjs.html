<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS/WebSocket 기반 AI 게임 제작 가이드 (다중 파일)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .step { scroll-margin-top: 80px; }
        .prompt-block, .code-block-provided { position: relative; }
        .copy-button { position: absolute; top: 0.8rem; right: 0.8rem; background-color: #4A5568; color: white; padding: 0.25rem 0.6rem; border-radius: 0.375rem; font-size: 0.8rem; cursor: pointer; transition: background-color 0.2s; }
        .copy-button:hover { background-color: #2D3748; }
        .copy-button.copied { background-color: #2F855A; }
        .user-input { background-color: #FEF3C7; border: 1px dashed #FBBF24; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem; }
        .download-section { background-color: #F0F9FF; border: 1px solid #BAE6FD; padding: 1.5rem; border-radius: 0.5rem; margin-top: 1rem; }
        .download-btn { background-color: #0284C7; color: white; font-weight: bold; padding: 0.5rem 1rem; border-radius: 0.375rem; transition: background-color 0.2s; text-decoration: none; display: inline-block; }
        .download-btn:hover { background-color: #0369A1; }
        .modal-card { transition: transform 0.2s, box-shadow 0.2s; }
        .modal-card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        .tab-button { padding: 0.5rem 1rem; cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; }
        .tab-button.active { border-color: #F59E0B; color: #1E293B; font-weight: 600; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="theme-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-5 border-b flex justify-between items-center sticky top-0 bg-white rounded-t-2xl">
                <h2 class="text-xl font-bold text-slate-800">추천 게임 주제 (하나를 선택하여 프롬프트를 복사하세요)</h2>
                <button id="close-modal-btn" class="text-3xl font-light text-slate-500 hover:text-slate-800">&times;</button>
            </div>
            <div id="theme-grid" class="p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 overflow-y-auto">
                <!-- Modal content is loaded dynamically -->
            </div>
        </div>
    </div>

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">
        <header class="text-center my-8 md:my-12">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-900">JS/WebSocket 기반 AI 게임 제작 가이드</h1>
            <p class="mt-4 text-base sm:text-lg text-slate-600">Matter.js 웹 게임을 WebSocket으로 Python(SB3/TorchRL)에 연결하여 AI를 학습시키는 현대적인 방법</p>
        </header>
        
        <section class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">전체 프로세스 개요</h2>
            <ol class="list-decimal list-inside space-y-3 text-slate-700">
                <li><strong class="font-semibold text-slate-800">게임 아이디어 구체화:</strong> 만들고 싶은 게임의 상세 기획안 작성</li>
                <li><strong class="font-semibold text-slate-800">프로젝트 설정 및 통합 웹 게임 제작:</strong> 학습과 플레이가 모두 가능한 최종 JS 게임 로직 개발</li>
                <li><strong class="font-semibold text-slate-800">Python WebSocket 환경 설정:</strong> JS 게임을 제어하는 Gymnasium 호환 RL 환경(공통 코드) 설정</li>
                <li><strong class="font-semibold text-slate-800">AI 모델 학습 (SB3 / TorchRL):</strong> WebSocket 환경을 통해 JS 게임을 제어하며 AI 모델 학습</li>
                <li><strong class="font-semibold text-slate-800">ONNX 모델 변환:</strong> 학습된 모델을 웹 환경에 직접 통합하기 위한 ONNX 형식으로 변환</li>
                <li><strong class="font-semibold text-slate-800">최종 AI 게임 테스트:</strong> 로컬 서버로 ONNX 모델이 탑재된 최종 게임을 확인</li>
                <li><strong class="font-semibold text-slate-800">GitHub Pages 배포:</strong> 완성된 AI 웹 게임을 전 세계에 무료로 배포</li>
            </ol>
        </section>

        <section id="step1" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">단계 1: 게임 아이디어 구체화하기</h2>
            <p class="mb-4 text-slate-700">'추천 주제 보기' 버튼을 눌러 영감을 얻고, 마음에 드는 주제를 선택하여 상세 기획안을 요청하는 프롬프트를 복사하세요.</p>
            <button id="open-modal-btn" class="mb-6 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors">🎮 추천 주제 보기 & 영감 얻기</button>
            <div class="prompt-block">
                <button class="copy-button">복사</button>
                <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code id="step1-prompt-code" class="language-text">You are a creative game designer. Based on the theme "[여기에 선택한 게임 주제와 간단한 설명을 입력하세요. 예: 로켓 착륙시키기: 좌우 및 메인 추력을 사용해, 화면 상단에서 떨어지는 로켓이 정해진 착륙 지점에 부드럽게 착륙하는 게임]", please develop a detailed and engaging game plan.

The plan must be structured with the following four sections:

1.  **Game Concept:** A brief, exciting one-paragraph summary of the game.
2.  **Player Objective:** A clear description of what the player needs to accomplish.
3.  **Controls:** A simple and intuitive control scheme.
4.  **Win/Loss Conditions:** Specific, measurable conditions for success and failure.

Write the plan in Korean.</code></pre>
            </div>
        </section>

        <section id="step2" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">단계 2: 프로젝트 설정 및 통합 웹 게임 제작</h2>
            <p class="mb-6 text-slate-700">이제 실제 게임 개발을 시작합니다. 아래 안내에 따라 프로젝트 폴더와 파일들을 준비하세요.</p>
            <div class="user-input">
                <h3 class="font-semibold text-lg text-slate-800 mb-2">프로젝트 폴더 및 파일 생성 (VS Code)</h3>
                <ol class="list-decimal list-inside space-y-2 text-sm text-slate-700">
                    <li>컴퓨터에 `ai-game`과 같은 이름으로 새 폴더를 만들고 VS Code로 엽니다.</li>
                    <li>아래 버튼을 눌러 프로젝트 템플릿(`.zip`)을 다운로드하고, 압축을 풀어 3개의 파일(`index.html`, `style.css`, `main.js`)을 `ai-game` 폴더에 넣습니다.</li>
                </ol>
            </div>
            <div class="download-section text-center mt-4">
                 <h3 class="font-semibold">웹 프로젝트 템플릿</h3>
                 <a href="https://storage.googleapis.com/genai-assets/rl-game-dev/project_template.zip" download="project_template.zip" class="download-btn mt-2">템플릿 .zip 다운로드 (html, css, js)</a>
            </div>
            <div class="code-block-provided mt-6">
                <h3 class="font-semibold text-lg text-slate-800 mb-2">`main.js` 템플릿 내용</h3>
                <p class="text-sm text-slate-600 mb-4">다운로드한 `main.js` 파일에는 AI 통신을 위한 아래의 필수 함수들이 미리 정의되어 있습니다. Gemini는 이 구조 안에서 게임 로직을 구현하게 됩니다.</p>
                <div class="prompt-block">
                    <button class="copy-button">복사</button>
                    <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="language-javascript">// main.js Template

// --- Matter.js Modules ---
// ... (Modules will be defined here) ...

// --- Game & UI Elements ---
// ... (DOM elements will be selected here) ...

// --- Game State & Parameters ---
// ... (Game variables will be defined here) ...

// =================================================================================
// ESSENTIAL INTERFACE FUNCTIONS FOR AI
// Gemini will implement the logic inside these functions.
// =================================================================================

/**
 * Sets up the initial game state, objects, and physics engine.
 */
function setupGame() {
    // TODO: Create Matter.js engine, renderer, and game objects.
}

/**
 * Resets the game to its starting state for a new episode.
 * @returns {Array<number>} The initial observation array.
 */
function resetGame() {
    // TODO: Reset positions and velocities of all dynamic bodies.
    return getObservation();
}

/**
 * Gathers the current state of the game into a numerical array for the AI.
 * @returns {Array<number>} The observation array.
 */
function getObservation() {
    // TODO: Collect all relevant data (positions, velocities, etc.).
    // IMPORTANT: The order and normalization must be consistent.
    return []; // Placeholder
}

/**
 * Applies an action received from the AI or user to the game.
 * @param {number} action - The integer action.
 */
function applyAction(action) {
    // TODO: Map the action integer to a game mechanic.
}

// ... The rest of the template includes WebSocket/ONNX/User control logic ...
</code></pre>
                </div>
            </div>
            <p class="mt-6 mb-6 text-slate-700">**중요:** Gemini에게 아래 프롬프트를 보낼 때, 다운로드한 `index.html`, `style.css`과 위 템플릿 내용이 담긴 `main.js` 파일을 **반드시 첨부**하세요. 1단계에서 생성된 기획안은 아래 입력란에 붙여넣습니다.</p>
            <div class="user-input">
                <h3 class="font-semibold text-lg text-slate-800 mb-2">게임 로직 기획</h3>
                <textarea id="game-logic-textarea" rows="8" class="w-full p-2 border border-amber-300 rounded-md bg-white text-sm" placeholder="이곳에 1단계에서 생성된 게임 기획안(콘셉트, 목표, 조작법, 성공/실패 조건)을 붙여넣으세요."></textarea>
            </div>
            <div class="prompt-block">
                <button class="copy-button">복사</button>
                <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code id="step2-prompt-code" class="language-text">You are an expert front-end developer and a top-tier visual designer, specializing in creating high-quality, physics-based web games with Matter.js.

I am attaching the `index.html`, `style.css`, and a `main.js` template file. Your task is to **complete the attached `main.js` file** by filling in the game-specific logic based on the provided plan.

### Game Logic Plan:
[여기에 1단계에서 생성된 게임 기획안을 붙여넣으세요.]

### Implementation Requirements:
* **Fill the Template:** Implement the core game logic inside the placeholder functions within `main.js` (`setupGame`, `resetGame`, `getObservation`, `applyAction`, etc.).
* **DO NOT** alter the existing WebSocket, ONNX, or UI control logic in the template unless it's necessary to integrate your game mechanics.

### Visual & Quality Requirements (CRITICAL):
1.  **Masterful Design:** The game must be designed by a highly skilled professional visual designer with an excellent sense of color. The result should be a high-quality, superior game with impeccable polish.
2.  **Aesthetics:** Aim for a minimalist, clean, and visually satisfying hyper-casual style, consistent with the provided CSS.
3.  **Game Juice:** Animations must be smooth and satisfying. Implement "juice" like bouncy effects or small 'pop' animations for feedback.

### User Controls & Input Handling (CRITICAL):
1.  **Intelligent Input Design:** Based on the game concept, intelligently determine the best primary input method (keyboard or mouse/touch).
2.  **Keyboard:** If keyboard-based, implement smooth, responsive controls using `keydown` and `keyup` events to handle continuous presses correctly. Crucially, use `event.preventDefault()` for arrow and space keys to prevent browser scrolling.
3.  **Mouse/Touch:** If mouse-based, ensure controls are intuitive.
</code></pre>
            </div>
        </section>

        <section id="step3" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">단계 3: Python WebSocket 강화학습 환경 설정</h2>
            <p class="mb-6 text-slate-700">프로젝트 폴더에 `websocket_env.py` 파일을 생성하고 아래 코드를 붙여넣으세요. 이 코드는 JS 게임을 Gymnasium 호환 환경으로 만들어줍니다.</p>
            <div class="prompt-block">
                <button class="copy-button">복사</button>
                <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="language-python">import gymnasium as gym
from gymnasium import spaces
import numpy as np
import asyncio
import websockets
import json
import logging

logging.basicConfig(level=logging.INFO)

class WebSocketEnv(gym.Env):
    def __init__(self, observation_shape, action_n):
        super(WebSocketEnv, self).__init__()
        self.websocket = None
        self.loop = asyncio.get_event_loop()
        self.action_space = spaces.Discrete(action_n)
        self.observation_space = spaces.Box(low=-np.inf, high=np.inf, shape=observation_shape, dtype=np.float32)

        print("Waiting for JavaScript client to connect...")
        self.server = self.loop.run_until_complete(websockets.serve(self._handler, "localhost", 8765))
        self.loop.run_until_complete(self._wait_for_connection())
        print("Client connected!")

    async def _handler(self, websocket, path):
        self.websocket = websocket
        await self._keep_alive()

    async def _keep_alive(self):
        try:
            while self.websocket.open:
                await asyncio.sleep(1)
        except websockets.exceptions.ConnectionClosed:
            pass

    async def _wait_for_connection(self):
        while self.websocket is None:
            await asyncio.sleep(0.1)

    async def _send_command(self, command):
        await self.websocket.send(json.dumps(command))

    async def _receive_observation(self):
        message = await self.websocket.recv()
        data = json.loads(message)
        if data.get("type") == "observation":
            obs = np.array(data["observation"], dtype=np.float32)
            reward = data["reward"]
            done = data["done"]
            return obs, reward, done
        return None, None, None

    def reset(self, seed=None, options=None):
        super().reset(seed=seed)
        command = {"command": "reset"}
        self.loop.run_until_complete(self._send_command(command))
        obs, _, _ = self.loop.run_until_complete(self._receive_observation())
        return obs, {}

    def step(self, action):
        command = {"command": "action", "action": int(action)}
        self.loop.run_until_complete(self._send_command(command))
        obs, reward, done = self.loop.run_until_complete(self._receive_observation())
        return obs, reward, done, False, {}

    def render(self, mode='human'):
        pass

    def close(self):
        if self.server:
            self.server.close()
            self.loop.run_until_complete(self.server.wait_closed())
        print("WebSocket server closed.")
</code></pre>
            </div>
        </section>

        <section id="step4" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">단계 4: AI 모델 학습 (SB3 / TorchRL)</h2>
            <p class="mb-4 text-slate-700">선호하는 강화학습 프레임워크를 선택하여 AI 에이전트를 학습시킵니다. 학습 스크립트를 실행하면 **브라우저가 자동으로 열립니다.**</p>
            <div class="border-b border-slate-200"><nav class="flex -mb-px" aria-label="Tabs"><button class="tab-button active" data-tab="sb3">Stable-Baselines3</button><button class="tab-button" data-tab="torchrl">TorchRL</button></nav></div>
            <div id="tab-sb3" class="tab-content active mt-6">
                <p class="mb-4 text-slate-700">아래 코드를 복사하여 `train_sb3.py` 파일로 저장하고 실행하세요.</p>
                <div class="prompt-block">
                    <button class="copy-button">복사</button>
                    <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="language-python"># train_sb3.py
import os, time, webbrowser
from stable_baselines3 import PPO
from stable_baselines3.common.callbacks import CheckpointCallback
from stable_baselines3.common.logger import configure
from websocket_env import WebSocketEnv
# ... (rest of the SB3 training code) ...
</code></pre>
                </div>
            </div>
            <div id="tab-torchrl" class="tab-content mt-6">
                <p class="mb-4 text-slate-700">아래 코드를 복사하여 `train_torchrl.py` 파일로 저장하고 실행하세요.</p>
                 <div class="prompt-block">
                    <button class="copy-button">복사</button>
                    <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="language-python"># train_torchrl.py
import torch, webbrowser, os, time
from torchrl.envs.libs.gym import GymWrapper
from torchrl.collectors import SyncDataCollector
# ... (rest of the TorchRL training code) ...
</code></pre>
                </div>
            </div>
             <div class="user-input mt-6">
                <h3 class="font-semibold text-lg text-slate-800 mb-2">다음 단계: ONNX 변환</h3>
                <p class="text-sm text-slate-600">학습이 완료되면 `final_model.zip`(SB3) 또는 `model_torchrl.pth` 파일이 생성됩니다. 다음 단계에서는 이 모델을 웹에서 사용할 수 있는 ONNX 형식으로 변환합니다.</p>
            </div>
        </section>
        
        <section id="step5" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">단계 5: ONNX 모델 변환</h2>
            <p class="mb-4 text-slate-700">필요한 라이브러리를 설치합니다:</p>
            <pre class="bg-slate-100 text-slate-800 p-2 rounded-md text-sm"><code>pip install stable-baselines3==2.2.0 onnx onnxruntime torch</code></pre>
            <p class="mt-4 mb-4 text-slate-700">아래 코드를 `convert_onnx.py`로 저장하고 실행하여 SB3 모델을 ONNX 형식으로 변환하세요.</p>
            <div class="prompt-block">
                    <button class="copy-button">복사</button>
                    <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="language-python">import torch
import numpy as np
import onnxruntime as ort
from stable_baselines3 import PPO
import os

# --- CONFIGURATION ---
OBSERVATION_SHAPE = (8,) 
# Find the latest model file to convert
try:
    latest_run = max([d for d in os.listdir("training_logs") if os.path.isdir(os.path.join("training_logs", d))], key=lambda d: os.path.getmtime(os.path.join("training_logs", d)))
    MODEL_PATH = os.path.join("training_logs", latest_run, "final_model.zip")
except (FileNotFoundError, ValueError):
    MODEL_PATH = "model_sb3.zip" # Fallback
    
ONNX_PATH = "model.onnx"
# ---------------------

class OnnxablePolicy(torch.nn.Module):
    def __init__(self, policy):
        super().__init__()
        self.policy = policy

    def forward(self, observation):
        action, _ = self.policy.predict(observation, deterministic=True)
        return torch.from_numpy(action)

if not os.path.exists(MODEL_PATH):
    print(f"Error: Model file not found at {MODEL_PATH}")
    exit()

print(f"Loading model from {MODEL_PATH}...")
model = PPO.load(MODEL_PATH, device='cpu')
onnxable_model = OnnxablePolicy(model.policy)

dummy_input = torch.randn(1, *OBSERVATION_SHAPE)

print(f"Exporting to {ONNX_PATH}...")
torch.onnx.export(
    onnxable_model,
    dummy_input,
    ONNX_PATH,
    opset_version=12,
    input_names=["observation"],
    output_names=["action"],
)
print("Export complete.")

print("\n--- Verification ---")
dummy_observation_np = dummy_input.numpy().astype(np.float32)
ort_session = ort.InferenceSession(ONNX_PATH)
input_name = ort_session.get_inputs()[0].name
output_name = ort_session.get_outputs()[0].name

print(f"Running inference with dummy input...")
result = ort_session.run([output_name], {input_name: dummy_observation_np})
print("Inference successful!")
print(f"Output: {result[0]}")
print("\nONNX model conversion and verification complete.")
</code></pre>
            </div>
        </section>
        
        <section id="step6" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">단계 6: 최종 AI 게임 테스트</h2>
            <p class="mb-6 text-slate-700">이제 최종 단계입니다! `model.onnx` 파일이 `index.html`과 같은 폴더에 있는지 확인하고, 아래 명령어로 로컬 서버를 실행하여 브라우저에서 최종 결과물을 확인하세요.</p>
             <div class="space-y-4 text-slate-700">
                <div>
                    <h3 class="font-semibold text-lg text-slate-800">1. 로컬 서버 실행</h3>
                    <p class="mt-1 ml-2">프로젝트 폴더에서 터미널을 열고 다음 명령어를 실행합니다.</p>
                    <pre class="bg-slate-100 text-slate-800 p-2 mt-1 rounded-md text-sm"><code>python -m http.server</code></pre>
                </div>
                <div>
                    <h3 class="font-semibold text-lg text-slate-800">2. 브라우저에서 확인</h3>
                    <p class="mt-1 ml-2">웹 브라우저에서 <a href="http://localhost:8000" target="_blank" class="text-amber-600 underline">http://localhost:8000</a> 으로 접속합니다. 게임이 로드되면, 활성화된 AI/USER 토글을 'AI'로 변경하여 학습된 모델의 플레이를 감상하세요!</p>
                </div>
            </div>
        </section>

        <section id="step7" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">단계 7: GitHub Pages로 웹에 배포하기</h2>
            <p class="mb-6 text-slate-700">완성된 AI 웹 게임(`index.html`, `style.css`, `main.js`, `model.onnx`)을 GitHub Pages를 통해 무료로 배포합니다.</p>
            <div class="space-y-4 text-slate-700">
                <p>Public 저장소를 만들고, 모든 파일을 업로드한 뒤, 저장소 Settings &rarr; Pages에서 'main' 브랜치를 소스로 선택하여 활성화하면 됩니다.</p>
            </div>
        </section>
    </div>

    <script scr="themes.js" id="themes-data-container" type="application/json">[{"emoji":"🍾","title":"병 세우기 챌린지","description":"로봇팔이 물병을 던져 똑바로 세우는 '병 세우기' 챌린지를 성공시키도록 학습합니다.","rl_concept":"병 세우기 챌린지: 로봇팔의 각도와 힘을 조절하여, 테이블 위의 물병을 던졌을 때 바닥에 똑바로 서도록 만드는 게임"},
        {"emoji":"🤹","title":"단검 저글링","description":"두 개의 손이 아슬아슬하게 단검 2~3개를 저글링하도록 학습합니다. (그래픽으로 안전하게 구현)","rl_concept":"단검 저글링: 두 개의 손(막대)을 좌우로 움직여, 떨어지는 단검 2개를 받아내어 떨어뜨리지 않고 계속 띄우는 게임"},
        {"emoji":"🔑","title":"열쇠 구멍에 열쇠 넣기","description":"미세하게 떨리는 로봇 손이 열쇠의 각도와 위치를 정확하게 조절하여 열쇠 구멍에 넣도록 학습합니다.","rl_concept":"열쇠 구멍에 열쇠 넣기: 떨리는 손(커서)을 상하좌우로 미세하게 움직여, 정해진 시간 안에 열쇠 끝을 열쇠 구멍에 정확히 위치시키는 게임"},
        {"emoji":"🛹","title":"외발자전거 타기","description":"캐릭터가 넘어지지 않고 균형을 잡으며 외발자전거를 타도록 학습합니다.","rl_concept":"외발자전거 타기: 캐릭터가 좌우로만 움직여 균형을 잡고, 넘어지지 않고 최대한 오래 버티는 게임"},
        {"emoji":"🥞","title":"팬케이크 뒤집기","description":"로봇팔이 타이밍과 힘을 조절해 팬케이크를 완벽하게 뒤집도록 학습합니다.","rl_concept":"팬케이크 뒤집기: 프라이팬의 각도와 상하 움직임을 조절하여, 팬케이크를 공중으로 띄웠다가 다시 팬 위에 안착시키는 게임"},
        {"emoji":"🪨","title":"돌탑 쌓기","description":"울퉁불퉁하고 각기 다른 모양의 돌멩이들을 아슬아슬하게 쌓아 올리도록 학습합니다.","rl_concept":"돌탑 쌓기: 모양이 다른 5개의 돌을, 로봇팔로 하나씩 집어 무게 중심을 맞춰 무너뜨리지 않고 모두 쌓는 게임"},
        {"emoji":"🗑️","title":"휴지통에 종이 던져넣기","description":"바람(팬)의 영향을 계산하여 뭉친 종이를 휴지통에 골인시키도록 학습합니다.","rl_concept":"휴지통에 종이 던져넣기: 매번 세기와 방향이 바뀌는 바람의 영향을 고려하여, 종이 뭉치를 던지는 각도와 힘을 조절해 휴지통에 넣는 게임"},
        {"emoji":"🏹","title":"움직이는 과녁 맞히기","description":"좌우로 움직이거나 크기가 변하는 과녁에 화살을 명중시키도록 학습합니다.","rl_concept":"움직이는 과녁 맞히기: 활의 각도와 당기는 힘을 조절하여, 좌우로 일정하게 움직이는 과녁의 중앙을 맞히는 게임"},
        {"emoji":"🤸","title":"그네 높이 타기","description":"사람이 그네를 타듯, 타이밍에 맞춰 몸을 움츠렸다 펴는 동작으로 그네를 점점 더 높이 올리도록 학습합니다.","rl_concept":"그네 높이 타기: 그네가 특정 지점에 도달했을 때 '앉기/서기' 동작을 타이밍에 맞춰 실행하여, 그네의 최고 도달 각도를 높이는 게임"},
        {"emoji":"🧑‍🤝‍🧑","title":"아슬아슬 쟁반 나르기","description":"웨이터 캐릭터가 음료가 담긴 쟁반을 들고 걸어갈 때, 균형을 잡아 음료를 쏟지 않도록 학습합니다.","rl_concept":"아슬아슬 쟁반 나르기: 좌우로 기울어지는 쟁반을, 반대 방향으로 움직여 수평을 유지하고, 쏟지 않고 목표 지점까지 도달하는 게임"},
        {"emoji":"🚀","title":"로켓 착륙시키기","description":"제한된 연료를 사용하여 행성 표면의 착륙 지점에 부드럽게 안착하도록 추진체를 제어합니다.","rl_concept":"로켓 착륙시키기: 좌우 및 메인 추력을 사용해, 화면 상단에서 떨어지는 로켓이 정해진 착륙 지점에 부드럽게 착륙하는 게임"},
        {"emoji":"🍭","title":"통통 튀는 포고 스틱","description":"포고 스틱을 탄 캐릭터가 균형을 잡으며 장애물을 넘어가도록 학습합니다.","rl_concept":"포고 스틱 타기: 캐릭터의 좌우 기울기를 조절하여 균형을 잡고, 제자리에서 넘어지지 않고 최대한 오래 버티는 게임"},
        {"emoji":"🧗","title":"젤리 등반가","description":"흐물거리는 젤리 캐릭터가 벽에 몸의 일부를 붙이고, 나머지 부분을 끌어당기는 방식으로 벽을 타도록 학습합니다.","rl_concept":"젤리 등반가: 캐릭터의 팔(점)을 마우스 클릭 위치로 뻗어 벽에 붙이고, 몸을 끌어당겨 더 높은 곳으로 이동하는 것을 반복하는 게임"},
        {"emoji":"🏏","title":"공 쳐서 벽돌 깨기","description":"막대(Paddle)를 움직여 튀는 공을 받아내고, 상단의 벽돌을 가장 효율적으로 깨도록 학습합니다.","rl_concept":"벽돌 깨기: 화면 하단의 막대를 좌우로 움직여, 떨어지는 공을 받아내어 상단의 모든 벽돌을 제거하는 게임"},
        {"emoji":"🍇","title":"인간 대포알","description":"대포의 발사 각도와 힘을 조절하여 사람을 날려 보내, 멀리 있는 목표 지점에 정확히 떨어뜨리도록 학습합니다.","rl_concept":"인간 대포알: 대포의 발사 각도와 힘을 조절하여, 포물선으로 날아가는 캐릭터가 목표 지점(예: 수영장)에 안착하도록 하는 게임"},
        {"emoji":"🎳","title":"볼링 마스터","description":"볼링공의 출발 위치와 파워, 스핀을 조절하여 스트라이크를 치도록 학습합니다.","rl_concept":"볼링 마스터: 볼링공의 출발 위치와 던지는 힘을 조절하여, 10개의 핀을 모두 쓰러뜨리는 게임 (스핀 제외)"},
        {"emoji":"🦘","title":"트램폴린 묘기","description":"트램폴린 위에서 점프하는 캐릭터가 공중회전을 성공시키도록 타이밍을 학습합니다.","rl_concept":"트램폴린 묘기: 트램폴린에서 캐릭터가 최고점에 도달했을 때 '몸 접기' 액션을 취해, 공중에서 1바퀴 회전 후 안정적으로 착지하는 게임"},
        {"emoji":"🩺","title":"수술 게임","description":"로봇팔이 벽에 닿지 않고 조심스럽게 물체를 꺼내도록 학습합니다.","rl_concept":"수술 게임: 로봇팔을 상하좌우로 움직여, 구불구불한 경로의 벽에 닿지 않고 시작점에서 목표점까지 도달하는 게임"},
        {"emoji":"🔵","title":"눈덩이 굴리기","description":"언덕을 굴러 내려오는 작은 눈덩이를 점프시켜 장애물을 피하게 합니다. 눈덩이는 점점 커집니다.","rl_concept":"눈덩이 굴리기: 언덕을 굴러 내려오는 눈덩이를, 타이밍에 맞춰 점프시켜 경로 상의 나무나 돌 같은 장애물을 피하는 게임"},
        {"emoji":"🚑","title":"들것으로 환자 옮기기","description":"2인 1조의 캐릭터가 들것 위의 환자를 떨어뜨리지 않고, 울퉁불퉁한 길을 통과하도록 학습합니다.","rl_concept":"들것 옮기기: 두 캐릭터의 상하 위치를 각각 조절하여 들것의 수평을 맞추고, 환자(공)를 떨어뜨리지 않고 목표점까지 가는 게임"},
        {"emoji":"🕷️","title":"거미줄 스윙","description":"거미처럼 천장에 거미줄을 쏘고, 줄의 탄성을 이용해 스윙하며 앞으로 나아가도록 학습합니다.","rl_concept":"거미줄 스윙: 캐릭터가 스윙하는 동안 클릭하여 다음 지점으로 거미줄을 발사하고, 줄을 놓는 타이밍을 조절해 최대한 멀리 가는 게임"},
        {"emoji":"🔥","title":"소방 호스로 불 끄기","description":"소방 호스의 방향을 조절하여 물줄기(입자)를 쏘아, 건물의 여러 창문에서 발생하는 불을 끄도록 학습합니다.","rl_concept":"불 끄기: 고정된 위치에서 소방 호스의 각도만 조절하여, 화면의 여러 위치에 생성되는 불씨를 모두 끄는 게임"},
        {"emoji":"🔨","title":"두더지 잡기","description":"여러 구멍에서 무작위로 튀어나오는 두더지를 망치로 정확하고 빠르게 내려치도록 학습합니다.","rl_concept":"두더지 잡기: 9개의 구멍 중 하나에서 무작위로 튀어나오는 두더지를, 해당하는 구멍 번호를 선택하여 잡는 순발력 게임"},
        {"emoji":"✈️","title":"종이비행기 조종하기","description":"날아가는 종이비행기의 꼬리 날개만 조절하여, 상승기류를 타고 최대한 오래 비행하도록 학습합니다.","rl_concept":"종이비행기 조종하기: 좌에서 우로 날아가는 종이비행기의 상하 움직임만 조절하여, 화면 위아래의 장애물에 닿지 않고 최대한 멀리 가는 게임"},
        {"emoji":"🏀","title":"농구공 드리블","description":"손을 조절하여 농구공을 일정한 높이로 계속 튕기도록 학습합니다.","rl_concept":"농구공 드리블: 손(막대)의 상하 움직임 타이밍을 조절하여, 바닥으로 떨어지는 농구공을 계속 튕겨내 떨어뜨리지 않는 게임"},
        {"emoji":"🤸","title":"줄넘기","description":"돌아가는 줄에 걸리지 않도록, 캐릭터가 완벽한 타이밍에 점프하도록 학습합니다.","rl_concept":"줄넘기: 화면을 가로지르는 줄이 다가올 때, 타이밍에 맞춰 점프하여 걸리지 않고 최대한 많이 넘는 게임"},
        {"emoji":"🔨","title":"투석기로 성 부수기","description":"'앵그리버드'처럼 투석기의 각도와 힘을 조절하여 돌을 날려, 성의 약한 부분을 무너뜨리도록 학습합니다.","rl_concept":"투석기 게임: 투석기의 발사 각도와 힘을 조절하여, 멀리 있는 목표물(상자 더미)을 무너뜨리는 게임"},
        {"emoji":"🚧","title":"무너지는 다리 건너기","description":"캐릭터가 밟으면 잠시 후 떨어지는 발판으로 이루어진 다리를 건너도록 학습합니다.","rl_concept":"다리 건너기: 여러 개의 발판 중, 밟으면 떨어지는 가짜 발판을 피해 진짜 발판만 밟고 건너가는 게임"},
        {"emoji":"🤹","title":"켄다마","description":"줄에 매달린 공을 막대의 뾰족한 부분이나 컵 부분에 올리도록 막대를 컨트롤하는 법을 학습합니다.","rl_concept":"켄다마: 막대의 상하 움직임 타이밍을 조절하여, 매달린 공을 위로 띄웠다가 컵 부분에 받아내는 게임"},
        {"emoji":"⏹️","title":"도미노 세우기","description":"로봇팔이 일정한 간격으로 도미노를 세우도록 학습합니다. 이미 세운 도미노를 건드리면 실패입니다.","rl_concept":"도미노 세우기: 로봇팔을 좌우로 움직여, 정해진 위치에 도미노를 하나씩 떨어뜨려 세우는 게임. 이미 세운 도미노를 건드리면 안 됨."},
        {"emoji":"💧","title":"물길 그려 물 채우기","description":"화면에 선을 하나 그어, 위에서 떨어지는 물(입자)의 경로를 만들어 컵에 물을 가득 채우도록 학습합니다.","rl_concept":"물길 그리기: 화면의 시작점과 끝점을 선택하여 선분을 그리고, 위에서 떨어지는 공들이 선분을 따라 흘러 컵에 들어가도록 하는 게임"},
        {"emoji":"👣","title":"외줄타기","description":"외줄을 타는 캐릭터가 긴 장대를 좌우로 기울이며 무게 중심을 잡아 앞으로 나아가도록 학습합니다.","rl_concept":"외줄타기: 좌우로 흔들리는 막대(캐릭터)를, 반대 방향으로 움직여 균형을 잡고 최대한 오래 버티는 게임"},
        {"emoji":"🐸","title":"개구리 릴리패드 점프","description":"개구리가 점프의 파워를 조절하여, 간격이 다른 여러 개의 연잎 위로 정확히 착지하도록 학습합니다.","rl_concept":"개구리 점프: 점프 게이지가 차오를 때 버튼을 눌러, 개구리가 다음 연잎에 정확히 착지하도록 힘을 조절하는 게임"},
        {"emoji":"🥷","title":"벽타기 닌자","description":"좁은 통로에서 닌자가 양쪽 벽을 번갈아 점프하며 위로 올라가도록 학습합니다.","rl_concept":"벽타기 닌자: 벽에 붙어 미끄러지는 캐릭터를, 타이밍에 맞춰 점프시켜 반대편 벽으로 이동하며 최대한 높이 올라가는 게임"},
        {"emoji":"🧲","title":"자석으로 쇠구슬 옮기기","description":"자석을 컨트롤하여, 장애물로 가득한 미로 속 쇠구슬을 목적지까지 옮기도록 학습합니다.","rl_concept":"자석 미로: 자석(커서)을 움직여 쇠구슬을 끌어당기고, 쇠구슬이 벽에 닿지 않게 미로를 통과해 목표 지점까지 옮기는 게임"},
        {"emoji":"🐑","title":"양떼 몰이","description":"목축견 한 마리를 조종하여, 제멋대로 흩어지는 양 떼를 울타리 안으로 몰아넣도록 학습합니다.","rl_concept":"양떼 몰이: 목축견(플레이어)을 움직여, 화면에 흩어져 있는 양(공)들을 지정된 울타리 영역 안으로 모두 몰아넣는 게임"},
        {"emoji":"🍉","title":"과일 닌자","description":"화면에 날아오르는 여러 과일을 칼(선)으로 베어 자르도록 학습합니다. 폭탄을 베면 실패입니다.","rl_concept":"과일 자르기: 화면 아래에서 위로 날아오르는 과일(원)들을, 정해진 높이의 칼(선)을 좌우로 움직여 베어내는 게임. 폭탄은 피해야 함."},
        {"emoji":"🚁","title":"헬리콥터 구조 작전","description":"헬리콥터를 조종하여, 좁고 위험한 지형에 있는 사람을 구출한 뒤 안전한 착륙장으로 옮기도록 학습합니다.","rl_concept":"헬리콥터 구조: 헬리콥터의 상하 움직임만 조절하여, 동굴의 천장과 바닥에 부딪히지 않고 목표 지점까지 도달하는 게임"},
        {"emoji":"⚙️","title":"톱니바퀴 점프","description":"서로 다른 속도로 돌아가는 톱니바퀴들을 발판 삼아, 캐릭터가 타이밍에 맞춰 점프하여 목표 지점까지 도달하도록 학습합니다.","rl_concept":"톱니바퀴 점프: 회전하는 톱니바퀴 위에서, 타이밍에 맞춰 점프하여 다음 톱니바퀴로 안전하게 건너가는 게임"},
        {"emoji":"🐳","title":"변신 슬라임","description":"다양한 형태의 구멍을 통과하기 위해, 슬라임 캐릭터가 자신의 몸 모양을 구멍에 맞게 바꾸도록 학습합니다.","rl_concept":"모양 맞추기: 다가오는 벽의 구멍(원, 네모, 세모) 모양을 보고, 캐릭터의 모양을 해당 버튼을 눌러 일치시켜 통과하는 게임"},
        {"emoji":"🔦","title":"그림자 숨기","description":"움직이는 감시탑의 서치라이트를 피해, 그림자 속에만 숨어서 목표 지점까지 도달하도록 학습합니다.","rl_concept":"그림자 숨기: 회전하는 서치라이트(부채꼴)의 빛을 피해, 엄폐물 뒤에 숨는 타이밍을 학습하여 목표 지점까지 도달하는 게임"},
        {"emoji":"🐜","title":"개미굴 파기","description":"개미를 조종하여 땅(파괴 가능한 타일)을 파고, 땅속 깊은 곳에 있는 먹이까지 최단 경로의 터널을 만들도록 학습합니다.","rl_concept":"개미굴 파기: 개미를 상하좌우로 움직여 흙(타일)을 파고, 땅속의 먹이까지 길을 만드는 게임. 단단한 돌은 피해야 함."},
        {"emoji":"🌊","title":"잠수함 동굴 탐험","description":"잠수함의 부력과 추진력을 조절하여, 좁고 복잡한 해저 동굴을 벽에 부딪히지 않고 탐험하도록 학습합니다.","rl_concept":"잠수함 탐험: 잠수함의 상하 부력만 조절하여, 해저 동굴의 천장과 바닥에 부딪히지 않고 최대한 멀리 가는 게임"},
        {"emoji":"🎶","title":"리듬 점프","description":"음악의 비트에 맞춰 나타나는 발판들을, 캐릭터가 리듬에 맞게 점프하여 건너가도록 학습합니다.","rl_concept":"리듬 점프: 일정한 비트로 다가오는 발판에 맞춰, 타이밍 좋게 점프하여 떨어지지 않고 계속 나아가는 게임"},
        {"emoji":"💣","title":"대포알 릴레이","description":"첫 번째 대포만 조절하여, 발사된 대포알이 다음 대포로 이어져 최종 목표물을 맞히도록 학습합니다.","rl_concept":"대포알 릴레이: 첫 대포의 각도만 조절하여 공을 쏘고, 공이 다음 대포에 들어갈 때 타이밍 맞춰 발사 버튼을 눌러 목표물을 맞히는 게임"},
        {"emoji":"🏈","title":"쿼터백 챌린지","description":"로봇팔이 움직이는 리시버(목표)의 미래 위치를 예측하여 정확한 포물선으로 공을 던지도록 학습합니다.","rl_concept":"쿼터백 챌린지: 투척기의 각도와 힘을 조절하여, 좌우로 움직이는 목표물에 공을 던져 맞히는 게임"},
        {"emoji":"📦","title":"지게차 운전 마스터","description":"지게차를 조종하여 좁은 창고에서 상자를 들어 올리고, 지정된 선반에 부딪히지 않고 정확히 쌓도록 학습합니다.","rl_concept":"지게차 운전: 지게차를 전진/후진하고 지게발을 상/하로 움직여, 바닥의 상자를 선반 위 목표 지점으로 옮기는 게임"},
        {"emoji":"🐟","title":"고양이 낚시","description":"고양이의 앞발(막대)을 조종하여, 수면 아래를 빠르게 헤엄쳐 다니는 물고기를 정확한 타이밍에 낚아채도록 학습합니다.","rl_concept":"고양이 낚시: 물고기가 특정 영역을 지나갈 때, 타이밍에 맞춰 버튼을 눌러 낚싯대를 내려 물고기를 잡는 게임"},
        {"emoji":"🚁","title":"드론 배달","description":"드론을 조종하여 바람의 영향을 이겨내고, 빌딩 숲 사이의 장애물을 피해 옥상의 목표 지점까지 배터리를 아끼며 도달하도록 학습합니다.","rl_concept":"드론 배달: 드론의 상하좌우 추력만 조절하여, 고정된 장애물을 피해 출발점에서 목표점까지 도달하는 게임"},
        {"emoji":"🤖","title":"로봇 청소기","description":"복잡한 가구 배치를 가진 방 안에서, 벽이나 장애물에 부딪힘을 최소화하며 가장 효율적인 경로로 모든 바닥을 청소하도록 학습합니다.","rl_concept":"로봇 청소기: 로봇 청소기를 상하좌우로 조종하여, 방 안의 모든 먼지 아이템을 먹는 게임. 벽에 부딪히면 감점."},
        {"emoji":"🍿","title":"팝콘 만들기","description":"옥수수 알갱이가 담긴 팬의 온도를 미세하게 조절합니다. 너무 약하면 팝콘이 되지 않고, 너무 강하면 타버립니다. 최적의 팝콘을 만들도록 학습합니다.","rl_concept":"팝콘 만들기: 버튼을 눌러 온도를 올리고 떼서 내리면서, 온도 게이지를 타지 않는 '최적' 구간에 최대한 오래 머무르게 하는 게임"},
        {"emoji":"⛳","title":"미니 골프","description":"단 한 번의 퍼팅으로, 복잡한 경사와 장애물을 가진 미니 골프 코스에서 홀인원을 하도록 힘과 각도를 학습합니다.","rl_concept":"미니 골프: 골프채의 방향과 힘 조절만으로, 공을 쳐서 홀컵에 넣는 게임. 최소 타수가 목표."},
        {"emoji":"🎂","title":"케이크 장식하기","description":"로봇팔이 회전하는 케이크 위에, 정해진 패턴(예: 하트, 별)을 따라 정확한 위치에 크림을 짜도록 학습합니다.","rl_concept":"케이크 장식: 로봇팔을 좌우로, 크림 짜는 것을 온/오프하여, 컨베이어 벨트를 따라 움직이는 케이크 위에 정해진 패턴을 그리는 게임"},
        {"emoji":"🥪","title":"샌드위치 쌓기","description":"위에서 무작위 순서로 떨어지는 빵, 채소, 패티 등의 재료를, 순서에 맞게 받아내어 완벽한 샌드위치 탑을 쌓도록 학습합니다.","rl_concept":"샌드위치 쌓기: 접시를 좌우로 움직여, 위에서 떨어지는 재료(빵-패티-채소-빵 순)를 순서에 맞게 모두 받아내는 게임"},
        {"emoji":"🚗","title":"자동 주차","description":"자동차가 후진과 핸들 조작만으로, 좁은 평행 주차 공간에 한 번에 완벽하게 주차하도록 학습합니다.","rl_concept":"자동 주차: 전진/후진과 핸들 좌/우 꺾기만 조종하여, 탑뷰 시점의 자동차를 주차 공간에 정확히 넣는 게임"},
        {"emoji":"🏓","title":"퐁 (Pong)","description":"고전 명작! 날아오는 공을 받아쳐 상대방을 이겨보세요. AI와의 치열한 랠리가 펼쳐집니다.","rl_concept":"퐁 (Pong): 플레이어는 마우스로 막대를 상하로만 움직여, 날아오는 공을 받아쳐 상대방이 놓치게 만드는 게임. 먼저 11점을 내면 승리."},
        {"emoji":"🏒","title":"에어하키","description":"빠르고 경쾌한 하키 게임에서 AI의 수비벽을 뚫어보세요. 시원한 타격감을 느낄 수 있습니다.","rl_concept":"에어하키: 플레이어는 마우스로 막대를 상하로만 움직여, 상대방 골대에 퍽을 넣는 게임. 먼저 7점을 내면 승리."},
        {"emoji":"🏐","title":"2D 볼리볼","description":"간단한 조작으로 공을 넘겨 AI와 랠리를 펼쳐보세요. 타이밍이 중요합니다.","rl_concept":"2D 볼리볼: 플레이어는 캐릭터를 좌우로만 움직이고 타이밍에 맞춰 점프하여, 공을 상대방 코트로 넘기는 게임. 공이 자기 코트에 떨어지면 실점."},
        {"emoji":"🟥","title":"세상에서 가장 어려운 게임","description":"격자 맵에서 점멸하거나 움직이는 장애물을 피해 시작점에서 도착점까지 도달하는 게임입니다.","rl_concept":"세상에서 가장 어려운 게임: 플레이어(네모)를 상하좌우로 움직여, 정해진 패턴으로 움직이는 장애물(동그라미)들을 피해 도착 지점까지 도달하는 게임"},
        {"emoji":"🎯","title":"죽림고수 (화살 피하기)","description":"원형 경기장에서 사방에서 날아오는 화살을 피하며 최대한 오래 살아남는 게임입니다.","rl_concept":"화살 피하기: 원형 경기장 중앙의 캐릭터를 상하좌우로 움직여, 경기장 외곽에서 날아오는 화살들을 피하며 최대한 오래 버티는 게임"},
        {"emoji":"🐔","title":"길 건너기","description":"캐릭터를 조종하여 차들이 쌩쌩 달리는 도로와 통나무가 떠다니는 강을 건너 최대한 멀리 전진하는 게임입니다.","rl_concept":"길 건너기: 캐릭터를 상하좌우로 한 칸씩 움직여, 좌우로 움직이는 자동차 장애물을 피하며 최대한 멀리 전진하는 게임"},
        {"emoji":"🐦","title":"파이프 피하기","description":"화면을 탭하여 새를 날아오르게 하고, 위아래로 솟은 파이프 사이를 통과하며 최대한 멀리 나아가는 게임입니다.","rl_concept":"파이프 피하기: 탭(점프) 액션만으로 중력의 영향을 받는 캐릭터를 조종하여, 다가오는 파이프 기둥 사이의 틈을 통과하는 게임"}
    ]</script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const copyButtons = document.querySelectorAll('.copy-button');
            copyButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const codeBlock = button.nextElementSibling.querySelector('code');
                    const codeText = codeBlock.innerText;
                    navigator.clipboard.writeText(codeText).then(() => {
                        button.textContent = '복사 완료!';
                        button.classList.add('copied');
                        setTimeout(() => {
                            button.textContent = '복사';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(err => console.error('Copy failed', err));
                });
            });

            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    const tabId = button.getAttribute('data-tab');
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `tab-${tabId}`) {
                            content.classList.add('active');
                        }
                    });
                });
            });
            
            const modal = document.getElementById('theme-modal');
            const openModalBtn = document.getElementById('open-modal-btn');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const themeGrid = document.getElementById('theme-grid');
            const step1PromptCodeElement = document.getElementById('step1-prompt-code');
            const themesData = JSON.parse(document.getElementById('themes-data-container').textContent);
            
            themesData.sort((a, b) => a.title.localeCompare(b.title, 'ko')).forEach(theme => {
                const card = document.createElement('div');
                card.className = 'modal-card bg-slate-50 p-4 rounded-lg cursor-pointer border hover:border-amber-500 hover:bg-amber-50';
                card.innerHTML = `
                    <div class="text-3xl mb-2">${theme.emoji}</div>
                    <h3 class="font-bold text-slate-800">${theme.title}</h3>
                    <p class="text-sm text-slate-600 mt-1">${theme.description}</p>
                `;
                card.addEventListener('click', () => {
                    const basePrompt = `You are a creative game designer. Based on the theme "[THEME_PLACEHOLDER]", please develop a detailed and engaging game plan.

The plan must be structured with the following four sections:

1.  **Game Concept:** A brief, exciting one-paragraph summary of the game.
2.  **Player Objective:** A clear description of what the player needs to accomplish.
3.  **Controls:** A simple and intuitive control scheme.
4.  **Win/Loss Conditions:** Specific, measurable conditions for success and failure.

Write the plan in Korean.`;
                    
                    const promptToCopy = basePrompt.replace('[THEME_PLACEHOLDER]', `"${theme.rl_concept}"`);
                    
                    if (step1PromptCodeElement) {
                        step1PromptCodeElement.textContent = basePrompt.replace(
                            `[여기에 선택한 게임 주제와 간단한 설명을 입력하세요. 예: 로켓 착륙시키기: 좌우 및 메인 추력을 사용해, 화면 상단에서 떨어지는 로켓이 정해진 착륙 지점에 부드럽게 착륙하는 게임]`,
                            `[${theme.rl_concept}]`
                        );
                    }

                    navigator.clipboard.writeText(promptToCopy).then(() => {
                         alert(`'${theme.title}' 주제의 상세 프롬프트가 클립보드에 복사되었습니다. Gemini에게 바로 붙여넣어 사용하세요!`);
                    });

                    if (modal) modal.classList.add('hidden');
                });
                if (themeGrid) themeGrid.appendChild(card);
            });

            if (openModalBtn) openModalBtn.addEventListener('click', () => modal.classList.remove('hidden'));
            if (closeModalBtn) closeModalBtn.addEventListener('click', () => modal.classList.add('hidden'));
            if (modal) modal.addEventListener('click', (e) => {
                if (e.target.id === 'theme-modal') {
                    modal.classList.add('hidden');
                }
            });
            
            const gameLogicTextarea = document.getElementById('game-logic-textarea');
            const step2PromptCodeElement = document.getElementById('step2-prompt-code');
            if (gameLogicTextarea && step2PromptCodeElement) {
                const baseStep2Prompt = step2PromptCodeElement.innerText;
                gameLogicTextarea.addEventListener('input', () => {
                    const userInput = gameLogicTextarea.value;
                    if (userInput.trim() !== '') {
                        step2PromptCodeElement.innerText = baseStep2Prompt.replace("[여기에 1단계에서 생성된 게임 기획안을 붙여넣으세요.]", userInput);
                    } else {
                        step2PromptCodeElement.innerText = baseStep2Prompt;
                    }
                });
            }
        });
    </script>
</body>
</html>

