<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini AI ë¬¼ë¦¬ ê²Œì„ ì œì‘ ê°€ì´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .step { scroll-margin-top: 80px; }
        .prompt-block { position: relative; }
        .copy-button { position: absolute; top: 0.8rem; right: 0.8rem; background-color: #4A5568; color: white; padding: 0.25rem 0.6rem; border-radius: 0.375rem; font-size: 0.8rem; cursor: pointer; transition: background-color 0.2s; }
        .copy-button:hover { background-color: #2D3748; }
        .copy-button.copied { background-color: #2F855A; }
        .user-input { background-color: #FEF3C7; border: 1px dashed #FBBF24; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem; }
        .highlight-note { background-color: #E6FFFA; border-left: 4px solid #38B2AC; padding: 1rem; margin-top: 1rem; font-size: 0.9rem; color: #234E52; }
        .modal-card { transition: transform 0.2s, box-shadow 0.2s; }
        .modal-card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="theme-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-5 border-b flex justify-between items-center sticky top-0 bg-white rounded-t-2xl">
                <h2 class="text-xl font-bold text-slate-800">ì¶”ì²œ ê²Œì„ ì£¼ì œ (í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ í”„ë¡¬í”„íŠ¸ë¥¼ ë³µì‚¬í•˜ì„¸ìš”)</h2>
                <button id="close-modal-btn" class="text-3xl font-light text-slate-500 hover:text-slate-800">&times;</button>
            </div>
            <div id="theme-grid" class="p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 overflow-y-auto">
                </div>
        </div>
    </div>


    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">
        <header class="text-center my-8 md:my-12">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-900">Gemini AI ë¬¼ë¦¬ ê²Œì„ ì œì‘ ê°€ì´ë“œ</h1>
            <p class="mt-4 text-base sm:text-lg text-slate-600">Pygameë¶€í„° JavaScript ë°°í¬ê¹Œì§€, Geminiì™€ í•¨ê»˜í•˜ëŠ” AI ê²Œì„ ê°œë°œ ì—¬ì •</p>
        </header>
        
        <section class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ì „ì²´ í”„ë¡œì„¸ìŠ¤ ê°œìš”</h2>
            <p class="mb-6 text-slate-700">ë‹¤ìŒ 10ê°€ì§€ ë‹¨ê³„ë¡œ ì•„ì´ë””ì–´ë¥¼ í˜„ì‹¤ë¡œ ë§Œë“­ë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì„¤ì •ë¶€í„° ì‹œì‘í•˜ì—¬ Git/VS Codeë¥¼ ì´ìš©í•œ ë°°í¬ê¹Œì§€ ë‹¤ë£¹ë‹ˆë‹¤.</p>
            <ol class="list-decimal list-inside space-y-3 text-slate-700">
                <li><strong class="font-semibold text-slate-800">í”„ë¡œì íŠ¸ ì„¤ì •:</strong> ê°œë°œì„ ì‹œì‘í•  í´ë” ìƒì„± ë° VS Codeë¡œ ì—´ê¸°</li>
                <li><strong class="font-semibold text-slate-800">ê²Œì„ ì•„ì´ë””ì–´ êµ¬ì²´í™”:</strong> ìƒì„¸í•œ ê²Œì„ ê¸°íšì•ˆ ì‘ì„±</li>
                <li><strong class="font-semibold text-slate-800">Pygame ê²Œì„ ë° Gymnasium í™˜ê²½ í†µí•© ì œì‘:</strong> AI í•™ìŠµê³¼ ì‚¬ìš©ì í”Œë ˆì´ê°€ ëª¨ë‘ ê°€ëŠ¥í•œ í†µí•© Python íŒŒì¼ ì œì‘</li>
                <li><strong class="font-semibold text-slate-800">SB3 ëª¨ë¸ í•™ìŠµ:</strong> Gymnasium í™˜ê²½ì—ì„œ ê°•í™”í•™ìŠµ ì—ì´ì „íŠ¸ í•™ìŠµ</li>
                <li><strong class="font-semibold text-slate-800">í•™ìŠµëœ ëª¨ë¸ í…ŒìŠ¤íŠ¸:</strong> Pygame í™˜ê²½ì—ì„œ í•™ìŠµëœ ì—ì´ì „íŠ¸ì˜ ì„±ëŠ¥ ì‹œê°í™”</li>
                <li><strong class="font-semibold text-slate-800">ONNX ëª¨ë¸ ë³€í™˜:</strong> í•™ìŠµëœ ëª¨ë¸ì„ ì›¹ í™˜ê²½ì— ë§ëŠ” ONNX í˜•ì‹ìœ¼ë¡œ ë³€í™˜</li>
                <li><strong class="font-semibold text-slate-800">JavaScript ì›¹ ê²Œì„ êµ¬í˜„:</strong> ONNX ëª¨ë¸ì„ ë¶ˆëŸ¬ì™€ AI í”Œë ˆì´ë¥¼ ì‹œê°í™”í•˜ëŠ” ì›¹ ê²Œì„ ì œì‘</li>
                <li><strong class="font-semibold text-slate-800">ë¡œì»¬ í™˜ê²½ì—ì„œ ì›¹ ê²Œì„ í…ŒìŠ¤íŠ¸:</strong> ë°°í¬ ì „, ë‚´ ì»´í“¨í„°ì—ì„œ ì›¹ ê²Œì„ ìµœì¢… í™•ì¸</li>
                <li><strong class="font-semibold text-slate-800">VS Codeì™€ Gitìœ¼ë¡œ GitHub Pagesì— ë°°í¬:</strong> ì™„ì„±ëœ ì›¹ ê²Œì„ì„ ì „ ì„¸ê³„ì— ë¬´ë£Œë¡œ ë°°í¬</li>
                <li><strong class="font-semibold text-slate-800">ë§ˆì¹˜ë©°:</strong> ë‹¤ìŒ ë‹¨ê³„ë¡œ ë‚˜ì•„ê°€ê¸°</li>
            </ol>
        </section>

        <section id="step1" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë‹¨ê³„ 1: í”„ë¡œì íŠ¸ ì„¤ì •</h2>
            <p class="mb-4 text-slate-700">ëª¨ë“  ì‘ì—…ì€ í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ í´ë” ì•ˆì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ í´ë”ëŠ” ì•ìœ¼ë¡œ ë§Œë“¤ ëª¨ë“  ì½”ë“œì™€ íŒŒì¼ì„ ë‹´ëŠ” ê³µê°„ì´ ë©ë‹ˆë‹¤.</p>
            <div class="user-input">
                <h3 class="font-semibold text-lg text-slate-800 mb-2">í”„ë¡œì íŠ¸ í´ë” ìƒì„± ë° ì—´ê¸°</h3>
                <ol class="list-decimal list-inside space-y-2 text-sm text-slate-700">
                    <li>ì»´í“¨í„°ì˜ ì›í•˜ëŠ” ìœ„ì¹˜ì— <code class="bg-amber-200 px-1 rounded">ai-game-project</code>ì™€ ê°™ì´ í”„ë¡œì íŠ¸ë¥¼ ì•Œì•„ë³´ê¸° ì‰¬ìš´ ì´ë¦„ìœ¼ë¡œ ìƒˆ í´ë”ë¥¼ ë§Œë“­ë‹ˆë‹¤.</li>
                    <li>Visual Studio Codeë¥¼ ì‹¤í–‰í•˜ê³ , 'íŒŒì¼(File)' &rarr; 'í´ë” ì—´ê¸°(Open Folder)...' ë©”ë‰´ë¥¼ í†µí•´ ë°©ê¸ˆ ë§Œë“  í”„ë¡œì íŠ¸ í´ë”ë¥¼ ì—½ë‹ˆë‹¤.</li>
                    <li>ì´ì œë¶€í„° ìƒì„±í•˜ëŠ” ëª¨ë“  íŒŒì¼(<code class="bg-amber-200 px-1 rounded">game_env.py</code>, <code class="bg-amber-200 px-1 rounded">index.html</code> ë“±)ì€ ì´ í´ë” ì•ˆì— ì €ì¥ë©ë‹ˆë‹¤.</li>
                </ol>
            </div>
        </section>

        <section id="step2" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë‹¨ê³„ 2: ê²Œì„ ì•„ì´ë””ì–´ êµ¬ì²´í™”í•˜ê¸°</h2>
            <p class="mb-4 text-slate-700">'ì¶”ì²œ ì£¼ì œ ë³´ê¸°' ë²„íŠ¼ì„ ëˆŒëŸ¬ ì˜ê°ì„ ì–»ê³ , ë§ˆìŒì— ë“œëŠ” ì£¼ì œë¥¼ ì„ íƒí•˜ì—¬ ìƒì„¸ ê¸°íšì•ˆì„ ìš”ì²­í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ë³µì‚¬í•˜ì„¸ìš”.</p>
            <button id="open-modal-btn" class="mb-6 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors">ğŸ® ì¶”ì²œ ì£¼ì œ ë³´ê¸° & ì˜ê° ì–»ê¸°</button>
            <div class="prompt-block">
                <button class="copy-button">ë³µì‚¬</button>
                <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code id="step1-prompt-code" class="language-text">You are a creative game designer. Based on the theme "[ì—¬ê¸°ì— ì„ íƒí•œ ê²Œì„ ì£¼ì œì™€ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ: ë¡œì¼“ ì°©ë¥™ì‹œí‚¤ê¸°: ì¢Œìš° ë° ë©”ì¸ ì¶”ë ¥ì„ ì‚¬ìš©í•´, í™”ë©´ ìƒë‹¨ì—ì„œ ë–¨ì–´ì§€ëŠ” ë¡œì¼“ì´ ì •í•´ì§„ ì°©ë¥™ ì§€ì ì— ë¶€ë“œëŸ½ê²Œ ì°©ë¥™í•˜ëŠ” ê²Œì„]", please develop a detailed and engaging game plan.

The plan must be structured with the following four sections:

1.  **Game Concept:** A brief, exciting one-paragraph summary of the game.
2.  **Player Objective:** A clear description of what the player needs to accomplish.
3.  **Controls:** A simple and intuitive control scheme.
4.  **Win/Loss Conditions:** Specific, measurable conditions for success and failure.

Write the plan in Korean.</code></pre>
            </div>
        </section>

        <section id="step3" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë‹¨ê³„ 3: Pygame ê²Œì„ ë° Gymnasium í™˜ê²½ í†µí•© ì œì‘</h2>
            <p class="mb-6 text-slate-700">ê²Œì„ ê¸°íšì•ˆì„ ë°”íƒ•ìœ¼ë¡œ AI í•™ìŠµê³¼ ì‚¬ìš©ì í”Œë ˆì´ê°€ ëª¨ë‘ ê°€ëŠ¥í•œ í†µí•© Python íŒŒì¼ì„ ì œì‘í•©ë‹ˆë‹¤. 2ë‹¨ê³„ ê¸°íšì•ˆì„ ì•„ë˜ì— ë¶™ì—¬ë„£ìœ¼ë©´ í”„ë¡¬í”„íŠ¸ê°€ ì™„ì„±ë©ë‹ˆë‹¤.</p>
            <div class="user-input">
                <h3 class="font-semibold text-lg text-slate-800 mb-2">ê²Œì„ ë¡œì§ ê¸°íš</h3>
                <textarea id="game-logic-textarea" rows="8" class="w-full p-2 border border-amber-300 rounded-md bg-white text-sm" placeholder="ì´ê³³ì— 2ë‹¨ê³„ì—ì„œ ìƒì„±ëœ ê²Œì„ ê¸°íšì•ˆ(ì½˜ì…‰íŠ¸, ëª©í‘œ, ì¡°ì‘ë²•, ì„±ê³µ/ì‹¤íŒ¨ ì¡°ê±´)ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”."></textarea>
            </div>
            <div class="prompt-block">
                <button class="copy-button">ë³µì‚¬</button>
                <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code id="step2-prompt-code" class="language-text">You are an expert Python developer specializing in both game development with Pygame and Reinforcement Learning with Gymnasium.

Your task is to create a single, complete Python script based on the provided game plan. This file must serve two purposes: be a playable game for humans when run directly, and be an importable, AI-trainable environment for RL agents.

### Game Logic Plan
[ì—¬ê¸°ì— ìœ„ 'ê²Œì„ ë¡œì§ ê¸°íš' ì…ë ¥ë€ì˜ ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.]

### MANDATORY REQUIREMENTS:

1.  **Single File Structure:** All code (Pygame logic, Gymnasium environment) must be in one single Python file.

2.  **Standardized Naming (CRITICAL):**
    * The Gymnasium environment class **MUST** be named `GameEnv`. This ensures compatibility with subsequent training scripts.

3.  **Dual-Mode Execution (CRITICAL):**
    * The script must use an `if __name__ == "__main__":` block.
    * When the script is run directly (`python your_file_name.py`), this block should execute a "human player" mode.
    * This mode should instantiate `GameEnv(render_mode='human')` and run a game loop where a human can play using the keyboard, allowing for immediate testing of the game mechanics.

4.  **Gymnasium `GameEnv` Class:**
    * **Observation/Action Spaces:** Analyze the game logic to define the most effective `observation_space` (Box) and `action_space` (Discrete).
    * **Reward Function:** Design a precise reward function that strongly incentivizes the desired agent behavior.
    * **Core Methods:** Correctly implement `__init__`, `reset`, `step`, `render`, and `close`.
    * **No Physics Libraries:** Implement all physics from scratch (position, velocity, gravity, collision) using pure Python.

5.  **Visual Design (Hyper-Casual Aesthetic):**
    * The game must be minimalist, clean, and visually satisfying with a bright, harmonious color palette.
    * Use anti-aliased geometric shapes and smooth, "juicy" animations for feedback. The window size should be 800x600.

6.  **Code Quality:**
    * The code must be well-commented, follow Python best practices, and be fully runnable without errors.</code></pre>
            </div>
            <div class="user-input mt-6">
                <h3 class="font-semibold text-lg text-slate-800 mb-2">ì‹¤í–‰ ë° ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„</h3>
                <p class="text-sm text-slate-600">Geminiê°€ ìƒì„±í•œ ì½”ë“œë¥¼ <code class="bg-amber-200 px-1 rounded">game_env.py</code> ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì €ì¥í•˜ì„¸ìš”. í„°ë¯¸ë„ì—ì„œ <code class="bg-amber-200 px-1 rounded">python game_env.py</code>ë¥¼ ì‹¤í–‰í•˜ì—¬ ì‚¬ëŒ í”Œë ˆì´ ëª¨ë“œë¡œ ê²Œì„ì„ ì§ì ‘ í…ŒìŠ¤íŠ¸í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </section>

        <section id="step4" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë‹¨ê³„ 4: SB3ë¡œ ëª¨ë¸ í•™ìŠµ</h2>
            <p class="mb-6 text-slate-700">`game_env.py` íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ê°•í™”í•™ìŠµ ì—ì´ì „íŠ¸ë¥¼ í•™ìŠµì‹œí‚µë‹ˆë‹¤. ì•„ë˜ ì½”ë“œë¥¼ <code class="bg-amber-200 px-1 rounded">train.py</code> íŒŒì¼ë¡œ ì €ì¥í•˜ê³  ì‹¤í–‰í•˜ì„¸ìš”. ì½”ë“œ ìˆ˜ì •ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤.</p>
            <div class="prompt-block">
                <button class="copy-button">ë³µì‚¬</button>
                <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="language-python"># train.py
import os, time
from stable_baselines3 import PPO
from stable_baselines3.common.callbacks import CheckpointCallback
from stable_baselines3.common.logger import configure
from stable_baselines3.common.vec_env import DummyVecEnv
from gymnasium import spaces
from game_env import GameEnv 

TOTAL_TIMESTEPS = 1_000_000
CHECKPOINT_FREQ = 10_000
LOG_DIR = "sb3_logs"
CHECKPOINT_DIR = os.path.join(LOG_DIR, "checkpoints")

def find_latest_checkpoint():
    if not os.path.exists(CHECKPOINT_DIR): return None
    checkpoints = [f for f in os.listdir(CHECKPOINT_DIR) if f.startswith("rl_model_") and f.endswith(".zip")]
    if not checkpoints: return None
    latest_checkpoint = max(checkpoints, key=lambda f: int(f.split("_")[2].replace(".zip", "")))
    return os.path.join(CHECKPOINT_DIR, latest_checkpoint)

def main():
    os.makedirs(CHECKPOINT_DIR, exist_ok=True)
    env = DummyVecEnv([lambda: GameEnv(render_mode=None)])
    obs_space = env.observation_space
    policy = "CnnPolicy" if isinstance(obs_space, spaces.Box) and len(obs_space.shape) == 3 else "MlpPolicy"
    print(f"ìë™ ì„ íƒëœ ì •ì±…: {policy}")
    latest_checkpoint = find_latest_checkpoint()
    if latest_checkpoint:
        print(f"ìµœì‹  ì²´í¬í¬ì¸íŠ¸ì—ì„œ í•™ìŠµì„ ì¬ê°œí•©ë‹ˆë‹¤: {latest_checkpoint}")
        model = PPO.load(latest_checkpoint, env=env)
        log_name = os.path.basename(os.path.dirname(os.path.dirname(latest_checkpoint)))
        run_path = os.path.join(LOG_DIR, log_name)
        custom_logger = configure(run_path, ["stdout", "tensorboard"])
        model.set_logger(custom_logger)
    else:
        print("ìƒˆë¡œìš´ í•™ìŠµì„ ì‹œì‘í•©ë‹ˆë‹¤.")
        log_name = f"PPO_{int(time.time())}"
        run_path = os.path.join(LOG_DIR, log_name)
        custom_logger = configure(run_path, ["stdout", "tensorboard"])
        model = PPO(policy, env, verbose=1, tensorboard_log=None)
        model.set_logger(custom_logger)
    checkpoint_callback = CheckpointCallback(save_freq=CHECKPOINT_FREQ, save_path=CHECKPOINT_DIR, name_prefix="rl_model")
    try:
        model.learn(total_timesteps=TOTAL_TIMESTEPS, callback=checkpoint_callback, reset_num_timesteps=False)
        model.save(os.path.join(LOG_DIR, "final_model.zip"))
        print(f"í•™ìŠµ ì™„ë£Œ! ìµœì¢… ëª¨ë¸ì´ {os.path.join(LOG_DIR, 'final_model.zip')}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")
    finally:
        env.close()

if __name__ == '__main__': main()
</code></pre>
            </div>
        </section>

        <section id="step5" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë‹¨ê³„ 5: í•™ìŠµëœ ëª¨ë¸ í…ŒìŠ¤íŠ¸</h2>
            <p class="mb-6 text-slate-700">í•™ìŠµëœ ì—ì´ì „íŠ¸ì˜ ì„±ëŠ¥ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤. ì•„ë˜ ì½”ë“œë¥¼ <code class="bg-amber-200 px-1 rounded">test_model.py</code>ë¡œ ì €ì¥í•˜ê³  ì‹¤í–‰í•˜ì„¸ìš”.</p>
            <div class="prompt-block">
                <button class="copy-button">ë³µì‚¬</button>
                <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="language-python"># test_model.py
from stable_baselines3 import PPO
from game_env import GameEnv

MODEL_PATH = "sb3_logs/final_model.zip"
NUM_EPISODES = 10

def main():
    env = GameEnv(render_mode='human')
    model = PPO.load(MODEL_PATH, env=env)
    print(f"{MODEL_PATH} ëª¨ë¸ í…ŒìŠ¤íŠ¸ ì‹œì‘.")
    for episode in range(1, NUM_EPISODES + 1):
        obs, info = env.reset()
        done, total_reward = False, 0
        while not done:
            action, _ = model.predict(obs, deterministic=True)
            obs, reward, terminated, truncated, info = env.step(action)
            total_reward += reward
            done = terminated or truncated
        print(f"ì—í”¼ì†Œë“œ {episode}: ì´ ë³´ìƒ = {total_reward:.2f}")
    env.close()
    print("í…ŒìŠ¤íŠ¸ ì™„ë£Œ.")

if __name__ == '__main__': main()
</code></pre>
            </div>
        </section>

        <section id="step6" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë‹¨ê³„ 6: ONNX ëª¨ë¸ ë³€í™˜</h2>
            <p class="mb-6 text-slate-700">í•™ìŠµëœ ëª¨ë¸ì„ ì›¹ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ONNX í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì•„ë˜ ì½”ë“œë¥¼ <code class="bg-amber-200 px-1 rounded">convert_onnx.py</code>ë¡œ ì €ì¥í•˜ê³  ì‹¤í–‰í•˜ì„¸ìš”.</p>
            <div class="prompt-block">
                <button class="copy-button">ë³µì‚¬</button>
                <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="language-python"># convert_onnx.py
import torch, onnxruntime as ort, numpy as np
from stable_baselines3 import PPO
from game_env import GameEnv

MODEL_PATH = "sb3_logs/final_model.zip"
ONNX_PATH = "model.onnx"

class OnnxablePolicy(torch.nn.Module):
    def __init__(self, policy): super().__init__(); self.policy = policy
    def forward(self, observation): action, _ = self.policy.predict(observation, deterministic=True); return torch.from_numpy(action)

def main():
    model = PPO.load(MODEL_PATH, device='cpu')
    onnxable_model = OnnxablePolicy(model.policy)
    env = GameEnv(render_mode=None)
    dummy_input = torch.randn(1, *env.observation_space.shape)
    env.close()
    torch.onnx.export(onnxable_model, dummy_input, ONNX_PATH, opset_version=12, input_names=["observation"], output_names=["action"])
    print(f"ONNX ë³€í™˜ ì™„ë£Œ: {ONNX_PATH}")
    print("\n--- ONNX ëª¨ë¸ ê²€ì¦ ---")
    try:
        ort_session = ort.InferenceSession(ONNX_PATH)
        input_name, output_name = ort_session.get_inputs()[0].name, ort_session.get_outputs()[0].name
        result = ort_session.run([output_name], {input_name: dummy_input.numpy().astype(np.float32)})
        print(f"ê²€ì¦ ì„±ê³µ! ì…ë ¥ shape: {dummy_input.numpy().shape}, ì¶œë ¥ action: {result[0]}")
    except Exception as e: print(f"ê²€ì¦ ì‹¤íŒ¨: {e}")

if __name__ == '__main__': main()
</code></pre>
            </div>
        </section>
        
        <section id="step7" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë‹¨ê³„ 7: JavaScript ì›¹ ê²Œì„ êµ¬í˜„</h2>
            <p class="mb-6 text-slate-700">AIì˜ í”Œë ˆì´ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ì›¹ í˜ì´ì§€ë¥¼ ë§Œë“­ë‹ˆë‹¤. `game_env.py`ì˜ ì‹œê°ì  ë””ìì¸ì„ ì¬í˜„í•˜ê³  AI ëª¨ë¸ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
             <div class="user-input">
                <h3 class="font-semibold text-lg text-slate-800 mb-2">í•„ìš”í•œ ì •ë³´ ì¤€ë¹„</h3>
                <p class="text-sm text-slate-600">`game_env.py` íŒŒì¼ì„ ì—´ì–´ `GameEnv` í´ë˜ìŠ¤ì— ì •ì˜ëœ `observation_space`ì˜ êµ¬ì¡°ì™€ ìˆœì„œë¥¼ ë³µì‚¬í•œ í›„, ì•„ë˜ í”„ë¡¬í”„íŠ¸ì˜ `[ ]` ì•ˆì— ì •í™•íˆ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</p>
            </div>
            <div class="prompt-block">
                <button class="copy-button">ë³µì‚¬</button>
                <pre class="bg-slate-100 text-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="language-text">You are a senior front-end developer and a top-tier digital artist, skilled in JavaScript, HTML5 Canvas, and AI model integration. Your task is to create a single, self-contained `index.html` file that is a visually stunning, minimalist web game powered by a local `model.onnx` file.

### Reference Information
* **Artistic Vision:** Replicate the artistic vision of the Python game: a clean, minimalist, and visually satisfying hyper-casual aesthetic.
* **Observation Space Structure:** [ì—¬ê¸°ì— ë‹¨ê³„ 3ì—ì„œ Geminiê°€ ì •ì˜í•œ ê´€ì¸¡ ê³µê°„ì˜ êµ¬ì¡°ì™€ ìˆœì„œë¥¼ ì •í™•íˆ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”. (ì˜ˆ: `[pos_x, pos_y, vel_x, vel_y, angle, ang_vel, dist_to_pad]`)]

### Requirements:
1.  **Game Replication:** Recreate the game's core mechanics and visuals using HTML5 Canvas and plain JavaScript. Do not use a physics library. The logic must be consistent with the Python implementation's coordinate system.
2.  **Visual Design:** Center the canvas. Replicate the sophisticated visual style: a bright, inviting color palette; simple, anti-aliased geometric shapes; and bouncy, satisfying animations for feedback, powered by `requestAnimationFrame`. Implement a clean loading indicator.
3.  **AI Integration:** Include `onnxruntime-web` via CDN and asynchronously load the local `model.onnx`.
4.  **State and Action Fidelity (CRITICAL):**
    * The observation passed to the model MUST be a `Float32Array`.
    * The ORDER of elements in the JS observation array MUST EXACTLY MATCH the Python environment's `observation_space`.
    * The normalization method used in JS MUST BE IDENTICAL to the normalization logic in the Python `step()` function.
    * The mapping of the model's output to a game action in JavaScript MUST PERFECTLY MIRROR the `action_space` definition in the Python environment.</code></pre>
            </div>
        </section>

        <section id="step8" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë‹¨ê³„ 8: ë¡œì»¬ í™˜ê²½ì—ì„œ ì›¹ ê²Œì„ í…ŒìŠ¤íŠ¸í•˜ê¸°</h2>
            <p class="mb-6 text-slate-700">ì›¹ ê²Œì„ì„ ì¸í„°ë„·ì— ì˜¬ë¦¬ê¸° ì „, ë‚´ ì»´í“¨í„°ì—ì„œ ë¨¼ì € ì‹¤í–‰í•˜ì—¬ ë¬¸ì œê°€ ì—†ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ê°„ë‹¨í•œ ë¡œì»¬ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë©´ `model.onnx` ê°™ì€ ì™¸ë¶€ íŒŒì¼ì„ ì •ìƒì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <div class="space-y-4 text-slate-700">
                <div><h3 class="font-semibold text-lg text-slate-800">1. ë¡œì»¬ ì„œë²„ ì‹¤í–‰ (Python í•„ìš”)</h3><p class="mt-1 ml-2">VS Codeì˜ í„°ë¯¸ë„(ë³´ê¸° &rarr; í„°ë¯¸ë„)ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p><pre class="bg-slate-100 text-slate-800 p-2 mt-1 rounded-md text-sm"><code>python -m http.server</code></pre></div>
                <div><h3 class="font-semibold text-lg text-slate-800">2. ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸</h3><p class="mt-1 ml-2">ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ <a href="http://localhost:8000" target="_blank" class="text-amber-600 underline">http://localhost:8000</a> ìœ¼ë¡œ ì ‘ì†í•˜ì—¬ AI ì›¹ ê²Œì„ì´ ì •ìƒ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p></div>
            </div>
        </section>

        <section id="step9" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë‹¨ê³„ 9: VS Codeì™€ Gitìœ¼ë¡œ GitHub Pagesì— ë°°í¬í•˜ê¸°</h2>
            <p class="mb-6 text-slate-700">ì´ì œ ì™„ì„±ëœ í”„ë¡œì íŠ¸ë¥¼ VS Codeì—ì„œ ë°”ë¡œ GitHubì— ì˜¬ë¦¬ê³ , GitHub Pagesë¥¼ í†µí•´ ì „ ì„¸ê³„ì— ë°°í¬í•©ë‹ˆë‹¤.</p>
            
            <div class="space-y-6 text-slate-700">
                <div>
                    <h3 class="font-semibold text-lg text-slate-800">1. ì‚¬ì „ ì¤€ë¹„: Git ì„¤ì¹˜ ë° ì„¤ì •</h3>
                    <p class="mt-1 ml-2">Gitì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ <a href="https://git-scm.com/" target="_blank" class="text-amber-600 underline">git-scm.com</a>ì—ì„œ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ì„¤ì¹˜í•©ë‹ˆë‹¤. ì„¤ì¹˜ í›„, Git Bashë‚˜ VS Code í„°ë¯¸ë„ì„ ì—´ì–´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ì‚¬ìš©ì ì •ë³´ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤ (ìµœì´ˆ í•œ ë²ˆë§Œ í•„ìš”).</p>
                    <pre class="bg-slate-100 text-slate-800 p-2 mt-1 rounded-md text-sm"><code>git config --global user.name "Your Name"
git config --global user.email "you@example.com"</code></pre>
                </div>

                <div>
                    <h3 class="font-semibold text-lg text-slate-800">2. VS Codeì—ì„œ GitHub ê³„ì • ì—°ë™</h3>
                    <p class="mt-1 ml-2">VS Code ì™¼ìª½ í•˜ë‹¨ì˜ ì‚¬ëŒ ëª¨ì–‘ ì•„ì´ì½˜(ê³„ì •)ì„ í´ë¦­í•˜ê³ , 'GitHubìœ¼ë¡œ ë¡œê·¸ì¸(Sign in with GitHub)'ì„ ì„ íƒí•˜ì—¬ ë¸Œë¼ìš°ì €ì˜ ì•ˆë‚´ì— ë”°ë¼ ê³„ì •ì„ ì—°ë™í•©ë‹ˆë‹¤.</p>
                </div>

                <div>
                    <h3 class="font-semibold text-lg text-slate-800">3. Git ì €ì¥ì†Œ ì´ˆê¸°í™” ë° ì²« ì»¤ë°‹</h3>
                    <p class="mt-1 ml-2">VS Code ì™¼ìª½ì˜ 'ì†ŒìŠ¤ ì œì–´' íƒ­(ê°€ì§€ ëª¨ì–‘ ì•„ì´ì½˜)ìœ¼ë¡œ ì´ë™í•˜ì—¬ 'ë¦¬í¬ì§€í† ë¦¬ ì´ˆê¸°í™”(Initialize Repository)' ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤. ê·¸ í›„, ìƒë‹¨ì˜ ë©”ì‹œì§€ ì…ë ¥ë€ì— "Initial commit"ê³¼ ê°™ì€ ì²« ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•œ í›„ âœ“ ì»¤ë°‹ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì»¤ë°‹í•©ë‹ˆë‹¤.</p>
                </div>

                <div>
                    <h3 class="font-semibold text-lg text-slate-800">4. GitHubì— ê²Œì‹œí•˜ê¸°</h3>
                    <p class="mt-1 ml-2">'ì†ŒìŠ¤ ì œì–´' íƒ­ì— ë‚˜íƒ€ë‚˜ëŠ” 'ê²Œì‹œ(Publish Branch)' ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤. VS Codeê°€ GitHubì— ì €ì¥ì†Œë¥¼ ë§Œë“œëŠ” ê³¼ì •ì„ ì•ˆë‚´í•©ë‹ˆë‹¤. ì €ì¥ì†Œ ì´ë¦„ì„ ì •í•˜ê³ , <strong>ë°˜ë“œì‹œ 'ê³µê°œ(Public)' ì €ì¥ì†Œë¡œ ì„¤ì •</strong>í•´ì•¼ GitHub Pagesë¥¼ ë¬´ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>

                <div>
                    <h3 class="font-semibold text-lg text-slate-800">5. GitHub Pages í™œì„±í™”</h3>
                    <p class="mt-1 ml-2">ê²Œì‹œê°€ ì™„ë£Œë˜ë©´ GitHub ì‚¬ì´íŠ¸ì—ì„œ ë°©ê¸ˆ ìƒì„±í•œ ì €ì¥ì†Œë¡œ ì´ë™í•©ë‹ˆë‹¤. 'Settings' &rarr; 'Pages' íƒ­ìœ¼ë¡œ ì´ë™í•˜ì—¬ 'Source'ë¥¼ 'Deploy from a branch'ë¡œ, ë¸Œëœì¹˜ë¥¼ 'main' (ë˜ëŠ” 'master')ìœ¼ë¡œ ì„ íƒí•˜ê³  'Save'ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.</p>
                </div>

                <div>
                    <h3 class="font-semibold text-lg text-slate-800">6. ë°°í¬ í™•ì¸ ë° ê³µìœ </h3>
                    <p class="mt-1 ml-2">ì ì‹œ í›„ í˜ì´ì§€ ìƒë‹¨ì— ë…¹ìƒ‰ìœ¼ë¡œ ê²Œì‹œ ì£¼ì†Œ(<code class="text-sm">https://&lt;ì‚¬ìš©ìëª…&gt;.github.io/&lt;ì €ì¥ì†Œëª…&gt;/</code>)ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ì´ ì£¼ì†Œë¡œ ì ‘ì†í•˜ì—¬ ê²Œì„ì„ í™•ì¸í•˜ê³  ì „ ì„¸ê³„ì™€ ê³µìœ í•˜ì„¸ìš”!</p>
                </div>
            </div>
        </section>

        <section id="step10" class="step bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-10">
            <h2 class="text-2xl font-bold mb-4 border-b pb-3 text-slate-900">ë§ˆì¹˜ë©°</h2>
            <p class="mb-6 text-slate-700">ì¶•í•˜í•©ë‹ˆë‹¤! ì´ ê°€ì´ë“œë¥¼ í†µí•´ ì•„ì´ë””ì–´ êµ¬ì²´í™”, íŒŒì´ì¬ AI ê°œë°œ, ê·¸ë¦¬ê³  ìµœì¢… ì›¹ ë°°í¬ê¹Œì§€ì˜ ì „ ê³¼ì •ì„ ì™„ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤.</p>
            <h3 class="font-semibold text-lg text-slate-800 mb-2">ì´ì œ ì—¬ëŸ¬ë¶„ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤:</h3>
            <ul class="list-disc list-inside space-y-2 text-slate-700">
                <li><strong>ê²Œì„ ì•„ì´ë””ì–´ í™•ì¥:</strong> ìƒˆë¡œìš´ ê·œì¹™ì´ë‚˜ ì¥ì• ë¬¼ì„ ì¶”ê°€í•˜ì—¬ ê²Œì„ì„ ë°œì „ì‹œì¼œ ë³´ì„¸ìš”.</li>
                <li><strong>ë³´ìƒ í•¨ìˆ˜ ì‹¤í—˜:</strong> ë‹¤ë¥¸ ë³´ìƒ ì²´ê³„ë¥¼ ì„¤ê³„í•˜ì—¬ AIì˜ í–‰ë™ íŒ¨í„´ ë³€í™”ë¥¼ ê´€ì°°í•´ë³´ì„¸ìš”.</li>
                <li><strong>ëª¨ë¸ ì•„í‚¤í…ì²˜ ë³€ê²½:</strong> SB3ì—ì„œ ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜(ì˜ˆ: DQN)ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.</li>
            </ul>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const copyButtons = document.querySelectorAll('.copy-button');
            copyButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const codeBlock = button.nextElementSibling.querySelector('code');
                    const codeText = codeBlock.innerText;
                    navigator.clipboard.writeText(codeText).then(() => {
                        button.textContent = 'ë³µì‚¬ ì™„ë£Œ!';
                        button.classList.add('copied');
                        setTimeout(() => {
                            button.textContent = 'ë³µì‚¬';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(err => console.error('Copy failed', err));
                });
            });

            const modal = document.getElementById('theme-modal');
            const openModalBtn = document.getElementById('open-modal-btn');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const themeGrid = document.getElementById('theme-grid');
            const step1PromptCodeElement = document.getElementById('step1-prompt-code');

            async function loadThemes() {
                try {
                    const response = await fetch('themes.json');
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const themes = await response.json();

                    themeGrid.innerHTML = '';
                    themes.sort((a, b) => a.title.localeCompare(b.title, 'ko')).forEach(theme => {
                        const card = document.createElement('div');
                        card.className = 'modal-card bg-slate-50 p-4 rounded-lg cursor-pointer border hover:border-amber-500 hover:bg-amber-50';
                        card.innerHTML = `<div class="text-3xl mb-2">${theme.emoji}</div><h3 class="font-bold text-slate-800">${theme.title}</h3><p class="text-sm text-slate-600 mt-1">${theme.description}</p>`;
                        card.addEventListener('click', () => {
                            const basePrompt = `You are a creative game designer. Based on the theme "[THEME_PLACEHOLDER]", please develop a detailed and engaging game plan.\n\nThe plan must be structured with the following four sections:\n\n1.  **Game Concept:** A brief, exciting one-paragraph summary of the game.\n2.  **Player Objective:** A clear description of what the player needs to accomplish.\n3.  **Controls:** A simple and intuitive control scheme.\n4.  **Win/Loss Conditions:** Specific, measurable conditions for success and failure.\n\nWrite the plan in Korean.`;
                            const promptToCopy = basePrompt.replace('[THEME_PLACEHOLDER]', `"${theme.rl_concept}"`);
                            
                            step1PromptCodeElement.textContent = basePrompt.replace(`[ì—¬ê¸°ì— ì„ íƒí•œ ê²Œì„ ì£¼ì œì™€ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ: ë¡œì¼“ ì°©ë¥™ì‹œí‚¤ê¸°: ì¢Œìš° ë° ë©”ì¸ ì¶”ë ¥ì„ ì‚¬ìš©í•´, í™”ë©´ ìƒë‹¨ì—ì„œ ë–¨ì–´ì§€ëŠ” ë¡œì¼“ì´ ì •í•´ì§„ ì°©ë¥™ ì§€ì ì— ë¶€ë“œëŸ½ê²Œ ì°©ë¥™í•˜ëŠ” ê²Œì„]`, `[${theme.rl_concept}]`);

                            navigator.clipboard.writeText(promptToCopy).then(() => {
                                alert(`'${theme.title}' ì£¼ì œì˜ ìƒì„¸ í”„ë¡¬í”„íŠ¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. Geminiì—ê²Œ ë°”ë¡œ ë¶™ì—¬ë„£ì–´ ì‚¬ìš©í•˜ì„¸ìš”!`);
                            }).catch(err => console.error('Failed to copy: ', err));
                            modal.classList.add('hidden');
                        });
                        themeGrid.appendChild(card);
                    });
                } catch (error) {
                    console.error("Could not load themes:", error);
                    if (themeGrid) themeGrid.innerHTML = '<p class="text-red-500">í…Œë§ˆë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. themes.json íŒŒì¼ì´ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>';
                }
            }

            openModalBtn.addEventListener('click', () => modal.classList.remove('hidden'));
            closeModalBtn.addEventListener('click', () => modal.classList.add('hidden'));
            modal.addEventListener('click', (e) => { if (e.target.id === 'theme-modal') modal.classList.add('hidden'); });

            const gameLogicTextarea = document.getElementById('game-logic-textarea');
            const step2PromptCodeElement = document.getElementById('step2-prompt-code');
            const baseStep2Prompt = step2PromptCodeElement.innerText;

            gameLogicTextarea.addEventListener('input', () => {
                const userInput = gameLogicTextarea.value;
                step2PromptCodeElement.innerText = userInput.trim() !== '' ? baseStep2Prompt.replace("[ì—¬ê¸°ì— ìœ„ 'ê²Œì„ ë¡œì§ ê¸°íš' ì…ë ¥ë€ì˜ ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.]", userInput) : baseStep2Prompt;
            });
            
            loadThemes();
        });
    </script>
</body>
</html>